import{c as ee,a3 as b,j as e,A as j,m as x,n as te,b as ae,R as se,e as le,p as re,$ as ne,X as U,L as de}from"./index-D2lxm7TE.js";import{r as o}from"./vendor-xASHc04L.js";import{u as oe}from"./i18n-Skc9GWxP.js";import{C as m}from"./check-Bdt2AJYq.js";import{P as ie}from"./plus-BwHWfSI_.js";import{T as A}from"./trash-2-BiYJoZNu.js";import{Q as V}from"./qr-code-CHnbh_bi.js";import{C as k}from"./copy-VGIYFV2K.js";import{D as X}from"./download-DlFlLBXU.js";import"./ui-BMjqw1mu.js";import"./charts-X6rqVOAO.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=ee("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),Y=[{value:"demo",label:"Demo Token",description:"30-minute read-only demo access",color:"bg-amber-100 text-amber-800"},{value:"project_access",label:"Project Token",description:"Long-term project access",color:"bg-blue-100 text-blue-800"},{value:"temporary",label:"Temporary Token",description:"Short-term access",color:"bg-yellow-100 text-yellow-800"},{value:"magic_link",label:"Magic Link",description:"One-time login link",color:"bg-purple-100 text-purple-800"}],q={active:"bg-emerald-100 text-emerald-800 border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-400 dark:border-emerald-800",revoked:"bg-rose-100 text-rose-800 border-rose-200 dark:bg-rose-900/30 dark:text-rose-400 dark:border-rose-800",expired:"bg-slate-100 text-slate-800 border-slate-200 dark:bg-slate-900/30 dark:text-slate-400 dark:border-slate-800"},d=a=>a.status==="revoked"?"revoked":new Date(a.expiresAt)<new Date?"expired":a.status;function ve(){const{t:a}=oe(),[B,H]=o.useState([]),[Q,u]=o.useState(!1),[D,f]=o.useState(null),[O,P]=o.useState(null),[N,J]=o.useState(""),[M,_]=o.useState("card"),[W,E]=o.useState(!1),[R,C]=o.useState(!1),[s,v]=o.useState(null),[p,F]=o.useState(null),[l,g]=o.useState({type:"demo",userId:"",projectId:"",expiresInMinutes:30,maxUsageCount:0,description:"",defaultLanguage:"en"}),[i,z]=o.useState(null);o.useEffect(()=>{y()},[]);const y=async()=>{var t,r;u(!0);try{const n=await b.get("/auth/tokens/active");H(n.data||[])}catch(n){f(((r=(t=n.response)==null?void 0:t.data)==null?void 0:r.message)||a("tokenManagement.error.fetchFailed"))}finally{u(!1)}},Z=async t=>{var r,n;t.preventDefault(),u(!0),f(null);try{let c;l.type==="demo"?c=await b.post("/auth/tokens/demo",{defaultLanguage:l.defaultLanguage}):l.type==="magic_link"&&l.userId?c=await b.post(`/auth/tokens/magic/${l.userId}`):l.type==="project_access"&&l.projectId?c=await b.post(`/auth/tokens/project/${l.projectId}`,{userId:l.userId}):c=await b.post("/auth/tokens",l),z(c.data),P(a("tokenManagement.success.generated")),y()}catch(c){f(((n=(r=c.response)==null?void 0:r.data)==null?void 0:n.message)||a("tokenManagement.errors.generateFailed"))}finally{u(!1)}},I=async t=>{var r,n;if(confirm(a("tokenManagement.confirmRevoke"))){u(!0);try{await b.delete(`/auth/tokens/${t}`),P(a("tokenManagement.success.revoked")),y()}catch(c){f(((n=(r=c.response)==null?void 0:r.data)==null?void 0:n.message)||a("tokenManagement.errors.revokeFailed"))}finally{u(!1)}}},h=(t,r)=>{navigator.clipboard.writeText(t),F(r),setTimeout(()=>F(null),2e3)},G=(t,r)=>{const n=document.createElement("a");n.href=t,n.download=r,document.body.appendChild(n),n.click(),document.body.removeChild(n)},K=t=>{v(t),C(!0)},T=B.filter(t=>t.description.toLowerCase().includes(N.toLowerCase())||t.type.toLowerCase().includes(N.toLowerCase())||t.tokenId.toLowerCase().includes(N.toLowerCase())),L=t=>a(`tokenManagement.types.${t}`)||t,S=t=>{var r;return((r=Y.find(n=>n.value===t))==null?void 0:r.color)||"bg-gray-100 text-gray-800"},w=t=>new Date(t).toLocaleString(),$=()=>{g({type:"demo",userId:"",projectId:"",expiresInMinutes:30,maxUsageCount:0,description:"",defaultLanguage:"en"}),z(null),E(!1)};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:a("tokenManagement.title")}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:a("tokenManagement.subtitle")})]}),e.jsxs(j,{children:[D&&e.jsxs(x.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),e.jsx("span",{className:"text-sm text-red-700 dark:text-red-300",children:D})]}),O&&e.jsxs(x.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center gap-2",children:[e.jsx(m,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-sm text-green-700 dark:text-green-300",children:O})]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"relative w-96",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",value:N,onChange:t=>J(t.target.value),placeholder:a("tokenManagement.search"),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx(se,{className:"w-4 h-4"}),a("common.refresh")]}),e.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:[e.jsx(ie,{className:"w-4 h-4"}),a("tokenManagement.generateToken")]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-800 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>_("card"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-all ${M==="card"?"bg-white dark:bg-slate-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:a("tokenManagement.viewMode.card")}),e.jsx("button",{onClick:()=>_("list"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-all ${M==="list"?"bg-white dark:bg-slate-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:a("tokenManagement.viewMode.list")})]}),e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:a("tokenManagement.totalCount",{count:T.length})})]}),M==="card"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.jsx(j,{children:T.map(t=>e.jsxs(x.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:`bg-white dark:bg-slate-800 rounded-xl border overflow-hidden hover:shadow-lg transition-all cursor-pointer ${d(t)==="active"?"border-slate-200 dark:border-slate-700":"border-slate-200 dark:border-slate-800 opacity-75 grayscale-[0.5]"}`,onClick:()=>v(t),children:[d(t)!=="active"&&e.jsx("div",{className:"absolute top-0 right-0 p-1",children:e.jsx("div",{className:`w-2 h-2 rounded-full ${d(t)==="revoked"?"bg-rose-500":"bg-slate-400"}`})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${S(t.type)}`,children:L(t.type)}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1 line-clamp-2",children:t.description||a("tokenManagement.placeholders.description")})]}),e.jsx("button",{onClick:r=>{r.stopPropagation(),I(t.tokenId)},className:"p-1 text-slate-400 hover:text-red-600",children:e.jsx(A,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-2 text-sm text-slate-600 dark:text-slate-400 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsxs("span",{children:[a("tokenManagement.expiresAt"),": ",w(t.expiresAt)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-0.5 text-xs font-medium rounded-full border ${q[d(t)]||"bg-gray-100 text-gray-800"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${d(t)==="active"?"bg-emerald-500 animate-pulse":d(t)==="revoked"?"bg-rose-500":"bg-slate-400"}`}),a(`tokenManagement.statuses.${d(t)}`)]})]}),t.usageCount>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsxs("span",{children:[a("tokenManagement.usageCount"),": ",t.usageCount]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:r=>{r.stopPropagation(),h(t.shareUrl,`url-${t.tokenId}`)},className:"flex-1 flex items-center justify-center gap-1 px-3 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg text-sm font-medium hover:bg-slate-200 dark:hover:bg-slate-600",children:[p===`url-${t.tokenId}`?e.jsx(m,{className:"w-4 h-4 text-green-600"}):e.jsx(ce,{className:"w-4 h-4"}),a("tokenManagement.copyUrl")]}),t.qrCode&&e.jsx("button",{onClick:r=>{r.stopPropagation(),K(t)},className:"flex items-center justify-center px-3 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg text-sm font-medium hover:bg-slate-200 dark:hover:bg-slate-600",children:e.jsx(V,{className:"w-4 h-4"})})]})]})]},t.tokenId))})}):e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden px-4",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:a("tokenManagement.tokenType")}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:a("tokenManagement.description")}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:a("tokenManagement.expiresAt")}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:a("tokenManagement.status")}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:a("userManagement.actions")})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:T.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer",onClick:()=>v(t),children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 text-xs rounded-full ${S(t.type)}`,children:L(t.type)})}),e.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-slate-400 max-w-xs truncate",children:t.description||a("tokenManagement.placeholders.description")}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500",children:w(t.expiresAt)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-0.5 text-xs font-medium rounded-full border ${q[d(t)]||"bg-gray-100 text-gray-800"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${d(t)==="active"?"bg-emerald-500 animate-pulse":d(t)==="revoked"?"bg-rose-500":"bg-slate-400"}`}),a(`tokenManagement.statuses.${d(t)}`)]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-right",children:e.jsx("button",{onClick:r=>{r.stopPropagation(),I(t.tokenId)},className:"text-red-600 hover:text-red-700 p-2",title:a("tokenManagement.revoke"),children:e.jsx(A,{className:"w-4 h-4"})})})]},t.tokenId))})]})}),e.jsx(j,{children:W&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(x.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:a(i?"tokenManagement.tokenGenerated":"tokenManagement.generateToken")}),e.jsx("button",{onClick:$,className:"p-2 text-slate-400 hover:text-slate-600",children:e.jsx(U,{className:"w-5 h-5"})})]}),i?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(m,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium text-green-800 dark:text-green-200",children:a("tokenManagement.success.generated")})]}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:a("tokenManagement.shareInstructions")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:a("tokenManagement.token")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i.token,readOnly:!0,className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white font-mono text-sm"}),e.jsx("button",{onClick:()=>h(i.token,"token"),className:"px-3 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:p==="token"?e.jsx(m,{className:"w-4 h-4 text-green-600"}):e.jsx(k,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:a("tokenManagement.shareUrl")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i.shareUrl,readOnly:!0,className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white text-sm"}),e.jsx("button",{onClick:()=>h(i.shareUrl,"shareUrl"),className:"px-3 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:p==="shareUrl"?e.jsx(m,{className:"w-4 h-4 text-green-600"}):e.jsx(k,{className:"w-4 h-4"})})]})]}),i.qrCode&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:a("tokenManagement.qrCode")}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("img",{src:i.qrCode,alt:a("tokenManagement.qrCode"),className:"w-48 h-48 rounded-lg border border-slate-200 dark:border-slate-700"}),e.jsxs("button",{onClick:()=>G(i.qrCode,`token-${i.tokenId}.png`),className:"flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg text-sm font-medium hover:bg-slate-200 dark:hover:bg-slate-600",children:[e.jsx(X,{className:"w-4 h-4"}),a("tokenManagement.downloadQr")]})]})]}),e.jsx("div",{className:"flex gap-3 pt-4",children:e.jsx("button",{onClick:$,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:a("tokenManagement.generateAnother")})})]}):e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:a("tokenManagement.tokenType")}),e.jsx("select",{value:l.type,onChange:t=>g({...l,type:t.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:Y.map(t=>e.jsx("option",{value:t.value,children:a(`tokenManagement.types.${t.value}`)},t.value))}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:a(`tokenManagement.typeDescriptions.${l.type}`)})]}),(l.type==="project_access"||l.type==="magic_link")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:a("tokenManagement.fields.userId")}),e.jsx("input",{type:"text",value:l.userId,onChange:t=>g({...l,userId:t.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",placeholder:a("tokenManagement.placeholders.userId"),required:l.type==="magic_link"})]}),l.type==="project_access"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:a("tokenManagement.fields.projectId")}),e.jsx("input",{type:"text",value:l.projectId,onChange:t=>g({...l,projectId:t.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",placeholder:a("tokenManagement.placeholders.projectId"),required:!0})]}),l.type!=="demo"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:a("tokenManagement.fields.expiresIn")}),e.jsx("input",{type:"number",value:l.expiresInMinutes,onChange:t=>g({...l,expiresInMinutes:parseInt(t.target.value)}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",min:1,max:10080})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:a("tokenManagement.fields.maxUsage")}),e.jsx("input",{type:"number",value:l.maxUsageCount,onChange:t=>g({...l,maxUsageCount:parseInt(t.target.value)}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",min:0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:a("tokenManagement.description")}),e.jsx("input",{type:"text",value:l.description,onChange:t=>g({...l,description:t.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",placeholder:a("tokenManagement.placeholders.description")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:a("tokenManagement.fields.defaultLanguage")}),e.jsxs("select",{value:l.defaultLanguage,onChange:t=>g({...l,defaultLanguage:t.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"zh",children:"简体中文"}),e.jsx("option",{value:"ar",children:"العربية (Arabic)"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:$,className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700",children:a("common.cancel")}),e.jsx("button",{type:"submit",disabled:Q,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg font-medium",children:Q?e.jsx(de,{className:"w-5 h-5 animate-spin mx-auto"}):a("tokenManagement.generateToken")})]})]})]})})}),e.jsx(j,{children:R&&s&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>C(!1),children:e.jsxs(x.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-sm w-full p-6",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"QR Code"}),e.jsx("button",{onClick:()=>C(!1),className:"p-2 text-slate-400 hover:text-slate-600",children:e.jsx(U,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.qrCode&&e.jsx("img",{src:s.qrCode,alt:"QR Code",className:"w-64 h-64 rounded-lg border border-slate-200 dark:border-slate-700"}),e.jsx("p",{className:"text-sm text-slate-500 text-center",children:a("tokenManagement.scanInstructions")}),e.jsxs("button",{onClick:()=>G(s.qrCode,`token-${s.tokenId}.png`),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:[e.jsx(X,{className:"w-4 h-4"}),a("common.download")]})]})]})})}),e.jsx(j,{children:s&&!R&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(x.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:a("tokenManagement.tokenDetails")}),e.jsx("button",{onClick:()=>v(null),className:"p-2 text-slate-400 hover:text-slate-600",children:e.jsx(U,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4 text-slate-700 dark:text-slate-300",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("tokenManagement.tokenType")}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${S(s.type)}`,children:L(s.type)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("tokenManagement.description")}),e.jsx("p",{className:"text-sm",children:s.description||a("tokenManagement.placeholders.description")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("tokenManagement.status")}),e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-0.5 text-xs font-medium rounded-full border ${q[d(s)]||"bg-gray-100 text-gray-800"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${d(s)==="active"?"bg-emerald-500 animate-pulse":d(s)==="revoked"?"bg-rose-500":"bg-slate-400"}`}),a(`tokenManagement.statuses.${d(s)}`)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("tokenManagement.expiresAt")}),e.jsx("p",{className:"text-sm",children:w(s.expiresAt)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("tokenManagement.createdAt")}),e.jsx("p",{className:"text-sm",children:w(s.createdAt)})]}),s.usageCount>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("tokenManagement.usageCount")}),e.jsxs("p",{className:"text-sm",children:[s.usageCount," / ",s.maxUsageCount===0?a("tokenManagement.unlimited"):s.maxUsageCount]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("tokenManagement.tokenId")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:s.tokenId,readOnly:!0,className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white font-mono text-sm"}),e.jsx("button",{onClick:()=>h(s.tokenId,"detailTokenId"),className:"px-3 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:p==="detailTokenId"?e.jsx(m,{className:"w-4 h-4 text-green-600"}):e.jsx(k,{className:"w-4 h-4"})})]})]}),s.token&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("tokenManagement.token")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:s.token,readOnly:!0,className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white font-mono text-sm"}),e.jsx("button",{onClick:()=>h(s.token,"detailToken"),className:"px-3 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:p==="detailToken"?e.jsx(m,{className:"w-4 h-4 text-green-600"}):e.jsx(k,{className:"w-4 h-4"})})]})]}),s.shareUrl&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("tokenManagement.shareUrl")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:s.shareUrl,readOnly:!0,className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white text-sm"}),e.jsx("button",{onClick:()=>h(s.shareUrl,"detailShareUrl"),className:"px-3 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:p==="detailShareUrl"?e.jsx(m,{className:"w-4 h-4 text-green-600"}):e.jsx(k,{className:"w-4 h-4"})})]})]}),s.magicLink&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("tokenManagement.magicLink")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:s.magicLink,readOnly:!0,className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white text-sm"}),e.jsx("button",{onClick:()=>h(s.magicLink,"detailMagicLink"),className:"px-3 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:p==="detailMagicLink"?e.jsx(m,{className:"w-4 h-4 text-green-600"}):e.jsx(k,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[s.qrCode&&e.jsxs("button",{onClick:()=>K(s),className:"flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg text-sm font-medium hover:bg-slate-200 dark:hover:bg-slate-600",children:[e.jsx(V,{className:"w-4 h-4"}),a("tokenManagement.viewQr")]}),e.jsxs("button",{onClick:()=>I(s.tokenId),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium",children:[e.jsx(A,{className:"w-4 h-4"}),a("tokenManagement.revoke")]})]})]})})})]})}export{ve as default};
