import{c as Le,j as e,X as R,S as Ne,A as Q,m as b,L as I,C as Ye,E as ze,a as le,R as M,b as ye,d as ie,e as ke,u as We,f as Ge,g as Qe,h as Xe,i as qe,k as Je,l as Ze,n as O,o as es,p as we,q as ss,r as ts}from"./index-B-k8u74z.js";import{r as l,a as $}from"./vendor-xASHc04L.js";import{u as as,a as rs,o as ls,s as is,n as ve,_ as ns}from"./schemas-oLtz9YBc.js";import{u as cs}from"./useTransit-BNkVO0Ve.js";import{u as X}from"./i18n-Skc9GWxP.js";import{U as Ce}from"./upload-D6X6nAKC.js";import{F as ds}from"./file-text-BxNSkgGc.js";import{A as ne,B as ce,L as os,U as Se,H as ms}from"./unlock-BvETDdkE.js";import{M as xs}from"./more-horizontal-C7F76PgB.js";import{D as ps}from"./download-DglajPwi.js";import{P as G}from"./plus-WgZYuXuD.js";import{F as Ee}from"./filter-CQKU46wy.js";import{C as hs}from"./copy-CIwZdsqq.js";import{W as us}from"./wifi-D98ar-ZO.js";import{Q as Ae}from"./qr-code-CwG8Sij1.js";import{C as bs}from"./cpu-DyOmv0ok.js";import{S as gs}from"./smartphone-Cowx9Rz8.js";import"./ui-BMjqw1mu.js";import"./charts-X6rqVOAO.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=Le("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=Le("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);function Ns(){const[s,p]=l.useState(null);return{confirm:i=>new Promise(j=>{p({...i,isOpen:!0,onConfirm:()=>{j(!0),p(null)},onCancel:()=>{j(!1),p(null)}})}),dialogProps:s}}function ys({onClose:s,onSuccess:p}){const{t:o}=X(),[i,j]=l.useState("UPLOAD"),g=cs(),u=async()=>{const n={UPLOAD:"OCR",OCR:"FACE_MATCH",FACE_MATCH:"VERIFY",VERIFY:"SUCCESS",SUCCESS:"SUCCESS"};try{if(i!=="SUCCESS"){await g.mutateAsync(i);const m=n[i];j(m),m==="SUCCESS"&&setTimeout(p,2e3)}}catch(m){console.error("KYC Error:",m)}},A=[{id:"UPLOAD",icon:Ce,label:o("kyc.steps.upload")},{id:"OCR",icon:ds,label:o("kyc.steps.ocr")},{id:"FACE_MATCH",icon:fs,label:o("kyc.steps.faceMatch")},{id:"VERIFY",icon:js,label:o("kyc.steps.verify")}];return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-display font-bold text-slate-900 dark:text-slate-100",children:o("kyc.title")}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-slate-100 dark:hover:bg-dark-700 rounded-lg",children:e.jsx(R,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex justify-between mb-8 relative",children:[e.jsx("div",{className:"absolute top-1/2 left-0 w-full h-0.5 bg-slate-100 dark:bg-dark-800 -translate-y-1/2 -z-10"}),A.map((n,m)=>{const N=n.icon,a=i===n.id,c=A.findIndex(S=>S.id===i)>m||i==="SUCCESS";return e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-all duration-500 ${a?"bg-primary-500 text-white ring-4 ring-primary-500/20":c?"bg-success text-white":"bg-white dark:bg-dark-800 text-slate-400 border border-slate-200 dark:border-dark-700"}`,children:c?e.jsx(Ne,{className:"w-5 h-5"}):e.jsx(N,{className:"w-5 h-5"})}),e.jsx("span",{className:`text-[10px] font-medium uppercase tracking-wider ${a?"text-primary-600":"text-slate-500"}`,children:n.label})]},n.id)})]}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 bg-slate-50 dark:bg-dark-900/50 rounded-2xl border border-dashed border-slate-200 dark:border-dark-700",children:[e.jsxs(Q,{mode:"wait",children:[i==="UPLOAD"&&e.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-primary-500/10 text-primary-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(Ce,{className:"w-10 h-10"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-slate-100 mb-2",children:o("kyc.upload.title")}),e.jsx("p",{className:"text-sm text-slate-500 mb-6",children:o("kyc.upload.hint")}),e.jsx("button",{onClick:u,className:"btn-primary w-full max-w-xs",children:o("kyc.upload.selectFile")})]},"upload"),g.isPending&&e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[e.jsx(I,{className:"w-12 h-12 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:o(i==="OCR"?"kyc.loading.ocr":i==="FACE_MATCH"?"kyc.loading.faceMatch":"kyc.loading.verify")})]},"loading"),i==="SUCCESS"&&e.jsxs(b.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-success/10 text-success rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ne,{className:"w-12 h-12"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:o("kyc.success.title")}),e.jsx("p",{className:"text-sm text-slate-500",children:o("kyc.success.description")})]},"success")]}),i!=="UPLOAD"&&i!=="SUCCESS"&&!g.isPending&&e.jsxs("button",{onClick:u,className:"btn-primary flex items-center gap-2 px-8 mt-6",children:[o("kyc.actions.continue")," ",e.jsx(Ye,{className:"w-4 h-4"})]})]})]})}function Te({card:s,onTopUp:p,onSuspend:o,onActivate:i,onBlacklist:j,onReplace:g,onView:u,disabled:A=!1}){const{t:n}=X(),[m,N]=l.useState(!1),a=l.useRef(null);l.useEffect(()=>{const h=k=>{a.current&&!a.current.contains(k.target)&&N(!1)};return m&&document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[m]);const c=h=>{h(),N(!1)},y=[{label:n("common.details"),icon:ze,onClick:()=>c(u),show:!0,className:"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-dark-700"},{label:n("cards.topUp"),icon:ne,onClick:()=>c(p),show:s.status==="ACTIVE",className:"text-success hover:bg-success/10"},{label:n("cards.suspend"),icon:le,onClick:()=>c(o),show:s.status==="ACTIVE",className:"text-warning hover:bg-warning/10"},{label:n("cards.activate"),icon:M,onClick:()=>c(i),show:s.status==="SUSPENDED",className:"text-success hover:bg-success/10"},{label:n("cards.actions.replace"),icon:M,onClick:()=>c(g),show:s.status!=="BLACKLISTED",className:"text-primary-600 dark:text-primary-400 hover:bg-primary-500/10"},{label:n("cards.blacklist"),icon:ce,onClick:()=>c(j),show:s.status!=="BLACKLISTED",className:"text-error hover:bg-error/10"}].filter(h=>h.show);return e.jsxs("div",{className:"relative",ref:a,children:[e.jsx("button",{onClick:h=>{h.stopPropagation(),N(!m)},disabled:A,className:"p-2 hover:bg-slate-100 dark:hover:bg-dark-700 rounded-lg transition-colors text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 disabled:opacity-50","aria-label":n("cards.quickActions.title"),children:e.jsx(xs,{className:"w-4 h-4"})}),e.jsx(Q,{children:m&&e.jsx(b.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15},className:"absolute right-0 top-full mt-1 w-48 bg-white dark:bg-dark-800 rounded-xl shadow-xl border border-slate-200 dark:border-dark-600 z-50 overflow-hidden",onClick:h=>h.stopPropagation(),children:e.jsxs("div",{className:"p-1",children:[e.jsxs("div",{className:"px-3 py-2 text-xs font-medium text-slate-400 dark:text-slate-500 uppercase tracking-wider flex items-center justify-between",children:[n("cards.quickActions.title"),e.jsx("button",{onClick:()=>N(!1),className:"p-1 hover:bg-slate-100 dark:hover:bg-dark-700 rounded",children:e.jsx(R,{className:"w-3 h-3"})})]}),y.map((h,k)=>e.jsxs("button",{onClick:h.onClick,className:`w-full flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-lg transition-colors ${h.className}`,children:[e.jsx(h.icon,{className:"w-4 h-4"}),h.label]},k))]})})})]})}function ks({query:s,cards:p,isLoading:o=!1,onSelect:i,onClose:j,onQueryChange:g}){const{t:u}=X(),[A,n]=l.useState(!1),[m,N]=l.useState([]),a=l.useRef(null),c=l.useRef(null);l.useEffect(()=>{const r=localStorage.getItem("cardSearchHistory");r&&N(JSON.parse(r).slice(0,5))},[]),l.useEffect(()=>{const r=f=>{c.current&&!c.current.contains(f.target)&&n(!1)};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[]);const S=l.useCallback(r=>{if(!r.trim())return;const f=[r,...m.filter(T=>T!==r)].slice(0,5);N(f),localStorage.setItem("cardSearchHistory",JSON.stringify(f))},[m]),y=r=>{S(s),i(r),n(!1)},h=r=>{var f;g(r),(f=a.current)==null||f.focus()},k=()=>{N([]),localStorage.removeItem("cardSearchHistory")},q=A&&(s.length>0||m.length>0),P=r=>{switch(r){case"ACTIVE":return"bg-success text-success-foreground";case"SUSPENDED":return"bg-warning text-warning-foreground";case"BLACKLISTED":return"bg-error text-white";case"EXPIRED":return"bg-slate-400 text-white";default:return"bg-slate-200 text-slate-700"}};return e.jsxs("div",{className:"relative flex-1 min-w-[300px]",ref:c,children:[e.jsx(ye,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400 dark:text-slate-500 pointer-events-none"}),e.jsx("input",{ref:a,type:"text",placeholder:u("cards.search.placeholder"),value:s,onChange:r=>g(r.target.value),onFocus:()=>n(!0),className:"w-full pl-10 pr-10 py-2 bg-slate-50 dark:bg-dark-900 border border-slate-200 dark:border-dark-600 rounded-lg text-slate-900 dark:text-slate-200 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:border-primary-500/50 focus:ring-2 focus:ring-primary-500/20 transition-all"}),s&&e.jsx("button",{onClick:()=>{var r;g(""),(r=a.current)==null||r.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-slate-200 dark:hover:bg-dark-700 rounded transition-colors",children:e.jsx(R,{className:"w-4 h-4 text-slate-400"})}),e.jsx(Q,{children:q&&e.jsxs(b.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.15},className:"absolute left-0 right-0 top-full mt-2 bg-white dark:bg-dark-800 rounded-xl shadow-xl border border-slate-200 dark:border-dark-600 z-50 overflow-hidden max-h-80 overflow-y-auto",children:[s.length>0&&e.jsx("div",{className:"p-2",children:o?e.jsxs("div",{className:"flex items-center justify-center py-4 text-slate-500",children:[e.jsx(I,{className:"w-5 h-5 animate-spin mr-2"}),u("common.loading")]}):p.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-2 py-1 text-xs font-medium text-slate-400 uppercase tracking-wider",children:u("cards.search.results",{count:p.length})}),p.slice(0,8).map(r=>e.jsxs("button",{onClick:()=>y(r),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-slate-50 dark:hover:bg-dark-700 rounded-lg transition-colors text-left",children:[e.jsx("div",{className:"p-2 bg-slate-100 dark:bg-dark-600 rounded-lg",children:e.jsx(ie,{className:"w-4 h-4 text-slate-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-mono text-sm text-slate-900 dark:text-slate-200 truncate",children:r.number}),e.jsxs("p",{className:"text-xs text-slate-500 truncate",children:[u(`cards.types.${r.type}`)," â€¢ Â¥",r.balance.toLocaleString()]})]}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold uppercase ${P(r.status)}`,children:u(`cards.status.${r.status}`)})]},r.id))]}):e.jsxs("div",{className:"flex flex-col items-center py-6 text-slate-500",children:[e.jsx(ye,{className:"w-8 h-8 mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:u("cards.search.noResults")})]})}),s.length===0&&m.length>0&&e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"flex items-center justify-between px-2 py-1",children:[e.jsxs("span",{className:"text-xs font-medium text-slate-400 uppercase tracking-wider flex items-center gap-1",children:[e.jsx(ke,{className:"w-3 h-3"}),u("cards.search.recentSearches")]}),e.jsx("button",{onClick:k,className:"text-xs text-slate-400 hover:text-slate-600 transition-colors",children:u("common.clear")})]}),m.map((r,f)=>e.jsxs("button",{onClick:()=>h(r),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-slate-50 dark:hover:bg-dark-700 rounded-lg transition-colors text-left",children:[e.jsx(ke,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:r})]},f))]})]})})]})}const ae=s=>{switch(s){case"ACTIVE":return"bg-success/15 text-success border-success/30";case"SUSPENDED":return"bg-warning/15 text-warning border-warning/30";case"BLACKLISTED":return"bg-error/15 text-error border-error/30";case"EXPIRED":return"bg-slate-200 dark:bg-slate-700 text-slate-500 dark:text-slate-400 border-slate-300 dark:border-slate-600";default:return"bg-slate-100 text-slate-600 border-slate-200"}},De=(s,p)=>{if(!(s!=null&&s.type)||!s.type.startsWith("TOURIST_"))return null;const o=new Date(s.expiresAt),i=new Date,j=o.getTime()-i.getTime();if(j<=0)return{text:p("cards.countdown.expired"),isExpired:!0};const g=Math.floor(j/(1e3*60*60)),u=Math.floor(g/24);return u>0?{text:p("cards.countdown.daysLeft",{days:u}),isExpired:!1,progress:g/(parseInt(s.type.replace("TOURIST_","").replace("D",""))*24)}:{text:p("cards.countdown.hoursLeft",{hours:g}),isExpired:!1,progress:g/24}},ws=["All Types","STANDARD","STUDENT","SENIOR","STAFF","TOURIST_1D","TOURIST_3D","TOURIST_7D","PERIOD"],Ie=["All Status","ACTIVE","SUSPENDED","BLACKLISTED","EXPIRED"],re=ls({type:ns(["STANDARD","STUDENT","SENIOR","STAFF","TOURIST_1D","TOURIST_3D","TOURIST_7D","PERIOD"]),initialBalance:ve().min(0).max(1e4),validityYears:ve().min(1).max(10),notes:is().optional()});function Hs(){var je;const{t:s}=X(),[p,o]=l.useState("All Types"),[i,j]=l.useState("All Status"),[g,u]=l.useState(""),[A,n]=l.useState(!1),[m,N]=l.useState("list"),[a,c]=l.useState(null),[S,y]=l.useState(null),[h,k]=l.useState(!1),[q,P]=l.useState(!1),[r,f]=l.useState(0),[T,_]=l.useState("ALIPAY"),[Re,de]=l.useState(!1),[Pe,J]=l.useState(!1),[Ue,$e]=l.useState(!1),[F,oe]=l.useState(!1),[Me,vs]=l.useState("MOCK-QR-"+Math.random().toString(36).substring(7)),[E,me]=l.useState(null),[L,Z]=l.useState(!1),xe=5,{confirm:V,setLoading:pe,dialogProps:Be}=We(),{trackAction:he}=Ge();Ns(),l.useEffect(()=>{he({type:"view_page",page:"/cards",timestamp:Date.now()})},[he]);const{data:w,isLoading:ue,isError:Oe,error:be,refetch:_e}=Qe({type:p==="All Types"?void 0:p,status:i==="All Status"?void 0:i,search:g||void 0}),ee=Xe(),v=qe(),se=Je(),{data:te}=Ze((a==null?void 0:a.id)||""),{register:K,handleSubmit:Fe,formState:{errors:U,isSubmitting:ge},reset:Ve}=as({resolver:rs(re),defaultValues:{type:"STANDARD",initialBalance:0,validityYears:5,notes:""}}),Ke=async t=>{var x,B;if((t.type==="SENIOR"||t.type==="STUDENT"||t.type==="STANDARD")&&!Ue){J(!0);return}try{const D=await ee.mutateAsync(t);if(D&&D.id){const z=D.id;me(z),setTimeout(()=>me(null),1e4)}n(!1),Ve()}catch(D){y(((B=(x=D.response)==null?void 0:x.data)==null?void 0:B.message)||s("cards.issueError"))}},C=async(t,d)=>{var B,D,z;const x=(B=w==null?void 0:w.data)==null?void 0:B.find(W=>W.id===t);if(!(d!=="ACTIVE"&&!await V({type:d==="BLACKLISTED"?"danger":"warning",title:s(d==="BLACKLISTED"?"cards.confirmBlacklist":"cards.confirmSuspend"),message:s(d==="BLACKLISTED"?"cards.blacklistWarning":"cards.suspendWarning"),details:x?[{label:s("cards.cardNumber"),value:x.number},{label:s("cards.type"),value:s(`cards.types.${x.type}`)}]:[],confirmText:s("common.confirm"),cancelText:s("common.cancel"),countdown:d==="BLACKLISTED"?5:3}))){y(null),pe(!0);try{await v.mutateAsync({id:t,data:{status:d}})}catch(W){y(((z=(D=W.response)==null?void 0:D.data)==null?void 0:z.message)||s("cards.updateError"))}finally{pe(!1)}}},He=async()=>{var t,d;if(!(!a||r<=0)){if(r>1e3){y(s("cards.topUpLimitExceeded"));return}if(a.balance+r>5e3){y(s("cards.balanceLimitExceeded"));return}y(null);try{await se.mutateAsync({id:a.id,data:{amount:r}}),k(!1),f(0),de(!0),setTimeout(()=>de(!1),5e3)}catch(x){y(((d=(t=x.response)==null?void 0:t.data)==null?void 0:d.message)||s("cards.topUpError"))}}};((w==null?void 0:w.data)||[]).reduce((t,d)=>(t[d.status]=(t[d.status]||0)+1,t),{});const H=((w==null?void 0:w.data)||[]).filter(t=>t.balance<xe).length,Y=[...(w==null?void 0:w.data)||[]].filter(t=>!L||t.balance<xe).sort((t,d)=>t.id===E?-1:d.id===E?1:0),fe=(te==null?void 0:te.data)||[];return ue?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(I,{className:"w-8 h-8 animate-spin text-primary-600"})}):Oe?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 gap-4",children:[e.jsx(O,{className:"w-12 h-12 text-error"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:be instanceof Error?be.message:s("common.loadError")}),e.jsxs("button",{onClick:()=>_e(),className:"btn-secondary flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4"}),s("common.retry")]})]}):e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6","data-help":"card-grid",children:[S&&e.jsxs("div",{className:"p-4 bg-error/10 border border-error/20 rounded-lg flex items-center gap-3 text-error",children:[e.jsx(O,{className:"w-5 h-5"}),e.jsx("span",{children:S}),e.jsx("button",{onClick:()=>y(null),className:"ml-auto text-sm hover:underline",children:s("common.dismiss")})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-display font-bold text-slate-900 dark:text-slate-100",children:s("cards.title")}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:s("cards.subtitle")})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:[e.jsxs("div",{className:"hidden sm:flex bg-slate-100 dark:bg-dark-900 rounded-lg p-1 border border-slate-200 dark:border-dark-600",children:[e.jsx("button",{onClick:()=>N("grid"),className:`p-2 rounded-md transition-colors ${m==="grid"?"bg-white dark:bg-dark-700 text-slate-900 dark:text-slate-200 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:e.jsx(os,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>N("list"),className:`p-2 rounded-md transition-colors ${m==="list"?"bg-white dark:bg-dark-700 text-slate-900 dark:text-slate-200 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:e.jsx(es,{className:"w-4 h-4"})})]}),e.jsxs("button",{className:"hidden sm:flex btn-secondary items-center gap-2 text-sm",children:[e.jsx(ps,{className:"w-4 h-4"}),e.jsx("span",{children:s("common.export")})]}),e.jsxs("button",{onClick:()=>n(!0),className:"hidden sm:flex btn-primary items-center gap-2 text-sm",children:[e.jsx(G,{className:"w-4 h-4"}),s("cards.issueCard")]})]})]}),e.jsx("div",{className:"flex flex-col gap-4 sm:gap-6","data-help":"search-filter",children:e.jsx("div",{className:"glass-panel p-3 sm:p-4 sticky top-16 z-30 bg-white/80 dark:bg-dark-800/80 backdrop-blur-lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap sm:items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-full sm:w-auto",children:e.jsx(ks,{query:g,cards:Y,isLoading:ue,onSelect:t=>c(t),onClose:()=>{},onQueryChange:u})}),e.jsx("div",{className:"flex-1 w-full overflow-x-auto scrollbar-hide -mx-1 px-1",children:e.jsx("div",{className:"flex gap-2 pb-1 snap-x",children:ws.map(t=>e.jsx("button",{onClick:()=>o(t),className:`shrink-0 snap-start px-4 py-2 rounded-full text-sm font-medium transition-all active:scale-95 ${p===t?"bg-primary-500 text-white shadow-md":"bg-slate-100 dark:bg-dark-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-dark-600"}`,children:s(t==="All Types"?"common.allTypes":`cards.types.${t}`)},t))})}),e.jsxs("div",{className:"hidden md:flex flex-wrap items-center gap-2 ml-auto",children:[e.jsx(Ee,{className:"w-4 h-4 text-slate-400"}),e.jsx("select",{value:i,onChange:t=>j(t.target.value),className:"px-3 py-2 text-sm bg-slate-50 dark:bg-dark-900 border border-slate-200 dark:border-dark-600 rounded-lg text-slate-900 dark:text-slate-200 focus:outline-none focus:border-primary-500/50",children:Ie.map(t=>e.jsx("option",{value:t,children:s(t==="All Status"?"common.allStatus":`cards.status.${t}`)},t))}),e.jsxs("button",{onClick:()=>Z(!L),className:`px-3 py-2 rounded-lg font-medium text-sm transition-all flex items-center gap-2 ${L?"bg-warning/15 text-warning border border-warning/30":"bg-slate-100 dark:bg-dark-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-dark-600"}`,children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:s("cards.lowBalance")}),H>0&&e.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-xs font-bold ${L?"bg-warning text-white":"bg-warning/20 text-warning"}`,children:H})]})]}),e.jsxs("button",{onClick:()=>P(!0),className:"md:hidden p-2 text-slate-500 hover:bg-slate-100 dark:bg-dark-700 rounded-lg relative flex-shrink-0",children:[e.jsx(Ee,{className:"w-5 h-5"}),(i!=="All Status"||L)&&e.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-primary-500 rounded-full"})]})]})})}),m==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Y.map((t,d)=>e.jsxs(b.div,{layout:!0,onClick:()=>c(t),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1,boxShadow:t.id===E?["0 0 0 0px rgba(6, 182, 212, 0)","0 0 20px 2px rgba(6, 182, 212, 0.4)","0 0 0 0px rgba(6, 182, 212, 0)"]:"none"},transition:{delay:d*.05,boxShadow:{duration:2,repeat:1/0,ease:"easeInOut"}},className:`glass-panel p-6 cursor-pointer hover:border-primary-500/50 transition-all duration-300 relative group overflow-hidden ${t.id===E?"border-primary-500 ring-1 ring-primary-500/20 shadow-lg shadow-primary-500/10":""}`,children:[t.id===E&&e.jsx("div",{className:"absolute top-0 right-0 p-1 px-2 bg-primary-500 text-[8px] font-bold text-white uppercase tracking-tighter rounded-bl-lg animate-pulse z-10",children:"New"}),e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${t.status==="ACTIVE"?"bg-success/10":t.status==="SUSPENDED"?"bg-warning/10":"bg-error/10"}`,children:e.jsx(ie,{className:`w-6 h-6 ${t.status==="ACTIVE"?"text-success":t.status==="SUSPENDED"?"text-warning":"text-error"}`})}),e.jsx("div",{onClick:x=>x.stopPropagation(),children:e.jsx(Te,{card:t,onView:()=>c(t),onTopUp:()=>{c(t),k(!0)},onSuspend:()=>C(t.id,"SUSPENDED"),onActivate:()=>C(t.id,"ACTIVE"),onBlacklist:()=>C(t.id,"BLACKLISTED"),onReplace:()=>c(t),disabled:v.isPending})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:s("cards.cardNumber")}),e.jsx("p",{className:"font-mono text-lg text-slate-900 dark:text-slate-200 tracking-wider",children:t.number})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:s("cards.type")}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 dark:bg-dark-700 text-slate-600 dark:text-slate-300",children:s(`cards.types.${t.type}`)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:s("common.status")}),e.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold border ${ae(t.status)}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full mr-1.5 ${t.status==="ACTIVE"?"bg-success":t.status==="SUSPENDED"?"bg-warning":t.status==="BLACKLISTED"?"bg-error":"bg-slate-400"}`}),s(`cards.status.${t.status}`)]}),(()=>{const x=De(t,s);return x?e.jsx("div",{className:`mt-1 text-[10px] font-medium ${x.isExpired?"text-error":"text-primary-600 dark:text-primary-400"}`,children:x.text}):null})()]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:s("cards.balance")}),e.jsxs("p",{className:"text-2xl font-display font-bold text-slate-900 dark:text-slate-100",children:["Â¥",t.balance.toLocaleString()]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-dark-600",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[e.jsxs("span",{children:[s("cards.issued"),": ",t.issuedAt]}),e.jsxs("span",{children:[s("cards.expires"),": ",t.expiresAt]})]})}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[t.status==="ACTIVE"?e.jsxs("button",{onClick:x=>{x.stopPropagation(),C(t.id,"SUSPENDED")},disabled:v.isPending,className:"flex-1 py-2 text-xs font-medium text-warning bg-warning/10 hover:bg-warning/20 rounded-lg transition-colors flex items-center justify-center gap-1 disabled:opacity-50",children:[e.jsx(le,{className:"w-3 h-3"}),s("cards.suspend")]}):e.jsxs("button",{onClick:x=>{x.stopPropagation(),C(t.id,"ACTIVE")},disabled:v.isPending,className:"flex-1 py-2 text-xs font-medium text-success bg-success/10 hover:bg-success/20 rounded-lg transition-colors flex items-center justify-center gap-1 disabled:opacity-50",children:[e.jsx(Se,{className:"w-3 h-3"}),s("cards.activate")]}),e.jsxs("button",{onClick:x=>{x.stopPropagation(),C(t.id,"BLACKLISTED")},disabled:v.isPending,className:"flex-1 py-2 text-xs font-medium text-error bg-error/10 hover:bg-error/20 rounded-lg transition-colors flex items-center justify-center gap-1 disabled:opacity-50",children:[e.jsx(ce,{className:"w-3 h-3"}),s("cards.blacklist")]})]})]},t.id))}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"glass-panel overflow-x-auto -mx-4 sm:mx-0 hidden md:block",children:e.jsxs("table",{className:"w-full min-w-[700px] text-left",children:[e.jsx("thead",{className:"bg-slate-50/50 dark:bg-dark-900/50 text-xs uppercase text-slate-500 dark:text-slate-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 sm:px-6 py-3 sm:py-4 font-medium",children:s("cards.cardNumber")}),e.jsx("th",{className:"px-4 sm:px-6 py-3 sm:py-4 font-medium",children:s("cards.type")}),e.jsx("th",{className:"px-4 sm:px-6 py-3 sm:py-4 font-medium",children:s("common.status")}),e.jsx("th",{className:"px-4 sm:px-6 py-3 sm:py-4 font-medium text-right",children:s("cards.balance")}),e.jsx("th",{className:"px-4 sm:px-6 py-3 sm:py-4 font-medium hidden sm:table-cell",children:s("cards.issued")}),e.jsx("th",{className:"px-4 sm:px-6 py-3 sm:py-4 font-medium hidden lg:table-cell",children:s("cards.lastUsed")}),e.jsx("th",{className:"px-4 sm:px-6 py-3 sm:py-4 font-medium"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-dark-600",children:Y.map(t=>e.jsxs(b.tr,{layout:!0,onClick:()=>c(t),animate:{backgroundColor:t.id===E?["rgba(6,182,212,0.05)","rgba(6,182,212,0.15)","rgba(6,182,212,0.05)"]:"rgba(0,0,0,0)"},transition:t.id===E?{duration:2,repeat:1/0}:{duration:.2},className:`group hover:bg-slate-50 dark:hover:bg-dark-900/50 cursor-pointer transition-colors ${t.id===E?"ring-1 ring-inset ring-primary-500/30":""}`,children:[e.jsx("td",{className:"px-4 sm:px-6 py-3 sm:py-4 font-mono text-sm text-slate-900 dark:text-slate-200",children:e.jsxs("div",{className:"flex items-center gap-2",children:[t.number,t.id===E&&e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[8px] font-bold bg-primary-500 text-white uppercase tracking-tighter",children:"New"})]})}),e.jsx("td",{className:"px-4 sm:px-6 py-3 sm:py-4",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 dark:bg-dark-700 text-slate-600 dark:text-slate-300",children:s(`cards.types.${t.type}`)})}),e.jsxs("td",{className:"px-4 sm:px-6 py-3 sm:py-4",children:[e.jsxs("span",{className:`inline-flex items-center px-2 py-1 sm:px-2.5 rounded-full text-xs font-semibold border ${ae(t.status)}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full mr-1 sm:mr-1.5 ${t.status==="ACTIVE"?"bg-success":t.status==="SUSPENDED"?"bg-warning":t.status==="BLACKLISTED"?"bg-error":"bg-slate-400"}`}),s(`cards.status.${t.status}`)]}),(()=>{const d=De(t,s);return d?e.jsx("div",{className:`mt-1 text-[10px] font-medium ${d.isExpired?"text-error":"text-primary-600 dark:text-primary-400"}`,children:d.text}):null})()]}),e.jsxs("td",{className:"px-4 sm:px-6 py-3 sm:py-4 text-right font-mono text-sm text-slate-900 dark:text-slate-200",children:["Â¥",t.balance.toLocaleString()]}),e.jsx("td",{className:"px-4 sm:px-6 py-3 sm:py-4 text-slate-500 dark:text-slate-400 text-xs sm:text-sm hidden sm:table-cell",children:t.issuedAt}),e.jsx("td",{className:"px-4 sm:px-6 py-3 sm:py-4 text-slate-500 dark:text-slate-400 text-xs sm:text-sm hidden lg:table-cell",children:t.lastUsed}),e.jsx("td",{className:"px-4 sm:px-6 py-3 sm:py-4",children:e.jsx("div",{className:"flex gap-1 justify-end",onClick:d=>d.stopPropagation(),children:e.jsx(Te,{card:t,onView:()=>c(t),onTopUp:()=>{c(t),k(!0)},onSuspend:()=>C(t.id,"SUSPENDED"),onActivate:()=>C(t.id,"ACTIVE"),onBlacklist:()=>C(t.id,"BLACKLISTED"),onReplace:()=>c(t),disabled:v.isPending})})})]},t.id))})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:hidden pb-24",children:Y.map(t=>e.jsxs("div",{onClick:()=>c(t),className:"glass-panel p-5 active:scale-[0.98] transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2 relative",children:[e.jsxs("span",{className:"font-mono text-xl font-bold tracking-wider text-slate-900 dark:text-slate-100",children:[t.number.substring(0,4)," ",t.number.substring(4,8)," **** ",t.number.substring(t.number.length-4)]}),e.jsx("button",{onClick:d=>{d.stopPropagation(),navigator.clipboard.writeText(t.number)},className:"min-h-[44px] min-w-[44px] flex items-center justify-center text-slate-400 hover:text-primary-500 bg-slate-100 dark:bg-dark-800 rounded-md active:scale-90 transition-all touch-manipulation",title:"å¤åˆ¶å¡å·","aria-label":"å¤åˆ¶å¡å·",children:e.jsx(hs,{className:"w-4 h-4"})})]})}),e.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border ${ae(t.status)}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full mr-1.5 ${t.status==="ACTIVE"?"bg-success":t.status==="SUSPENDED"?"bg-warning":t.status==="BLACKLISTED"?"bg-error":"bg-slate-400"}`}),s(`cards.status.${t.status}`)]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:s("cards.type")}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md text-xs font-semibold bg-slate-100 dark:bg-dark-800 text-slate-700 dark:text-slate-300",children:s(`cards.types.${t.type}`)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:s("cards.balance")}),e.jsxs("p",{className:"text-2xl font-display font-bold text-primary-600 dark:text-primary-400",children:["Â¥",t.balance.toLocaleString()]})]})]})]},t.id))})]}),A&&$.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[100] flex items-center justify-center p-2 sm:p-4",onClick:t=>{t.target===t.currentTarget&&n(!1)},children:e.jsxs(b.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"glass-panel w-full max-w-2xl max-h-[90vh] overflow-y-auto p-4 sm:p-6 bg-white dark:bg-dark-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-display font-bold text-slate-900 dark:text-slate-100",children:s("cards.issueNewCard")}),e.jsx("button",{onClick:()=>n(!1),className:"min-h-[44px] min-w-[44px] flex items-center justify-center text-slate-400 hover:text-slate-500 dark:hover:text-slate-300 transition-colors touch-manipulation","aria-label":s("common.close"),children:e.jsx(R,{className:"w-5 h-5"})})]}),S&&e.jsxs("div",{className:"mb-4 p-3 bg-error/10 border border-error/20 rounded-lg flex items-center gap-2 text-error text-sm",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:S})]}),e.jsxs("form",{onSubmit:Fe(Ke),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:["STANDARD","STUDENT","SENIOR","TOURIST_1D","TOURIST_3D","TOURIST_7D","PERIOD"].map(t=>e.jsxs("label",{className:`relative flex items-center p-3 sm:p-4 border rounded-xl cursor-pointer transition-all hover:bg-slate-50 dark:hover:bg-dark-900 ${re.shape.type.parse(t)===re.shape.type.parse(t),""} border-slate-200 dark:border-dark-700 has-[:checked]:border-primary-500 has-[:checked]:bg-primary-500/5 has-[:checked]:ring-1 has-[:checked]:ring-primary-500`,children:[e.jsx("input",{type:"radio",...K("type"),value:t,className:"sr-only"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 gap-2",children:[e.jsx("span",{className:"font-bold text-sm text-slate-900 dark:text-slate-100 truncate",children:s(`cards.types.${t}`)}),e.jsx("span",{className:"text-sm font-mono font-bold text-primary-600 flex-shrink-0",children:s(`cards.prices.${t}`)})]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 line-clamp-2",children:s(`cards.perks.${t}`)})]}),e.jsx("div",{className:"ml-3 w-5 h-5 rounded-full border-2 border-slate-300 dark:border-dark-600 flex items-center justify-center peer-checked:border-primary-500",children:e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-primary-500 scale-0 transition-transform has-[:checked]:scale-100"})})]},t))}),U.type&&e.jsx("p",{className:"mt-1 text-sm text-error",children:U.type.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:[s("cards.initialBalance")," (Â¥)"]}),e.jsx("input",{type:"number",...K("initialBalance",{valueAsNumber:!0}),className:"input-field",placeholder:"0"}),U.initialBalance&&e.jsx("p",{className:"mt-1 text-sm text-error",children:U.initialBalance.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:[s("cards.validityPeriod")," (",s("common.years"),")"]}),e.jsx("input",{type:"number",...K("validityYears",{valueAsNumber:!0}),className:"input-field"}),U.validityYears&&e.jsx("p",{className:"mt-1 text-sm text-error",children:U.validityYears.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("cards.notes")}),e.jsx("textarea",{...K("notes"),className:"input-field h-24 resize-none",placeholder:s("cards.notesPlaceholder")})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"flex-1 btn-secondary py-3 sm:py-2",children:s("common.cancel")}),e.jsxs("button",{type:"submit",disabled:ge||ee.isPending,className:"flex-1 btn-primary flex items-center justify-center gap-2 disabled:opacity-50 py-3 sm:py-2",children:[(ge||ee.isPending)&&e.jsx(I,{className:"w-4 h-4 animate-spin"}),s("cards.issueCard")]})]})]})]})}),document.body),a&&$.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[100] flex justify-end",onClick:()=>c(null),children:e.jsx(b.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"w-full max-w-2xl bg-white dark:bg-dark-800 h-full border-l border-slate-200 dark:border-dark-600 shadow-2xl overflow-y-auto",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 sm:mb-8",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-display font-bold text-slate-900 dark:text-slate-100",children:s("cards.details")}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-mono mt-1 text-sm truncate",children:a.number})]}),e.jsx("button",{onClick:()=>c(null),className:"p-2 hover:bg-slate-100 dark:hover:bg-dark-700 rounded-lg transition-colors text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 flex-shrink-0",children:e.jsx(R,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mb-6 sm:mb-8 overflow-hidden rounded-2xl bg-gradient-to-br from-slate-900 to-slate-800 p-4 sm:p-6 text-white shadow-xl relative preserve-3d",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:e.jsx(ie,{className:"w-16 h-16 sm:w-24 sm:h-24"})}),e.jsxs("div",{className:"flex flex-col h-full justify-between",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-6 sm:w-10 sm:h-7 bg-amber-400 rounded-md opacity-80"}),e.jsx(us,{className:"w-4 h-4 sm:w-5 sm:h-5 rotate-90"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[8px] sm:text-[10px] uppercase tracking-widest opacity-60",children:"Transit Card"}),e.jsx("p",{className:"text-xs sm:text-sm font-bold tracking-wider",children:s(`cards.types.${a.type}`)})]})]}),e.jsx("div",{className:"mt-6 sm:mt-8",children:e.jsx("p",{className:"text-base sm:text-xl font-mono tracking-[0.2em] sm:tracking-[0.3em] font-medium drop-shadow-md",children:a.number.replace(/(.{4})/g,"$1 ")})}),e.jsxs("div",{className:"mt-4 sm:mt-6 flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[6px] sm:text-[8px] uppercase tracking-widest opacity-50 mb-1",children:"Card Holder"}),e.jsx("p",{className:"text-[10px] sm:text-xs font-medium uppercase",children:"DE CARD GUEST"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[6px] sm:text-[8px] uppercase tracking-widest opacity-50 mb-1",children:"Expires End"}),e.jsx("p",{className:"text-[10px] sm:text-xs font-mono",children:a.expiresAt.split(" ")[0]})]})]})]})]}),a.membershipLevel&&e.jsxs("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 rounded-xl bg-gradient-to-r from-primary-500/10 to-transparent border border-primary-500/20 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-white dark:bg-dark-700 shadow-sm",children:e.jsx("span",{className:"text-lg sm:text-xl",children:a.membershipLevel==="GOLD"?"ðŸ¥‡":a.membershipLevel==="SILVER"?"ðŸ¥ˆ":"ðŸ¥‰"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] sm:text-xs text-primary-600 dark:text-primary-400 font-medium uppercase tracking-wider",children:s("cards.membership.level")}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-slate-900 dark:text-slate-100",children:a.membershipLevel})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] sm:text-xs text-slate-500 dark:text-slate-400",children:s("cards.membership.ecoPoints")}),e.jsx("p",{className:"text-base sm:text-lg font-mono font-bold text-primary-600 dark:text-primary-400",children:(je=a.ecoPoints)==null?void 0:je.toLocaleString()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[e.jsxs("div",{className:"p-3 sm:p-4 bg-slate-50/50 dark:bg-dark-900/50 rounded-xl border border-slate-200 dark:border-dark-700",children:[e.jsx("p",{className:"text-xs sm:text-sm text-slate-500 mb-1",children:s("cards.balance")}),e.jsxs("p",{className:"text-xl sm:text-2xl font-display font-bold text-slate-900 dark:text-slate-100",children:["Â¥",a.balance.toLocaleString()]})]}),e.jsxs("div",{className:"p-3 sm:p-4 bg-slate-50/50 dark:bg-dark-900/50 rounded-xl border border-slate-200 dark:border-dark-700",children:[e.jsx("p",{className:"text-xs sm:text-sm text-slate-500 mb-1",children:s("common.status")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${a.status==="ACTIVE"?"bg-success":a.status==="SUSPENDED"?"bg-warning":"bg-error"}`}),e.jsx("span",{className:"text-base sm:text-lg font-medium text-slate-900 dark:text-slate-200",children:s(`cards.status.${a.status}`)})]})]})]}),e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("div",{className:"relative flex gap-1 p-1 bg-slate-100 dark:bg-dark-900 rounded-xl mb-4",children:[e.jsx(b.div,{layoutId:"detailTab",className:"absolute inset-y-1 w-[calc(50%-2px)] bg-white dark:bg-dark-700 rounded-lg shadow-sm",initial:!1,animate:{x:F?"calc(100% + 4px)":"4px"},transition:{type:"spring",stiffness:400,damping:30}}),e.jsxs("button",{onClick:()=>oe(!1),className:`relative flex-1 flex items-center justify-center gap-2 py-2 sm:py-2.5 rounded-lg text-sm font-medium transition-colors z-10 ${F?"text-slate-500 hover:text-slate-700":"text-primary-600 dark:text-primary-400"}`,children:[e.jsx(Ae,{className:"w-4 h-4"})," ",e.jsx("span",{className:"hidden sm:inline",children:"QR Token"}),e.jsx("span",{className:"sm:hidden",children:"QR"})]}),e.jsxs("button",{onClick:()=>oe(!0),className:`relative flex-1 flex items-center justify-center gap-2 py-2 sm:py-2.5 rounded-lg text-sm font-medium transition-colors z-10 ${F?"text-primary-600 dark:text-primary-400":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(bs,{className:"w-4 h-4"})," ",e.jsx("span",{className:"hidden sm:inline",children:"Chip Data"}),e.jsx("span",{className:"sm:hidden",children:"Chip"})]})]}),e.jsx(Q,{mode:"wait",children:F?e.jsxs(b.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"p-4 sm:p-6 bg-slate-900 border border-slate-700 rounded-2xl text-success font-mono text-xs overflow-hidden h-48 sm:h-56",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-success/60 border-b border-success/20 pb-2",children:[e.jsx(we,{className:"w-4 h-4"})," NFC Chip Data (AES-256 Mocked)"]}),e.jsxs("div",{className:"space-y-1 opacity-80 overflow-y-auto",children:[e.jsx("p",{children:"0000: 44 45 20 43 41 52 44 20 4e 46 43 20 54 4f 4b 45"}),e.jsx("p",{children:"0010: 4e 20 56 32 2e 30 20 53 45 43 55 52 45 20 44 41"}),e.jsx("p",{children:"0020: 54 41 20 53 54 52 45 41 4d 20 58 58 58 58 58 58"}),e.jsx("p",{children:"0030: 4c 4f 43 4b 45 44 20 53 45 43 54 4f 52 20 30 37"}),e.jsxs("p",{className:"animate-pulse",children:[">"," DECRYPTING KEYS..."]}),e.jsxs("p",{className:"text-amber-500",children:[">"," [WARN] ACCESSING PROTECTED MEMORY"]}),e.jsxs("p",{children:["0040: ",Math.random().toString(16).substring(2,10).toUpperCase()," 00 00 FF ",Math.random().toString(16).substring(2,10).toUpperCase()]})]})]},"chip"):e.jsxs(b.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"flex flex-col items-center p-4 sm:p-6 bg-white dark:bg-dark-800 rounded-2xl border border-slate-200 dark:border-dark-700",children:[e.jsx("div",{className:"p-3 sm:p-4 bg-white rounded-xl shadow-inner border-2 border-slate-100",children:e.jsxs("div",{className:"w-32 h-32 sm:w-40 sm:h-40 bg-slate-100 flex items-center justify-center relative rounded-md overflow-hidden",children:[e.jsx(Ae,{className:"w-24 h-24 sm:w-32 sm:h-32 text-slate-800"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-white/10 to-transparent"}),e.jsx(b.div,{animate:{y:[0,128,0]},transition:{duration:3,repeat:1/0,ease:"linear"},className:"absolute top-0 left-0 w-full h-1 bg-primary-500 shadow-[0_0_15px_rgba(6,182,212,0.8)]"})]})}),e.jsx("p",{className:"mt-4 text-[10px] font-mono text-slate-400 uppercase tracking-widest",children:"Dynamic Token Refreshed"}),e.jsx("p",{className:"text-xs font-mono text-primary-600 font-bold mt-1 truncate max-w-full",children:Me})]},"qr")})]}),a.carbonReduced&&e.jsxs("div",{className:"mb-6 sm:mb-8 p-3 sm:p-4 bg-success/5 border border-success/20 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-success/10 flex items-center justify-center text-success flex-shrink-0",children:e.jsx(M,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] sm:text-xs text-success-600 font-medium",children:s("cards.membership.carbonReduced")}),e.jsxs("p",{className:"text-base sm:text-lg font-bold text-slate-900 dark:text-slate-100",children:[a.carbonReduced," kg"]})]})]}),e.jsx("div",{className:"text-success text-xs sm:text-sm font-medium",children:"+1.2kg this month"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3 mb-6 sm:mb-8",children:[a.status==="ACTIVE"&&e.jsxs("button",{onClick:()=>k(!0),className:"btn-primary flex items-center gap-2 text-sm py-2.5 sm:py-2",children:[e.jsx(ne,{className:"w-4 h-4"}),s("cards.topUp")]}),a.status==="EXPIRED"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{},className:"btn-primary flex items-center gap-2 text-sm py-2.5 sm:py-2",children:[e.jsx(M,{className:"w-4 h-4"}),s("cards.actions.renew")]}),e.jsxs("button",{onClick:()=>{},className:"btn-secondary flex items-center gap-2 text-sm py-2.5 sm:py-2",children:[e.jsx(G,{className:"w-4 h-4"}),s("cards.actions.replace")]})]}),a.status==="ACTIVE"&&e.jsxs("button",{onClick:async()=>{await V({type:"warning",title:s("cards.suspend"),message:s("cards.actions.suspendConfirm"),details:[{label:s("cards.cardNumber"),value:a.number},{label:s("cards.balance"),value:`Â¥${a.balance.toFixed(2)}`}]})&&C(a.id,"SUSPENDED")},disabled:v.isPending,className:"btn-secondary flex items-center gap-2 text-sm py-2.5 sm:py-2",children:[v.isPending?e.jsx(I,{className:"w-4 h-4 animate-spin"}):e.jsx(le,{className:"w-4 h-4"}),s("cards.suspend")]}),a.status==="SUSPENDED"&&e.jsxs("button",{onClick:async()=>{await V({type:"info",title:s("cards.activate"),message:s("cards.actions.activateConfirm"),details:[{label:s("cards.cardNumber"),value:a.number}]})&&C(a.id,"ACTIVE")},disabled:v.isPending,className:"btn-secondary flex items-center gap-2 text-sm py-2.5 sm:py-2",children:[v.isPending?e.jsx(I,{className:"w-4 h-4 animate-spin"}):e.jsx(Se,{className:"w-4 h-4"}),s("cards.activate")]}),a.status!=="BLACKLISTED"&&e.jsxs("button",{onClick:async()=>{await V({type:"danger",title:s("cards.blacklist"),message:s("cards.actions.blacklistConfirm"),details:[{label:s("cards.cardNumber"),value:a.number},{label:s("cards.balance"),value:`Â¥${a.balance.toFixed(2)}`}],riskWarning:s("cards.actions.blacklistWarning"),countdown:3})&&C(a.id,"BLACKLISTED")},disabled:v.isPending,className:"btn-secondary flex items-center gap-2 text-sm text-error border-error/30 hover:bg-error/10 py-2.5 sm:py-2",children:[v.isPending?e.jsx(I,{className:"w-4 h-4 animate-spin"}):e.jsx(ce,{className:"w-4 h-4"}),s("cards.blacklist")]})]}),e.jsxs("div",{className:"mb-6 sm:mb-8 p-3 sm:p-4 bg-slate-50 dark:bg-dark-900/50 rounded-xl border border-dashed border-slate-300 dark:border-dark-700",children:[e.jsxs("h4",{className:"text-xs sm:text-sm font-bold text-slate-700 dark:text-slate-300 mb-2 flex items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4 text-primary-500"}),s("cards.lifecycle.title")]}),e.jsxs("div",{className:"text-[10px] sm:text-xs text-slate-500 space-y-1",children:[e.jsxs("p",{children:["â€¢ ",s("cards.issued"),": ",a.issuedAt," (",s("cards.lifecycle.issued"),")"]}),a.status==="SUSPENDED"&&e.jsxs("p",{className:"text-warning",children:["â€¢ ",s("cards.lifecycle.suspended")]}),a.status==="BLACKLISTED"&&e.jsxs("p",{className:"text-error",children:["â€¢ ",s("cards.lifecycle.blacklisted")]}),a.status==="EXPIRED"&&e.jsxs("p",{className:"text-error",children:["â€¢ ",s("cards.lifecycle.expired")]}),e.jsxs("p",{children:["â€¢ ",s("cards.lastUsed"),": ",a.lastUsed]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-slate-900 dark:text-slate-200 mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(ms,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-600 dark:text-primary-400"}),s("cards.history")]}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:fe.length===0?e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-8",children:s("cards.noTransactions")}):fe.map(t=>e.jsxs("div",{className:"p-3 sm:p-4 bg-slate-50/30 dark:bg-dark-900/30 rounded-xl border border-slate-200 dark:border-dark-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 min-w-0 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg flex-shrink-0 ${t.type==="CREDIT"?"bg-success/10 text-success":"bg-primary-500/10 text-primary-600 dark:text-primary-400"}`,children:t.type==="CREDIT"?e.jsx(ne,{className:"w-4 h-4 sm:w-5 sm:h-5"}):e.jsx(ss,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium text-sm text-slate-900 dark:text-slate-200",children:t.type==="CREDIT"?s("cards.topUp"):s("cards.payment")}),e.jsxs("p",{className:"text-[10px] sm:text-xs text-slate-500 truncate",children:[t.terminal," â€¢ ",t.timestamp]})]})]}),e.jsxs("span",{className:`font-mono font-medium text-sm flex-shrink-0 ${t.type==="CREDIT"?"text-success":"text-slate-900 dark:text-slate-200"}`,children:[t.type==="CREDIT"?"+":"-","Â¥",t.amount.toLocaleString()]})]},t.id))})]})]})})}),document.body),h&&a&&$.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[110] flex items-center justify-center p-2 sm:p-4",onClick:t=>{t.target===t.currentTarget&&(k(!1),f(0))},children:e.jsxs(b.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"glass-panel w-full max-w-md max-h-[90vh] overflow-y-auto p-4 sm:p-6 bg-white dark:bg-dark-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-display font-bold text-slate-900 dark:text-slate-100",children:s("cards.topUpTitle")}),e.jsx("button",{onClick:()=>{k(!1),f(0)},className:"p-1 text-slate-400 hover:text-slate-500 dark:hover:text-slate-300 transition-colors",children:e.jsx(R,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 sm:p-4 bg-slate-50 dark:bg-dark-900 rounded-xl",children:[e.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400",children:s("cards.cardNumber")}),e.jsx("p",{className:"font-mono font-medium text-sm text-slate-900 dark:text-slate-200 truncate",children:a.number})]}),e.jsxs("div",{className:"p-3 sm:p-4 bg-slate-50 dark:bg-dark-900 rounded-xl",children:[e.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400",children:s("cards.currentBalance")}),e.jsxs("p",{className:"text-lg sm:text-xl font-bold text-slate-900 dark:text-slate-200",children:["Â¥",a.balance.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("cards.topUpAmount")}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mb-3",children:[50,100,200,500].map(t=>e.jsxs("button",{onClick:()=>f(t),className:`py-2 text-xs sm:text-sm font-medium rounded-lg border transition-all ${r===t?"bg-primary-500/10 border-primary-500 text-primary-600":"border-slate-200 dark:border-dark-600 text-slate-600 dark:text-slate-400 hover:border-primary-500/50"}`,children:["Â¥",t]},t))}),e.jsx("input",{type:"number",min:"1",max:"1000",value:r||"",onChange:t=>f(Number(t.target.value)),placeholder:"Custom Amount (1 - 1000)",className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 bg-slate-50 dark:bg-dark-900 border border-slate-200 dark:border-dark-600 rounded-lg text-sm text-slate-900 dark:text-slate-200 focus:outline-none focus:border-primary-500/50"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:s("cards.topUpHint")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("cards.paymentMethods.ALIPAY_INSTALLMENT")}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsx("button",{onClick:()=>_("ALIPAY"),className:`p-2 sm:p-3 rounded-xl border flex items-center justify-between transition-all ${T==="ALIPAY"?"border-primary-500 bg-primary-500/5 ring-1 ring-primary-500":"border-slate-200 dark:border-dark-600"}`,children:e.jsxs("span",{className:"flex items-center gap-2 text-xs sm:text-sm font-medium",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:"ðŸŸ¡"})," ",e.jsx("span",{className:"hidden sm:inline",children:s("cards.paymentMethods.ALIPAY")}),e.jsx("span",{className:"sm:hidden",children:s("cards.paymentMethods.ALIPAY_SHORT")})]})}),e.jsx("button",{onClick:()=>_("WECHAT"),className:`p-2 sm:p-3 rounded-xl border flex items-center justify-between transition-all ${T==="WECHAT"?"border-primary-500 bg-primary-500/5 ring-1 ring-primary-500":"border-slate-200 dark:border-dark-600"}`,children:e.jsxs("span",{className:"flex items-center gap-2 text-xs sm:text-sm font-medium",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:"ðŸŸ¢"})," ",e.jsx("span",{className:"hidden sm:inline",children:s("cards.paymentMethods.WECHAT")}),e.jsx("span",{className:"sm:hidden",children:s("cards.paymentMethods.WECHAT_SHORT")})]})}),e.jsx("button",{onClick:()=>_("DIGITAL_RMB"),className:`p-2 sm:p-3 rounded-xl border flex items-center justify-between transition-all ${T==="DIGITAL_RMB"?"border-primary-500 bg-primary-500/5 ring-1 ring-primary-500":"border-slate-200 dark:border-dark-600"}`,children:e.jsxs("span",{className:"flex items-center gap-2 text-xs sm:text-sm font-medium",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:"ðŸ“±"})," ",e.jsx("span",{className:"hidden sm:inline",children:s("cards.paymentMethods.DIGITAL_RMB")}),e.jsx("span",{className:"sm:hidden",children:s("cards.paymentMethods.DIGITAL_RMB_SHORT")})]})}),e.jsx("button",{onClick:()=>_("BANK_CARD"),className:`p-2 sm:p-3 rounded-xl border flex items-center justify-between transition-all ${T==="BANK_CARD"?"border-primary-500 bg-primary-500/5 ring-1 ring-primary-500":"border-slate-200 dark:border-dark-600"}`,children:e.jsxs("span",{className:"flex items-center gap-2 text-xs sm:text-sm font-medium",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:"ðŸ¦"})," ",e.jsx("span",{className:"hidden sm:inline",children:s("cards.paymentMethods.BANK_CARD")}),e.jsx("span",{className:"sm:hidden",children:s("cards.paymentMethods.BANK_CARD_SHORT")})]})})]})]}),T==="DIGITAL_RMB"&&e.jsxs("div",{className:"p-4 bg-primary-500/5 border border-primary-500/20 rounded-xl flex items-start gap-3 animate-in fade-in slide-in-from-top-2",children:[e.jsx(gs,{className:"w-5 h-5 text-primary-600 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-primary-600 uppercase tracking-tighter",children:"Digital RMB (DC/EP)"}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-1 leading-relaxed",children:"Dual-offline payment enabled. You can complete this transaction without internet connection. Wallet balance will sync on next sync."})]})]}),T==="ALIPAY"&&r>=100&&e.jsxs("div",{className:"p-3 sm:p-4 bg-slate-50 dark:bg-dark-900 rounded-xl border border-slate-200 dark:border-dark-700 animate-in fade-in slide-in-from-top-2",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:s("cards.paymentMethods.ALIPAY_INSTALLMENT")}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["3","6","12"].map(t=>e.jsxs("button",{className:"py-2 px-1 text-xs border border-primary-500/30 text-primary-600 rounded flex flex-col items-center hover:bg-primary-50",children:[e.jsx("span",{className:"font-bold",children:s(`cards.installments.${t}months`)}),e.jsxs("span",{className:"scale-75 text-[10px] text-slate-500",children:["Â¥",(r/Number(t)).toFixed(1),"/m"]})]},t))})]}),S&&e.jsx("div",{className:"p-3 bg-error/10 border border-error/20 rounded-lg text-error text-sm",children:S}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:()=>{k(!1),f(0),y(null)},className:"flex-1 btn-secondary py-3 sm:py-2",children:s("common.cancel")}),e.jsxs("button",{onClick:He,disabled:!r||r<=0||se.isPending,className:"flex-1 btn-primary flex items-center justify-center gap-2 disabled:opacity-50 py-3 sm:py-2",children:[se.isPending&&e.jsx(I,{className:"w-4 h-4 animate-spin"}),s("common.confirm")]})]})]})]})}),document.body),Re&&$.createPortal(e.jsx("div",{className:"fixed top-20 sm:top-24 right-2 sm:right-4 z-[200] max-w-[calc(100%-1rem)] sm:max-w-sm w-full animate-in slide-in-from-right duration-500",children:e.jsxs("div",{className:"glass-panel p-3 sm:p-4 bg-success/10 border-success/20 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-2 text-success opacity-20",children:e.jsx(M,{className:"w-10 h-10 sm:w-12 sm:h-12"})}),e.jsxs("h4",{className:"text-base sm:text-lg font-bold text-success flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl sm:text-2xl",children:"ðŸŽ‰"}),s("cards.rewards.title")]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-success-800 dark:text-success-200",children:[e.jsx("span",{className:"text-base sm:text-lg",children:"ðŸŒ¿"}),s("cards.rewards.antForest")]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-success-800 dark:text-success-200",children:[e.jsx("span",{className:"text-base sm:text-lg",children:"ðŸ§§"}),s("cards.rewards.wechatCoupon")]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-success-800 dark:text-success-200 font-bold",children:[e.jsx(G,{className:"w-3 h-3"})," 20 ",s("cards.rewards.pointsEarned")]})]}),e.jsx("div",{className:"mt-3 bg-success/20 h-1.5 rounded-full overflow-hidden",children:e.jsx(b.div,{initial:{width:0},animate:{width:"100%"},transition:{duration:5},className:"bg-success h-full"})})]})}),document.body),Pe&&$.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[200] flex items-center justify-center p-2 sm:p-4",children:e.jsx(b.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"glass-panel w-full max-w-2xl min-h-[400px] sm:min-h-[500px] p-4 sm:p-8 bg-white dark:bg-dark-800 max-h-[90vh] overflow-y-auto",children:e.jsx(ys,{onClose:()=>J(!1),onSuccess:()=>{$e(!0),J(!1)}})})}),document.body),q&&$.createPortal(e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50 md:hidden transition-opacity",onClick:()=>P(!1),children:e.jsxs(b.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},className:"absolute right-0 top-0 bottom-0 w-4/5 max-w-sm bg-white dark:bg-dark-800 shadow-xl flex flex-col",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-dark-700 flex justify-between items-center bg-slate-50/80 dark:bg-dark-900/80 backdrop-blur-md",children:[e.jsx("h3",{className:"font-bold text-lg",children:s("common.filter")}),e.jsx("button",{onClick:()=>P(!1),className:"p-2 bg-slate-200/50 dark:bg-dark-700/50 rounded-full hover:bg-slate-300/50 dark:hover:bg-dark-600/50 active:scale-95 transition-all",children:e.jsx(R,{className:"w-5 h-5 text-slate-500"})})]}),e.jsxs("div",{className:"p-4 flex-1 overflow-y-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-500 mb-3",children:s("common.status")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Ie.map(t=>e.jsx("button",{onClick:()=>j(t),className:`px-3 py-2 rounded-lg text-sm border font-medium active:scale-95 transition-all ${i===t?"bg-primary-50 dark:bg-primary-900/20 border-primary-500 text-primary-600":"border-slate-200 dark:border-dark-600 bg-transparent text-slate-600 dark:text-slate-400"}`,children:s(t==="All Status"?"common.allStatus":`cards.status.${t}`)},t))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-500 mb-3",children:s("cards.lowBalance")}),e.jsxs("button",{onClick:()=>Z(!L),className:`w-full flex items-center justify-between px-4 py-3 rounded-xl border font-medium transition-all active:scale-[0.98] ${L?"bg-warning/10 border-warning text-warning":"border-slate-200 dark:border-dark-600 text-slate-600 dark:text-slate-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),e.jsx("span",{children:s("cards.lowBalanceShort")})]}),H>0&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-bold bg-warning text-white",children:H})]})]})]}),e.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-dark-700 flex gap-3 bg-slate-50/50 dark:bg-dark-900/50 backdrop-blur-md",children:[e.jsx("button",{onClick:()=>{j("All Status"),Z(!1)},className:"flex-1 py-3 bg-slate-200/50 dark:bg-dark-700/50 rounded-xl font-medium active:scale-95 transition-all",children:s("common.reset")}),e.jsx("button",{onClick:()=>P(!1),className:"flex-1 py-3 bg-primary-500 text-white rounded-xl font-medium shadow-lg shadow-primary-500/30 active:scale-95 transition-all",children:s("common.apply")})]})]})}),document.body),e.jsx("button",{onClick:()=>n(!0),className:"md:hidden fixed right-6 bottom-24 z-40 w-14 h-14 bg-primary-500 text-white rounded-full shadow-lg shadow-primary-500/40 flex items-center justify-center active:scale-90 transition-transform",children:e.jsx(G,{className:"w-6 h-6"})}),e.jsx(ts,{...Be})]})}export{Hs as default};
