import{c as I,a7 as z,a5 as P,I as U,j as e,m as u,_ as H,K as G,C as F}from"./index-BFkHSXE8.js";import{r}from"./vendor-xASHc04L.js";import{a as L}from"./useTransit-DIJAOJMY.js";import{u as W}from"./i18n-Skc9GWxP.js";import{R as O}from"./TransitManagement-Dp0HwK1q.js";import{T as Q}from"./trending-down-Bwm9_pPD.js";import{F as _}from"./filter-BXwfgd0z.js";import{M as J}from"./map-pin-B9O00res.js";import{s as K,f as w,a as X}from"./index-wC2mo2mS.js";import"./ui-BMjqw1mu.js";import"./charts-X6rqVOAO.js";import"./schemas-oLtz9YBc.js";import"./dollar-sign-B3e6VoTo.js";import"./calendar-CJpd3kPr.js";import"./wrench-1UGSiQkU.js";import"./plus-CIEzPpAK.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=I("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=I("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),C={morning:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-300",border:"border-blue-300 dark:border-blue-700"},peak:{bg:"bg-amber-100 dark:bg-amber-900/30",text:"text-amber-700 dark:text-amber-300",border:"border-amber-300 dark:border-amber-700"},testing:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-700 dark:text-purple-300",border:"border-purple-300 dark:border-purple-700"},maintenance:{bg:"bg-slate-100 dark:bg-slate-700",text:"text-slate-600 dark:text-slate-300",border:"border-slate-300 dark:border-slate-600"}},p=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"],Z=S=>({drivers:[{id:"d1",name:"John Doe",busId:"Bus #101-A",busType:"Volvo B11"},{id:"d2",name:"Sarah Smith",busId:"Bus #101-B",busType:"EV City"},{id:"d3",name:"Michael Chen",busId:"Bus #101-C",busType:"Volvo B11"},{id:"d4",name:"Elena Rodriguez",busId:"Bus #101-D",busType:"Scania Metro"},{id:"d5",name:"David Wilson",busId:"Bus #101-E",busType:"EV City"}],shifts:[{id:"s1",driverId:"d1",type:"morning",label:"Morning Shift",start:6,duration:3,color:"morning"},{id:"s2",driverId:"d1",type:"testing",label:"Route Testing",start:10,duration:2,color:"testing"},{id:"s3",driverId:"d2",type:"peak",label:"Peak Hour Support",start:7,duration:4,color:"peak"},{id:"s4",driverId:"d4",type:"maintenance",label:"Scheduled Maintenance",start:8,duration:3,color:"maintenance"},{id:"s5",driverId:"d5",type:"morning",label:"Full Morning Run",start:6,duration:5,color:"morning"}]});function ve({onEditRoute:S,onDeleteRoute:M,onOptimizeRoute:T}){const{t:l}=W(),{data:b}=L(),$=(b==null?void 0:b.data)||[],h=z(),[n,V]=r.useState(null),[g,y]=r.useState(new Date),[f,j]=r.useState("hourly"),[ee,te]=r.useState(""),[se,N]=r.useState(null),E=r.useMemo(()=>[{id:"r101",code:"101",name:"Downtown - Airport",terminal:"Grand Central Terminal",activeVehicles:8,status:"ACTIVE",progress:75},{id:"r202",code:"202",name:"Suburban - Tech Park",terminal:"West End Plaza",activeVehicles:5,status:"ACTIVE",progress:60},{id:"r305",code:"305",name:"North Station - Marina",terminal:"Harbor Pier 12",activeVehicles:3,status:"ACTIVE",progress:45},{id:"r410",code:"410",name:"East Loop Circular",terminal:"Shopping District",activeVehicles:0,status:"INACTIVE",progress:0}],[]),d=h?E:$.map(t=>{var s,o;return{id:t.id,code:t.code,name:t.name,terminal:((o=(s=t.stations)==null?void 0:s[0])==null?void 0:o.name)||"-",activeVehicles:Math.floor(Math.random()*10),status:t.status,progress:Math.floor(Math.random()*100)}}),i=r.useMemo(()=>{var s;return n||((s=d[0])==null?void 0:s.id)?Z():null},[n,d]),k=r.useMemo(()=>{const t=[];for(let s=6;s<=23;s++)t.push(`${s.toString().padStart(2,"0")}:00`);return t},[]),c=r.useMemo(()=>{const t=new Date,s=t.getHours(),o=t.getMinutes();return s<6||s>23?null:(s-6+o/60)/18*100},[]),D=r.useMemo(()=>[{label:l("transit.activeRoutes"),value:d.filter(t=>t.status==="ACTIVE").length||42,trend:"+2%",trendUp:!0,icon:O,color:"primary"},{label:l("transit.driversOnDuty"),value:h?128:(i==null?void 0:i.drivers.length)||0,trend:"-1%",trendUp:!1,icon:P,color:"info"},{label:l("transit.operationalEfficiency"),value:"94%",trend:"+0.5%",trendUp:!0,icon:q,color:"success"},{label:l("transit.activeBuses"),value:d.reduce((t,s)=>t+s.activeVehicles,0)||312,trend:"+4%",trendUp:!0,icon:U,color:"warning"}],[l,d,i,h]),R=r.useCallback(t=>{N(t)},[]),B=r.useCallback(()=>{N(null)},[]),v=d.find(t=>t.id===n)||d[0];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:D.map((t,s)=>e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-slate-200 dark:border-dark-600 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t.label}),e.jsxs("div",{className:"flex items-baseline gap-2 mt-2",children:[e.jsx("span",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:t.value}),e.jsxs("span",{className:`text-sm font-medium flex items-center gap-0.5 ${t.trendUp?"text-success":"text-error"}`,children:[t.trendUp?e.jsx(H,{className:"w-3 h-3"}):e.jsx(Q,{className:"w-3 h-3"}),t.trend]})]})]}),e.jsx("div",{className:`p-2.5 rounded-xl bg-${t.color}-100 dark:bg-${t.color}-900/20`,children:e.jsx(t.icon,{className:`w-5 h-5 text-${t.color}-600 dark:text-${t.color}-400`})})]})},t.label))}),e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsxs("div",{className:"col-span-12 lg:col-span-4 xl:col-span-3 space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[l("transit.activeRoutes"),e.jsx(_,{className:"w-4 h-4 text-slate-400"})]})}),e.jsx("div",{className:"space-y-3",children:d.map((t,s)=>{var o;return e.jsxs(u.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:s*.05},onClick:()=>V(t.id),className:`p-4 rounded-xl border cursor-pointer transition-all ${(n||((o=d[0])==null?void 0:o.id))===t.id?"border-primary-500 bg-primary-50 dark:bg-primary-900/20 shadow-md":"border-slate-200 dark:border-dark-600 bg-white dark:bg-dark-800 hover:border-slate-300 dark:hover:border-dark-500"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"px-3 py-1.5 rounded-lg text-white font-bold text-sm",style:{backgroundColor:p[s%p.length]},children:t.code}),e.jsxs("div",{className:`flex items-center gap-1.5 text-xs font-medium ${t.status==="ACTIVE"?"text-success":"text-slate-400"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${t.status==="ACTIVE"?"bg-success animate-pulse":"bg-slate-400"}`}),t.activeVehicles," ",t.status]})]}),e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-1",children:t.name}),e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-slate-500 dark:text-slate-400 mb-3",children:[e.jsx(J,{className:"w-3.5 h-3.5"}),t.terminal]}),e.jsx("div",{className:"h-1.5 bg-slate-200 dark:bg-dark-600 rounded-full overflow-hidden",children:e.jsx(u.div,{initial:{width:0},animate:{width:`${t.progress}%`},transition:{duration:.8,delay:s*.1},className:"h-full rounded-full",style:{backgroundColor:p[s%p.length]}})})]},t.id)})})]}),e.jsx("div",{className:"col-span-12 lg:col-span-8 xl:col-span-9",children:e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-slate-200 dark:border-dark-600 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-dark-600 flex items-center justify-between",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[l("transit.scheduleTimeline"),": Route ",(v==null?void 0:v.code)||"101"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex bg-slate-100 dark:bg-dark-700 rounded-lg p-0.5",children:[e.jsx("button",{onClick:()=>j("hourly"),className:`px-3 py-1 text-sm rounded-md transition-colors ${f==="hourly"?"bg-white dark:bg-dark-600 text-slate-900 dark:text-slate-100 shadow-sm":"text-slate-500"}`,children:l("transit.hourly")}),e.jsx("button",{onClick:()=>j("daily"),className:`px-3 py-1 text-sm rounded-md transition-colors ${f==="daily"?"bg-white dark:bg-dark-600 text-slate-900 dark:text-slate-100 shadow-sm":"text-slate-500"}`,children:l("transit.daily")})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("button",{onClick:()=>y(K(g,1)),className:"p-1 hover:bg-slate-100 dark:hover:bg-dark-700 rounded",children:e.jsx(G,{className:"w-4 h-4"})}),e.jsxs("span",{className:"px-2 font-medium",children:["ðŸ“… ",w(g,"MMM dd, yyyy")]}),e.jsx("button",{onClick:()=>y(X(g,1)),className:"p-1 hover:bg-slate-100 dark:hover:bg-dark-700 rounded",children:e.jsx(F,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex border-b border-slate-200 dark:border-dark-600",children:[e.jsx("div",{className:"w-48 flex-shrink-0 p-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:l("transit.driverBusId")}),e.jsxs("div",{className:"flex-1 flex relative",children:[k.map((t,s)=>e.jsxs("div",{className:"flex-1 p-2 text-center text-xs text-slate-500 dark:text-slate-400 border-l border-slate-100 dark:border-dark-700",children:[t.split(":")[0],":00"]},t)),c!==null&&e.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-error z-10",style:{left:`${c}%`},children:e.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 px-1.5 py-0.5 bg-error text-white text-[10px] rounded font-medium",children:w(new Date,"HH:mm")})})]})]}),i==null?void 0:i.drivers.map((t,s)=>{const o=i.shifts.filter(a=>a.driverId===t.id);return e.jsxs("div",{className:"flex border-b border-slate-100 dark:border-dark-700 hover:bg-slate-50 dark:hover:bg-dark-700/50",children:[e.jsxs("div",{className:"w-48 flex-shrink-0 p-3",children:[e.jsx("div",{className:"font-medium text-sm text-slate-900 dark:text-slate-100",children:t.name}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[t.busId," (",t.busType,")"]})]}),e.jsxs("div",{className:"flex-1 relative h-16 bg-slate-50 dark:bg-dark-700/30",children:[k.map((a,m)=>e.jsx("div",{className:"absolute top-0 bottom-0 border-l border-slate-100 dark:border-dark-700",style:{left:`${m/k.length*100}%`}},m)),o.map(a=>{const m=(a.start-6)/18*100,A=a.duration/18*100,x=C[a.color]||C.morning;return e.jsxs(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},drag:"x",dragConstraints:{left:0,right:0},onDragStart:()=>R(a.id),onDragEnd:B,className:`absolute top-2 bottom-2 rounded-lg ${x.bg} ${x.border} border px-2 py-1 cursor-grab active:cursor-grabbing flex items-center gap-1.5 group z-10 shadow-sm hover:shadow-md transition-shadow`,style:{left:`${m}%`,width:`${A}%`,minWidth:"80px"},children:[e.jsx(Y,{className:"w-3 h-3 text-slate-400 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-bold uppercase ${x.text}`,children:[a.type==="morning"&&"SH",a.type==="peak"&&"SH",a.type==="testing"&&"EX",a.type==="maintenance"&&"MT"]}),e.jsx("span",{className:`text-xs font-medium ${x.text} truncate`,children:a.label}),e.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-slate-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-20 shadow-lg",children:[e.jsx("div",{className:"font-semibold",children:a.label}),e.jsx("div",{className:"text-slate-300",children:`${a.start}:00 - ${a.start+a.duration}:00`})]})]},a.id)}),c!==null&&e.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-error/50",style:{left:`${c}%`}})]})]},t.id)})]})]})})]})]})}export{ve as default};
