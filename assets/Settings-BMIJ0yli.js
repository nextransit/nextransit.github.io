import{c as K,j as e,d as w,m as y,X as I,A as C,n as me,a0 as xe,e as P,a1 as G,p as U,a as W,D as Y,a2 as ge,a3 as Z,z as ue,a4 as be,K as q,b as O,C as J,a5 as Q,a6 as pe,I as he,M as fe}from"./index-BEEygDVJ.js";import{r as c}from"./vendor-xASHc04L.js";import{u as ye,S as v,G as je,a as ke,B as Ne,s as H,b as ve,c as we}from"./ScenarioConfigDrawer-C37mG2-M.js";import{u as S}from"./i18n-Skc9GWxP.js";import{S as L}from"./smartphone-D5758eGk.js";import{Q as X}from"./qr-code-CHfi4mYK.js";import{W as ee}from"./wallet-Du-B5Yw1.js";import{C as A}from"./check-CK7hLmZd.js";import{S as R}from"./save-DLKNciin.js";import{P as B}from"./plus-DYCFlYiH.js";import{D as Ce}from"./dollar-sign-CNtGXzzO.js";import{D as z}from"./database-B3liOUhc.js";import{W as Ke}from"./wifi-BgDy4s8l.js";import{M as Se}from"./map-pin-CzWkDqyj.js";import{S as Ae}from"./settings-2-Cy-VBtgh.js";import"./ui-BMjqw1mu.js";import"./charts-X6rqVOAO.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=K("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=K("Fingerprint",[["path",{d:"M2 12C2 6.5 6.5 2 12 2a10 10 0 0 1 8 4",key:"1jc9o5"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12c0-.7.12-1.37.34-2",key:"1mxgy1"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2c0 .47 0 1.17-.02 2",key:"1fgabc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=K("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=K("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=K("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),F=[{code:"USD",nameKey:"settings.currencies.USD",symbol:"$",decimals:2},{code:"EUR",nameKey:"settings.currencies.EUR",symbol:"€",decimals:2},{code:"GBP",nameKey:"settings.currencies.GBP",symbol:"£",decimals:2},{code:"JPY",nameKey:"settings.currencies.JPY",symbol:"¥",decimals:0},{code:"CNY",nameKey:"settings.currencies.CNY",symbol:"¥",decimals:2},{code:"AUD",nameKey:"settings.currencies.AUD",symbol:"A$",decimals:2},{code:"CAD",nameKey:"settings.currencies.CAD",symbol:"C$",decimals:2},{code:"SGD",nameKey:"settings.currencies.SGD",symbol:"S$",decimals:2},{code:"HKD",nameKey:"settings.currencies.HKD",symbol:"HK$",decimals:2},{code:"NZD",nameKey:"settings.currencies.NZD",symbol:"NZ$",decimals:2},{code:"KRW",nameKey:"settings.currencies.KRW",symbol:"₩",decimals:0},{code:"INR",nameKey:"settings.currencies.INR",symbol:"₹",decimals:2},{code:"IDR",nameKey:"settings.currencies.IDR",symbol:"Rp",decimals:2},{code:"MYR",nameKey:"settings.currencies.MYR",symbol:"RM",decimals:2},{code:"PHP",nameKey:"settings.currencies.PHP",symbol:"₱",decimals:2},{code:"THB",nameKey:"settings.currencies.THB",symbol:"฿",decimals:2},{code:"VND",nameKey:"settings.currencies.VND",symbol:"₫",decimals:0},{code:"AED",nameKey:"settings.currencies.AED",symbol:"د.إ",decimals:2},{code:"SAR",nameKey:"settings.currencies.SAR",symbol:"﷼",decimals:2},{code:"QAR",nameKey:"settings.currencies.QAR",symbol:"﷼",decimals:2},{code:"KWD",nameKey:"settings.currencies.KWD",symbol:"د.ك",decimals:3},{code:"BHD",nameKey:"settings.currencies.BHD",symbol:".د.ب",decimals:3},{code:"OMR",nameKey:"settings.currencies.OMR",symbol:"﷼",decimals:3},{code:"JOD",nameKey:"settings.currencies.JOD",symbol:"د.ا",decimals:3},{code:"EGP",nameKey:"settings.currencies.EGP",symbol:"£",decimals:2},{code:"ZAR",nameKey:"settings.currencies.ZAR",symbol:"R",decimals:2},{code:"NGN",nameKey:"settings.currencies.NGN",symbol:"₦",decimals:2},{code:"KES",nameKey:"settings.currencies.KES",symbol:"KSh",decimals:2},{code:"GHS",nameKey:"settings.currencies.GHS",symbol:"₵",decimals:2},{code:"CHF",nameKey:"settings.currencies.CHF",symbol:"Fr",decimals:2},{code:"SEK",nameKey:"settings.currencies.SEK",symbol:"kr",decimals:2},{code:"NOK",nameKey:"settings.currencies.NOK",symbol:"kr",decimals:2},{code:"DKK",nameKey:"settings.currencies.DKK",symbol:"kr",decimals:2},{code:"PLN",nameKey:"settings.currencies.PLN",symbol:"zł",decimals:2},{code:"CZK",nameKey:"settings.currencies.CZK",symbol:"Kč",decimals:2},{code:"HUF",nameKey:"settings.currencies.HUF",symbol:"Ft",decimals:2},{code:"RON",nameKey:"settings.currencies.RON",symbol:"lei",decimals:2},{code:"BGN",nameKey:"settings.currencies.BGN",symbol:"лв",decimals:2},{code:"HRK",nameKey:"settings.currencies.HRK",symbol:"kn",decimals:2},{code:"ISK",nameKey:"settings.currencies.ISK",symbol:"kr",decimals:0},{code:"MXN",nameKey:"settings.currencies.MXN",symbol:"$",decimals:2},{code:"BRL",nameKey:"settings.currencies.BRL",symbol:"R$",decimals:2},{code:"ARS",nameKey:"settings.currencies.ARS",symbol:"$",decimals:2},{code:"CLP",nameKey:"settings.currencies.CLP",symbol:"$",decimals:0},{code:"COP",nameKey:"settings.currencies.COP",symbol:"$",decimals:2},{code:"PEN",nameKey:"settings.currencies.PEN",symbol:"S/",decimals:2},{code:"UYU",nameKey:"settings.currencies.UYU",symbol:"$U",decimals:2},{code:"BTC",nameKey:"settings.currencies.BTC",symbol:"₿",decimals:8},{code:"ETH",nameKey:"settings.currencies.ETH",symbol:"Ξ",decimals:18}],Ue=[{value:"UTC",labelKey:"settings.timezones.UTC",offset:"UTC+0",region:"settings.regions.global"},{value:"Asia/Shanghai",labelKey:"settings.timezones.Asia_Shanghai",offset:"UTC+8",region:"settings.regions.asia"},{value:"Asia/Beijing",labelKey:"settings.timezones.Asia_Beijing",offset:"UTC+8",region:"settings.regions.asia"},{value:"Asia/Hong_Kong",labelKey:"settings.timezones.Asia_Hong_Kong",offset:"UTC+8",region:"settings.regions.asia"},{value:"Asia/Singapore",labelKey:"settings.timezones.Asia_Singapore",offset:"UTC+8",region:"settings.regions.asia"},{value:"Asia/Taipei",labelKey:"settings.timezones.Asia_Taipei",offset:"UTC+8",region:"settings.regions.asia"},{value:"Asia/Tokyo",labelKey:"settings.timezones.Asia_Tokyo",offset:"UTC+9",region:"settings.regions.asia"},{value:"Asia/Seoul",labelKey:"settings.timezones.Asia_Seoul",offset:"UTC+9",region:"settings.regions.asia"},{value:"Asia/Bangkok",labelKey:"settings.timezones.Asia_Bangkok",offset:"UTC+7",region:"settings.regions.asia"},{value:"Asia/Jakarta",labelKey:"settings.timezones.Asia_Jakarta",offset:"UTC+7",region:"settings.regions.asia"},{value:"Asia/Manila",labelKey:"settings.timezones.Asia_Manila",offset:"UTC+8",region:"settings.regions.asia"},{value:"Asia/Kuala_Lumpur",labelKey:"settings.timezones.Asia_Kuala_Lumpur",offset:"UTC+8",region:"settings.regions.asia"},{value:"Asia/Ho_Chi_Minh",labelKey:"settings.timezones.Asia_Ho_Chi_Minh",offset:"UTC+7",region:"settings.regions.asia"},{value:"Asia/Dubai",labelKey:"settings.timezones.Asia_Dubai",offset:"UTC+4",region:"settings.regions.asia"},{value:"Asia/Riyadh",labelKey:"settings.timezones.Asia_Riyadh",offset:"UTC+3",region:"settings.regions.asia"},{value:"Asia/Tehran",labelKey:"settings.timezones.Asia_Tehran",offset:"UTC+3:30",region:"settings.regions.asia"},{value:"Asia/Karachi",labelKey:"settings.timezones.Asia_Karachi",offset:"UTC+5",region:"settings.regions.asia"},{value:"Asia/Mumbai",labelKey:"settings.timezones.Asia_Mumbai",offset:"UTC+5:30",region:"settings.regions.asia"},{value:"Asia/Dhaka",labelKey:"settings.timezones.Asia_Dhaka",offset:"UTC+6",region:"settings.regions.asia"},{value:"Europe/London",labelKey:"settings.timezones.Europe_London",offset:"UTC+0/+1",region:"settings.regions.europe"},{value:"Europe/Paris",labelKey:"settings.timezones.Europe_Paris",offset:"UTC+1/+2",region:"settings.regions.europe"},{value:"Europe/Berlin",labelKey:"settings.timezones.Europe_Berlin",offset:"UTC+1/+2",region:"settings.regions.europe"},{value:"Europe/Madrid",labelKey:"settings.timezones.Europe_Madrid",offset:"UTC+1/+2",region:"settings.regions.europe"},{value:"Europe/Rome",labelKey:"settings.timezones.Europe_Rome",offset:"UTC+1/+2",region:"settings.regions.europe"},{value:"Europe/Amsterdam",labelKey:"settings.timezones.Europe_Amsterdam",offset:"UTC+1/+2",region:"settings.regions.europe"},{value:"Europe/Zurich",labelKey:"settings.timezones.Europe_Zurich",offset:"UTC+1/+2",region:"settings.regions.europe"},{value:"Europe/Vienna",labelKey:"settings.timezones.Europe_Vienna",offset:"UTC+1/+2",region:"settings.regions.europe"},{value:"Europe/Stockholm",labelKey:"settings.timezones.Europe_Stockholm",offset:"UTC+1/+2",region:"settings.regions.europe"},{value:"Europe/Oslo",labelKey:"settings.timezones.Europe_Oslo",offset:"UTC+1/+2",region:"settings.regions.europe"},{value:"Europe/Copenhagen",labelKey:"settings.timezones.Europe_Copenhagen",offset:"UTC+1/+2",region:"settings.regions.europe"},{value:"Europe/Helsinki",labelKey:"settings.timezones.Europe_Helsinki",offset:"UTC+2/+3",region:"settings.regions.europe"},{value:"Europe/Warsaw",labelKey:"settings.timezones.Europe_Warsaw",offset:"UTC+1/+2",region:"settings.regions.europe"},{value:"Europe/Prague",labelKey:"settings.timezones.Europe_Prague",offset:"UTC+1/+2",region:"settings.regions.europe"},{value:"Europe/Budapest",labelKey:"settings.timezones.Europe_Budapest",offset:"UTC+1/+2",region:"settings.regions.europe"},{value:"Europe/Istanbul",labelKey:"settings.timezones.Europe_Istanbul",offset:"UTC+3",region:"settings.regions.europe"},{value:"Europe/Moscow",labelKey:"settings.timezones.Europe_Moscow",offset:"UTC+3",region:"settings.regions.europe"},{value:"America/New_York",labelKey:"settings.timezones.America_New_York",offset:"UTC-5/-4",region:"settings.regions.americas"},{value:"America/Chicago",labelKey:"settings.timezones.America_Chicago",offset:"UTC-6/-5",region:"settings.regions.americas"},{value:"America/Denver",labelKey:"settings.timezones.America_Denver",offset:"UTC-7/-6",region:"settings.regions.americas"},{value:"America/Los_Angeles",labelKey:"settings.timezones.America_Los_Angeles",offset:"UTC-8/-7",region:"settings.regions.americas"},{value:"America/Toronto",labelKey:"settings.timezones.America_Toronto",offset:"UTC-5/-4",region:"settings.regions.americas"},{value:"America/Vancouver",labelKey:"settings.timezones.America_Vancouver",offset:"UTC-8/-7",region:"settings.regions.americas"},{value:"America/Mexico_City",labelKey:"settings.timezones.America_Mexico_City",offset:"UTC-6",region:"settings.regions.americas"},{value:"America/Sao_Paulo",labelKey:"settings.timezones.America_Sao_Paulo",offset:"UTC-3",region:"settings.regions.americas"},{value:"America/Buenos_Aires",labelKey:"settings.timezones.America_Buenos_Aires",offset:"UTC-3",region:"settings.regions.americas"},{value:"America/Santiago",labelKey:"settings.timezones.America_Santiago",offset:"UTC-4/-3",region:"settings.regions.americas"},{value:"America/Bogota",labelKey:"settings.timezones.America_Bogota",offset:"UTC-5",region:"settings.regions.americas"},{value:"America/Lima",labelKey:"settings.timezones.America_Lima",offset:"UTC-5",region:"settings.regions.americas"},{value:"America/Caracas",labelKey:"settings.timezones.America_Caracas",offset:"UTC-4",region:"settings.regions.americas"},{value:"Africa/Cairo",labelKey:"settings.timezones.Africa_Cairo",offset:"UTC+2",region:"settings.regions.africa"},{value:"Africa/Johannesburg",labelKey:"settings.timezones.Africa_Johannesburg",offset:"UTC+2",region:"settings.regions.africa"},{value:"Africa/Lagos",labelKey:"settings.timezones.Africa_Lagos",offset:"UTC+1",region:"settings.regions.africa"},{value:"Africa/Nairobi",labelKey:"settings.timezones.Africa_Nairobi",offset:"UTC+3",region:"settings.regions.africa"},{value:"Africa/Casablanca",labelKey:"settings.timezones.Africa_Casablanca",offset:"UTC+1",region:"settings.regions.africa"},{value:"Australia/Sydney",labelKey:"settings.timezones.Australia_Sydney",offset:"UTC+10/+11",region:"settings.regions.pacific"},{value:"Australia/Melbourne",labelKey:"settings.timezones.Australia_Melbourne",offset:"UTC+10/+11",region:"settings.regions.pacific"},{value:"Australia/Perth",labelKey:"settings.timezones.Australia_Perth",offset:"UTC+8",region:"settings.regions.pacific"},{value:"Australia/Brisbane",labelKey:"settings.timezones.Australia_Brisbane",offset:"UTC+10",region:"settings.regions.pacific"},{value:"Pacific/Auckland",labelKey:"settings.timezones.Pacific_Auckland",offset:"UTC+12/+13",region:"settings.regions.pacific"},{value:"Pacific/Fiji",labelKey:"settings.timezones.Pacific_Fiji",offset:"UTC+12",region:"settings.regions.pacific"},{value:"Pacific/Honolulu",labelKey:"settings.timezones.Pacific_Honolulu",offset:"UTC-10",region:"settings.regions.pacific"}],ae=()=>{const s={};return Ue.forEach(a=>{s[a.region]||(s[a.region]=[]),s[a.region].push(a)}),s},ie=[{groupKey:"settings.payment.groupBankCards",methods:[{id:"creditCard",icon:w,label:"paymentMethods.creditCard",desc:"settings.payment.descNFC",color:"from-blue-500 to-blue-600",brandColor:"bg-blue-500"},{id:"debitCard",icon:w,label:"paymentMethods.debitCard",desc:"settings.payment.descDebit",color:"from-indigo-500 to-indigo-600",brandColor:"bg-indigo-500"}]},{groupKey:"settings.payment.groupMobilePayment",methods:[{id:"mobilePayment",icon:L,label:"paymentMethods.mobilePayment",desc:"settings.payment.descMobile",color:"from-purple-500 to-purple-600",brandColor:"bg-purple-500"},{id:"qrCode",icon:X,label:"paymentMethods.qrCode",desc:"settings.payment.descQR",color:"from-orange-500 to-orange-600",brandColor:"bg-orange-500"}]},{groupKey:"settings.payment.groupLocalWallet",methods:[{id:"cash",icon:se,label:"paymentMethods.cash",desc:"settings.payment.descCash",color:"from-green-500 to-green-600",brandColor:"bg-green-500"},{id:"nfc",icon:ee,label:"paymentMethods.nfc",desc:"settings.payment.descNFCWallet",color:"from-cyan-500 to-cyan-600",brandColor:"bg-cyan-500"}]}];ie.flatMap(s=>s.methods);function _({value:s,onChange:a,min:r=0,max:n=9999,step:m=1,unit:l,label:u,error:b}){const{t:g}=S(),h=c.useCallback(()=>{s>r&&a(Math.max(r,s-m))},[s,r,m,a]),p=c.useCallback(()=>{s<n&&a(Math.min(n,s+m))},[s,n,m,a]),d=c.useCallback(o=>{const x=parseInt(o.target.value,10);isNaN(x)||a(Math.max(r,Math.min(n,x)))},[r,n,a]);return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:u}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:`flex items-center bg-white dark:bg-dark-800 border rounded-xl overflow-hidden transition-all duration-200 ${b?"border-error shadow-[0_0_0_3px_rgba(244,63,94,0.1)]":"border-slate-200 dark:border-dark-600 focus-within:border-primary-500 focus-within:ring-2 focus-within:ring-primary-500/20"}`,children:[e.jsx("button",{type:"button",onClick:h,disabled:s<=r,className:"flex-shrink-0 w-12 h-12 flex items-center justify-center text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 hover:bg-slate-50 dark:hover:bg-dark-700 transition-colors disabled:opacity-30 disabled:cursor-not-allowed active:scale-95","aria-label":g("common.decrease"),children:e.jsx(te,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 flex items-center justify-center px-2",children:[e.jsx("input",{type:"number",value:s,onChange:d,className:"w-full text-center text-lg font-semibold text-slate-900 dark:text-slate-100 bg-transparent border-0 focus:ring-0 p-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",min:r,max:n}),l&&e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400 ml-1",children:l})]}),e.jsx("button",{type:"button",onClick:p,disabled:s>=n,className:"flex-shrink-0 w-12 h-12 flex items-center justify-center text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 hover:bg-slate-50 dark:hover:bg-dark-700 transition-colors disabled:opacity-30 disabled:cursor-not-allowed active:scale-95","aria-label":g("common.increase"),children:e.jsx(B,{className:"w-5 h-5"})})]}),e.jsx(C,{children:b&&e.jsxs(y.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute -bottom-6 left-0 flex items-center gap-1 text-xs text-error",children:[e.jsx(me,{className:"w-3 h-3"}),e.jsx("span",{children:b})]})})]})]})}function ze({method:s,isSelected:a,onToggle:r}){const{t:n}=S(),m=s.icon;return e.jsxs(y.button,{type:"button",onClick:r,whileTap:{scale:.96},className:`relative w-full p-3.5 rounded-xl border-2 transition-all duration-300 text-left min-h-[72px] touch-manipulation ${a?"border-primary-500 bg-primary-50/50 dark:bg-primary-500/10 shadow-[0_0_0_3px_rgba(6,182,212,0.15)]":"border-slate-200 dark:border-dark-600 bg-white dark:bg-dark-800 opacity-60 grayscale"}`,children:[e.jsx(C,{children:a&&e.jsx(y.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:500,damping:25},className:"absolute -top-1.5 -right-1.5 w-6 h-6 rounded-full bg-primary-500 flex items-center justify-center shadow-md z-10",children:e.jsx(A,{className:"w-3.5 h-3.5 text-white"})})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg bg-gradient-to-br ${s.color} flex items-center justify-center flex-shrink-0 transition-all duration-300 ${a?"":"grayscale opacity-50"}`,children:e.jsx(m,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:`block text-sm font-semibold truncate transition-colors duration-200 ${a?"text-slate-900 dark:text-slate-100":"text-slate-500 dark:text-slate-400"}`,children:n(s.label)}),e.jsx("span",{className:"block text-[10px] text-slate-400 dark:text-slate-500 mt-0.5 truncate",children:n(s.desc)})]})]})]})}function Ee(){const{t:s}=S(),[a,r]=c.useState(!1),[n,m]=c.useState({}),[l,u]=c.useState({baseFare:3,maxFare:15,transferWindow:90,transferDiscount:50,acceptedMethods:["cash","creditCard","mobilePayment","qrCode"]}),b=c.useCallback((o,x)=>{const t={...n};o==="baseFare"&&(Number(x)>l.maxFare?t.baseFare=s("settings.payment.error.baseFareExceedsMax"):delete t.baseFare),o==="maxFare"&&(Number(x)<l.baseFare?t.maxFare=s("settings.payment.error.maxFareBelowBase"):delete t.maxFare),m(t)},[n,l.baseFare,l.maxFare,s]),g=c.useCallback((o,x)=>{u(t=>({...t,[o]:x})),typeof x=="number"&&b(o,x)},[b]),h=c.useCallback(o=>{u(x=>({...x,acceptedMethods:x.acceptedMethods.includes(o)?x.acceptedMethods.filter(t=>t!==o):[...x.acceptedMethods,o]}))},[]),p=c.useCallback(()=>{r(!0),setTimeout(()=>r(!1),2e3)},[]),d=c.useCallback(()=>{u({baseFare:3,maxFare:15,transferWindow:90,transferDiscount:50,acceptedMethods:["cash","creditCard","mobilePayment","qrCode"]}),m({})},[]);return e.jsxs("div",{className:"space-y-6 pb-24",children:[e.jsxs("div",{className:"px-4 sm:px-0",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-display font-semibold text-slate-900 dark:text-slate-100",children:s("settings.payment.title")}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:s("settings.payment.desc")})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-200 dark:border-dark-600 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 border-b border-slate-100 dark:border-dark-600 bg-slate-50/50 dark:bg-dark-700/30",children:e.jsx("h3",{className:"font-medium text-slate-800 dark:text-slate-200",children:s("settings.payment.pricingStrategy")})}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(_,{label:s("settings.payment.baseFare"),value:l.baseFare,onChange:o=>g("baseFare",o),min:1,max:l.maxFare,step:1,unit:s("common.currency.cny"),error:n.baseFare}),e.jsx(_,{label:s("settings.payment.maxFare"),value:l.maxFare,onChange:o=>g("maxFare",o),min:l.baseFare,max:100,step:1,unit:s("common.currency.cny"),error:n.maxFare})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(_,{label:s("settings.payment.transferWindow"),value:l.transferWindow,onChange:o=>g("transferWindow",o),min:0,max:180,step:5,unit:s("common.timeUnit.minutes")}),e.jsx(_,{label:s("settings.payment.transferDiscount"),value:l.transferDiscount,onChange:o=>g("transferDiscount",o),min:0,max:100,step:5,unit:"%"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-200 dark:border-dark-600 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 border-b border-slate-100 dark:border-dark-600 bg-slate-50/50 dark:bg-dark-700/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium text-slate-800 dark:text-slate-200",children:s("settings.payment.acceptedMethods")}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[l.acceptedMethods.length," ",s("common.selected")]})]})}),e.jsx("div",{className:"p-4 space-y-5",children:ie.map(o=>e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-2.5 px-0.5",children:s(o.groupKey)}),e.jsx("div",{className:"grid grid-cols-2 gap-2.5",children:o.methods.map(x=>e.jsx(ze,{method:x,isSelected:l.acceptedMethods.includes(x.id),onToggle:()=>h(x.id)},x.id))})]},o.groupKey))})]}),e.jsx(y.div,{initial:{y:100},animate:{y:0},className:"fixed bottom-0 left-0 right-0 bg-white/90 dark:bg-dark-900/90 backdrop-blur-xl border-t border-slate-200 dark:border-dark-600 p-4 z-40 safe-area-inset-bottom",children:e.jsxs("div",{className:"max-w-3xl mx-auto flex gap-3",children:[e.jsxs("button",{type:"button",onClick:d,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-slate-100 dark:bg-dark-700 hover:bg-slate-200 dark:hover:bg-dark-600 text-slate-700 dark:text-slate-200 rounded-xl font-medium transition-colors active:scale-95 min-h-[48px]",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{children:s("common.cancel")})]}),e.jsx("button",{type:"button",onClick:p,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-primary-500 hover:bg-primary-600 text-white rounded-xl font-medium transition-colors active:scale-95 min-h-[48px] shadow-lg shadow-primary-500/25",children:a?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{children:s("settings.saved")})]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-4 h-4"}),e.jsx("span",{children:s("settings.saveChanges")})]})})]})})]})}const De=[{groupKey:"settings.payment.groupBankCards",methods:[{id:"creditCard",icon:w,label:"paymentMethods.creditCard",desc:"settings.payment.descNFC",color:"from-blue-500 to-blue-600"},{id:"debitCard",icon:w,label:"paymentMethods.debitCard",desc:"settings.payment.descDebit",color:"from-indigo-500 to-indigo-600"}]},{groupKey:"settings.payment.groupMobilePayment",methods:[{id:"mobilePayment",icon:L,label:"paymentMethods.mobilePayment",desc:"settings.payment.descMobile",color:"from-purple-500 to-purple-600"},{id:"qrCode",icon:X,label:"paymentMethods.qrCode",desc:"settings.payment.descQR",color:"from-orange-500 to-orange-600"}]},{groupKey:"settings.payment.groupLocalWallet",methods:[{id:"cash",icon:se,label:"paymentMethods.cash",desc:"settings.payment.descCash",color:"from-green-500 to-green-600"},{id:"nfc",icon:ee,label:"paymentMethods.nfc",desc:"settings.payment.descNFCWallet",color:"from-cyan-500 to-cyan-600"}]}],Pe=({value:s,min:a=0,max:r=999999,step:n=1,onChange:m,unit:l})=>{const u=()=>{const g=Math.max(a,s-n);m(g)},b=()=>{const g=Math.min(r,s+n);m(g)};return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:u,disabled:s<=a,className:"w-8 h-8 flex items-center justify-center bg-slate-100 dark:bg-dark-700 rounded-lg text-slate-600 dark:text-slate-400 disabled:opacity-30 disabled:cursor-not-allowed active:bg-slate-200 dark:active:bg-dark-600 transition-colors",children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx("div",{className:"min-w-[80px] px-3 py-1.5 bg-white dark:bg-dark-800 border border-slate-200 dark:border-dark-600 rounded-lg text-center",children:e.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:[s,l&&e.jsx("span",{className:"text-slate-500 ml-0.5",children:l})]})}),e.jsx("button",{onClick:b,disabled:s>=r,className:"w-8 h-8 flex items-center justify-center bg-slate-100 dark:bg-dark-700 rounded-lg text-slate-600 dark:text-slate-400 disabled:opacity-30 disabled:cursor-not-allowed active:bg-slate-200 dark:active:bg-dark-600 transition-colors",children:e.jsx(B,{className:"w-4 h-4"})})]})},Fe=({isOpen:s,type:a,value:r,onSelect:n,onClose:m,t:l})=>{const[u,b]=c.useState(""),g=c.useMemo(()=>{if(a==="currency")return F.map(d=>({value:d.code,label:`${d.code} - ${l(d.nameKey)} (${d.symbol})`}));if(a==="timezone"){const d=[];return Object.entries(ae()).forEach(([o,x])=>{x.forEach(t=>{d.push({value:t.value,label:`${l(t.labelKey)} (${t.offset})`})})}),d}return a==="language"?[{value:"en",label:"English"},{value:"zh",label:"中文"},{value:"fr",label:"Français"},{value:"es",label:"Español"},{value:"ar",label:"العربية"}]:[]},[a,l]),h=c.useMemo(()=>u?g.filter(d=>d.label.toLowerCase().includes(u.toLowerCase())):g,[g,u]),p=a==="currency"?l("mobileSettings.pickers.currency"):a==="timezone"?l("mobileSettings.pickers.timezone"):a==="language"?l("mobileSettings.pickers.language"):"";return e.jsx(C,{children:s&&e.jsxs(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-white dark:bg-dark-900",children:[e.jsxs("div",{className:"sticky top-0 z-10 bg-white dark:bg-dark-900 border-b border-slate-200 dark:border-dark-600",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4",children:[e.jsx("button",{onClick:m,className:"p-2 -ml-2 hover:bg-slate-100 dark:hover:bg-dark-800 rounded-lg transition-colors",children:e.jsx(q,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"})}),e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:p})]}),e.jsx("div",{className:"px-4 pb-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",value:u,onChange:d=>b(d.target.value),placeholder:l("mobileSettings.pickers.search"),className:"w-full pl-10 pr-10 py-2.5 bg-slate-100 dark:bg-dark-800 rounded-xl text-sm border-0 focus:ring-2 focus:ring-primary-500",autoFocus:!0}),u&&e.jsx("button",{onClick:()=>b(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-slate-200 dark:hover:bg-dark-700 rounded-full",children:e.jsx(I,{className:"w-4 h-4 text-slate-400"})})]})})]}),e.jsx("div",{className:"h-[calc(100vh-120px)] overflow-y-auto",children:h.length>0?e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-dark-700",children:h.map(d=>e.jsxs("button",{onClick:()=>{n(d.value),m()},className:"w-full flex items-center justify-between px-4 py-4 hover:bg-slate-50 dark:hover:bg-dark-800 transition-colors",children:[e.jsx("span",{className:"text-sm text-slate-900 dark:text-slate-100",children:d.label}),r===d.value&&e.jsx(A,{className:"w-5 h-5 text-primary-500"})]},d.value))}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-500",children:[e.jsx(O,{className:"w-12 h-12 mb-3 opacity-30"}),e.jsx("p",{className:"text-sm",children:l("mobileSettings.pickers.noResults")})]})})]})})},Le=({isOpen:s,setting:a,newValue:r,onConfirm:n,onCancel:m,t:l})=>{const[u,b]=c.useState(""),[g,h]=c.useState("");if(!s||!a)return null;const p=()=>{if(u.length<1){h(l("mobileSettings.confirmDialog.enterPassword"));return}if(u!=="admin"){h(l("mobileSettings.confirmDialog.incorrectPassword"));return}n(),b(""),h("")};return e.jsx(C,{children:e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/50 backdrop-blur-sm p-4",onClick:m,children:e.jsxs(y.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-dark-800 rounded-2xl w-full max-w-sm overflow-hidden",onClick:d=>d.stopPropagation(),children:[e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-dark-600",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center",children:e.jsx(Y,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:l("mobileSettings.confirmDialog.title")}),e.jsx("p",{className:"text-xs text-slate-500",children:a.labelKey})]})]})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:l("mobileSettings.confirmDialog.message")}),e.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3",children:e.jsx("p",{className:"text-xs text-amber-800 dark:text-amber-200",children:l("mobileSettings.confirmDialog.warning")})}),e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-slate-50 dark:bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:l("mobileSettings.editor.currentValue")}),e.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:a.value})]}),e.jsx(J,{className:"w-4 h-4 text-slate-400"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:l("mobileSettings.editor.newValue")}),e.jsx("p",{className:"text-sm font-bold text-primary-600",children:r})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1.5",children:l("mobileSettings.confirmDialog.enterPassword")}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"password",value:u,onChange:d=>{b(d.target.value),h("")},className:"w-full pl-10 pr-4 py-2.5 bg-slate-100 dark:bg-dark-700 border border-slate-200 dark:border-dark-600 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"••••••"})]}),g&&e.jsx("p",{className:"text-xs text-red-600 mt-1.5",children:g})]}),e.jsxs("button",{className:"w-full flex items-center justify-center gap-2 py-2 text-sm text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-lg transition-colors",children:[e.jsx(Te,{className:"w-4 h-4"}),l("mobileSettings.confirmDialog.useBiometric")]})]}),e.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-dark-600 flex gap-3",children:[e.jsx("button",{onClick:m,className:"flex-1 py-2.5 text-sm font-medium text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-dark-700 rounded-lg transition-colors",children:l("mobileSettings.confirmDialog.cancel")}),e.jsx("button",{onClick:p,className:"flex-1 py-2.5 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 rounded-lg transition-colors",children:l("mobileSettings.confirmDialog.confirm")})]})]})})})},Re=({hasChanges:s,onSave:a,onCancel:r,t:n})=>s?e.jsx(y.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:"fixed bottom-0 left-0 right-0 z-40 p-4 bg-white/90 dark:bg-dark-800/90 backdrop-blur-lg border-t border-slate-200 dark:border-dark-600",children:e.jsxs("div",{className:"flex items-center justify-between max-w-lg mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:n("mobileSettings.stickyFooter.unsavedChanges")})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-dark-700 rounded-lg transition-colors",children:n("mobileSettings.stickyFooter.cancel")}),e.jsxs("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 rounded-lg flex items-center gap-1.5 transition-colors",children:[e.jsx(R,{className:"w-4 h-4"}),n("mobileSettings.stickyFooter.save")]})]})]})}):null,Be=({group:s,isActive:a,onClick:r,t:n})=>{const m={blue:"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border-blue-200 dark:border-blue-800",purple:"bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400 border-purple-200 dark:border-purple-800",amber:"bg-amber-50 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400 border-amber-200 dark:border-amber-800",emerald:"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800",rose:"bg-rose-50 dark:bg-rose-900/20 text-rose-600 dark:text-rose-400 border-rose-200 dark:border-rose-800",slate:"bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-slate-200 dark:border-slate-700"};return e.jsxs(y.button,{whileTap:{scale:.98},onClick:r,className:`p-4 rounded-xl border-2 text-left transition-all ${a?m[s.color]:"bg-white dark:bg-dark-800 border-slate-200 dark:border-dark-600"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center mb-3 ${a?"bg-white/50 dark:bg-black/20":"bg-slate-100 dark:bg-dark-700"}`,children:s.icon}),e.jsx("h3",{className:`font-semibold text-sm ${a?"text-current":"text-slate-900 dark:text-slate-100"}`,children:n(s.labelKey)}),e.jsxs("p",{className:"text-xs mt-1 opacity-70",children:[s.items.length," ",n("common.items")]})]})},$e=({item:s,onPress:a,t:r})=>{const n=()=>s.type==="switch"?e.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${s.value?"bg-primary-500":"bg-slate-300 dark:bg-dark-600"}`,children:e.jsx(y.div,{animate:{x:s.value?20:2},className:"w-5 h-5 bg-white rounded-full shadow-sm mt-0.5"})}):s.type==="stepper"?e.jsx(Pe,{value:s.value,min:s.min,max:s.max,step:s.step,onChange:m=>a()}):e.jsxs("div",{className:"flex items-center gap-1 text-slate-500 dark:text-slate-400",children:[e.jsx("span",{className:"text-sm",children:s.value}),e.jsx(J,{className:"w-4 h-4"})]});return e.jsxs("button",{onClick:a,className:"w-full flex items-center justify-between py-3 px-4 bg-white dark:bg-dark-800 hover:bg-slate-50 dark:hover:bg-dark-700/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.icon&&e.jsx("div",{className:"w-8 h-8 rounded-lg bg-slate-100 dark:bg-dark-700 flex items-center justify-center",children:s.icon}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r(s.labelKey)}),s.description&&e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:s.description})]})]}),n()]})},Ve=()=>{var $,V;const{t:s,i18n:a}=S(),[r,n]=c.useState(null),[m,l]=c.useState(null),[u,b]=c.useState(""),[g,h]=c.useState(!1),[p,d]=c.useState(null),[o,x]=c.useState({}),[t,k]=c.useState({}),[j,E]=c.useState(["cash","creditCard","mobilePayment","qrCode"]),D=c.useCallback(i=>{E(f=>f.includes(i)?f.filter(N=>N!==i):[...f,i])},[]),T=c.useMemo(()=>[{id:"general",labelKey:"mobileSettings.groups.general",icon:e.jsx(G,{className:"w-5 h-5"}),color:"blue",items:[{id:"systemName",labelKey:"settings.general.systemName",value:"TransitCard Pro",type:"text",icon:e.jsx(xe,{className:"w-4 h-4 text-blue-500"})},{id:"language",labelKey:"settings.general.defaultLanguage",value:a.language,type:"select",icon:e.jsx(Me,{className:"w-4 h-4 text-purple-500"})},{id:"currency",labelKey:"settings.general.defaultCurrency",value:"CNY",type:"select",icon:e.jsx(Ce,{className:"w-4 h-4 text-green-500"})},{id:"timezone",labelKey:"settings.general.timezone",value:"Asia/Shanghai",type:"select",icon:e.jsx(P,{className:"w-4 h-4 text-amber-500"})}]},{id:"payment",labelKey:"mobileSettings.groups.payment",icon:e.jsx(w,{className:"w-5 h-5"}),color:"emerald",items:[{id:"maxBalance",labelKey:"settings.general.maxBalance",value:1e4,type:"stepper",min:1e3,max:5e4,step:1e3,sensitive:!0,icon:e.jsx(w,{className:"w-4 h-4 text-emerald-500"})},{id:"minLoad",labelKey:"settings.general.minLoad",value:10,type:"stepper",min:1,max:100,step:1,sensitive:!0,icon:e.jsx(B,{className:"w-4 h-4 text-blue-500"})},{id:"maxLoad",labelKey:"settings.general.maxLoad",value:5e3,type:"stepper",min:100,max:1e4,step:100,sensitive:!0,icon:e.jsx(U,{className:"w-4 h-4 text-amber-500"})}]},{id:"security",labelKey:"mobileSettings.groups.security",icon:e.jsx(U,{className:"w-5 h-5"}),color:"purple",items:[{id:"twoFactor",labelKey:"settings.security.2fa",value:!0,type:"switch",icon:e.jsx(W,{className:"w-4 h-4 text-purple-500"})},{id:"sessionTimeout",labelKey:"settings.security.sessionTimeout",value:!0,type:"switch",icon:e.jsx(P,{className:"w-4 h-4 text-amber-500"})},{id:"auditLogging",labelKey:"settings.security.auditLogging",value:!0,type:"switch",icon:e.jsx(z,{className:"w-4 h-4 text-blue-500"})}]},{id:"notifications",labelKey:"mobileSettings.groups.notifications",icon:e.jsx(Z,{className:"w-5 h-5"}),color:"amber",items:[{id:"terminalOffline",labelKey:"settings.notifications.terminalOffline",value:!0,type:"switch",icon:e.jsx(Ke,{className:"w-4 h-4 text-slate-500"})},{id:"failedTxn",labelKey:"settings.notifications.failedTxn",value:!0,type:"switch",icon:e.jsx(Y,{className:"w-4 h-4 text-amber-500"})},{id:"dailySummary",labelKey:"settings.notifications.dailySummary",value:!1,type:"switch",icon:e.jsx(ge,{className:"w-4 h-4 text-yellow-500"})}]},{id:"system",labelKey:"mobileSettings.groups.system",icon:e.jsx(z,{className:"w-5 h-5"}),color:"slate",items:[{id:"syncInterval",labelKey:"settings.system.syncInterval",value:15,type:"stepper",min:1,max:60,step:1,icon:e.jsx(ue,{className:"w-4 h-4 text-blue-500"})},{id:"heartbeatInterval",labelKey:"settings.system.heartbeatInterval",value:30,type:"stepper",min:10,max:300,step:10,icon:e.jsx(P,{className:"w-4 h-4 text-emerald-500"})}]}],[a.language]),le=c.useMemo(()=>Object.keys(t).some(i=>t[i]!==o[i]),[t,o]);c.useState(()=>{const i={};T.forEach(f=>{f.items.forEach(N=>{i[N.id]=N.value})}),x(i),k(i)});const re=i=>{if(i.type==="switch"){const f=!t[i.id];i.sensitive?(d({item:i,value:f}),h(!0)):k(N=>({...N,[i.id]:f}))}else i.id==="currency"?(b(t[i.id]||i.value),l("currency")):i.id==="timezone"?(b(t[i.id]||i.value),l("timezone")):i.id==="language"&&(b(t[i.id]||i.value),l("language"))},ne=i=>{m==="language"&&a.changeLanguage(i);const f=m==="currency"?"currency":m==="timezone"?"timezone":"language";k(N=>({...N,[f]:i})),l(null)},ce=()=>{p&&(k(i=>({...i,[p.item.id]:p.value})),d(null),h(!1))},oe=()=>{console.log("Saving settings:",t),x(t)},de=()=>{k(o)};return e.jsxs("div",{className:"min-h-full bg-slate-50 dark:bg-dark-900 pb-24",children:[e.jsx("div",{className:"sticky top-0 z-20 bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-dark-600",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:s("mobileSettings.title")}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-green-50 dark:bg-green-900/20 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs font-medium text-green-700 dark:text-green-400",children:s("common.systemOnline")})]})})]})}),e.jsx(C,{mode:"wait",children:r===null?e.jsxs(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-4",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:T.map(i=>e.jsx(Be,{group:i,isActive:!1,onClick:()=>n(i.id),t:s},i.id))}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("h2",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider px-1",children:s("common.status")}),e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-slate-200 dark:border-dark-600 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 px-4 border-b border-slate-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{className:"w-5 h-5 text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:s("settings.general.defaultLanguage")})]}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:a.language==="zh"?"中文":a.language==="en"?"English":a.language})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 px-4 border-b border-slate-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Se,{className:"w-5 h-5 text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:s("settings.general.timezone")})]}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:"UTC+8"})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 px-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L,{className:"w-5 h-5 text-slate-400"}),e.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:["App ",s("common.version")]})]}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:"v2.5.2"})]})]})]})]},"grid"):e.jsxs(y.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"min-h-full",children:[e.jsx("div",{className:"sticky top-[57px] z-10 bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-dark-600",children:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[e.jsx("button",{onClick:()=>n(null),className:"p-2 -ml-2 hover:bg-slate-100 dark:hover:bg-dark-700 rounded-lg transition-colors",children:e.jsx(q,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"})}),e.jsx("h2",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:s((($=T.find(i=>i.id===r))==null?void 0:$.labelKey)||"")})]})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-slate-200 dark:border-dark-600 overflow-hidden divide-y divide-slate-100 dark:divide-dark-700",children:(V=T.find(i=>i.id===r))==null?void 0:V.items.map(i=>e.jsx($e,{item:{...i,value:t[i.id]??i.value},onPress:()=>re({...i,value:t[i.id]??i.value}),t:s},i.id))}),r==="payment"&&e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-slate-200 dark:border-dark-600 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 border-b border-slate-100 dark:border-dark-600 bg-slate-50/50 dark:bg-dark-700/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:s("settings.payment.acceptedMethods")}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[j.length," ",s("common.selected")]})]})}),e.jsx("div",{className:"p-3 space-y-4",children:De.map(i=>e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-2 px-0.5",children:s(i.groupKey)}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:i.methods.map(f=>{const N=f.icon,M=j.includes(f.id);return e.jsxs(y.button,{type:"button",onClick:()=>D(f.id),whileTap:{scale:.96},className:`relative w-full p-3 rounded-xl border-2 transition-all duration-300 text-left min-h-[68px] touch-manipulation ${M?"border-primary-500 bg-primary-50/50 dark:bg-primary-500/10 shadow-[0_0_0_3px_rgba(6,182,212,0.15)]":"border-slate-200 dark:border-dark-600 bg-white dark:bg-dark-800 opacity-60 grayscale"}`,children:[e.jsx(C,{children:M&&e.jsx(y.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:500,damping:25},className:"absolute -top-1.5 -right-1.5 w-5 h-5 rounded-full bg-primary-500 flex items-center justify-center shadow-md z-10",children:e.jsx(A,{className:"w-3 h-3 text-white"})})}),e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:`w-9 h-9 rounded-lg bg-gradient-to-br ${f.color} flex items-center justify-center flex-shrink-0 transition-all duration-300 ${M?"":"grayscale opacity-50"}`,children:e.jsx(N,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:`block text-xs font-semibold truncate transition-colors duration-200 ${M?"text-slate-900 dark:text-slate-100":"text-slate-500 dark:text-slate-400"}`,children:s(f.label)}),e.jsx("span",{className:"block text-[10px] text-slate-400 dark:text-slate-500 mt-0.5 truncate",children:s(f.desc)})]})]})]},f.id)})})]},i.groupKey))})]})]})]},"detail")}),e.jsx(Fe,{isOpen:m!==null,type:m,value:u,onSelect:ne,onClose:()=>l(null),t:s}),e.jsx(Le,{isOpen:g,setting:(p==null?void 0:p.item)||null,newValue:p==null?void 0:p.value,onConfirm:ce,onCancel:()=>{h(!1),d(null)},t:s}),e.jsx(Re,{hasChanges:le,onSave:oe,onCancel:de,t:s})]})},Oe=()=>window.innerWidth<768,He=[{id:"general",label:"General",icon:G},{id:"scenarios",label:"Scenarios",icon:_e},{id:"security",label:"Security",icon:U},{id:"notifications",label:"Notifications",icon:Z},{id:"users",label:"Users",icon:Q},{id:"payment",label:"Payment",icon:w},{id:"system",label:"System",icon:z}];function cs(){const{t:s,i18n:a}=S(),[r,n]=c.useState("general"),[m,l]=c.useState(!1),[u,b]=c.useState(null),[g,h]=c.useState(!1),{data:p}=ye(),d=()=>{l(!0),setTimeout(()=>l(!1),2e3)},o=t=>{b(t),h(!0)},x=t=>Array.isArray(p)?p.find(k=>k.scenarioCode===t&&k.isActive):void 0;return e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[e.jsxs("div",{className:"px-4 sm:px-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-display font-bold text-slate-900 dark:text-slate-100",children:s("settings.title")}),e.jsx("p",{className:"text-sm sm:text-base text-slate-500 dark:text-slate-400 mt-1",children:s("settings.subtitle")})]}),e.jsxs("div",{className:"flex flex-col gap-4 sm:gap-6",children:[e.jsx("div",{className:"glass-panel p-2 flex overflow-x-auto space-x-2 mx-4 sm:mx-0 scrollbar-hide",children:He.map(t=>e.jsxs("button",{onClick:()=>n(t.id),className:`flex items-center gap-2 px-3 sm:px-4 py-2 rounded-lg transition-all duration-200 whitespace-nowrap min-h-[44px] touch-manipulation ${r===t.id?"bg-primary-500 text-white shadow-md":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-dark-700"}`,children:[e.jsx(t.icon,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:s(`settings.tabs.${t.id}`)})]},t.id))}),e.jsx("div",{className:"flex-1 px-4 sm:px-0",children:e.jsxs(y.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},className:"glass-panel p-4 sm:p-6",children:[r==="general"&&(Oe()?e.jsx(Ve,{}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base sm:text-lg font-display font-semibold text-slate-900 dark:text-slate-100 mb-2 sm:mb-4",children:s("settings.general.title")}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:s("settings.general.desc")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.general.systemName")}),e.jsx("input",{type:"text",defaultValue:"TransitCard Pro",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.general.defaultCurrency")}),e.jsx("select",{className:"input-field",children:F.map(t=>e.jsxs("option",{value:t.code,children:[t.code," - ",s(t.nameKey)," (",t.symbol,")"]},t.code))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.general.defaultLanguage")}),e.jsxs("select",{className:"input-field",value:a.language,onChange:t=>a.changeLanguage(t.target.value),children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"zh",children:"中文"}),e.jsx("option",{value:"fr",children:"Français"}),e.jsx("option",{value:"es",children:"Español"}),e.jsx("option",{value:"ar",children:"العربية"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.general.timezone")}),e.jsx("select",{className:"input-field",children:Object.entries(ae()).map(([t,k])=>e.jsx("optgroup",{label:s(t),children:k.map(j=>e.jsxs("option",{value:j.value,children:[s(j.labelKey)," (",j.offset,")"]},j.value))},t))})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-200 dark:border-dark-600",children:[e.jsx("h3",{className:"font-medium text-slate-800 dark:text-slate-200 mb-3 sm:mb-4",children:s("settings.general.cardSettings")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.general.defaultValidity")}),e.jsx("input",{type:"number",defaultValue:5,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.general.maxBalance")}),e.jsx("input",{type:"number",defaultValue:1e4,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.general.minLoad")}),e.jsx("input",{type:"number",defaultValue:10,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.general.maxLoad")}),e.jsx("input",{type:"number",defaultValue:5e3,className:"input-field"})]})]})]})]})),r==="security"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base sm:text-lg font-display font-semibold text-slate-900 dark:text-slate-100 mb-2 sm:mb-4",children:s("settings.security.title")}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:s("settings.security.desc")})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 sm:p-4 bg-slate-50 dark:bg-dark-700/30 rounded-lg gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pe,{className:"w-5 h-5 text-primary-500 dark:text-primary-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:s("settings.security.2fa")}),e.jsx("p",{className:"text-sm text-slate-500",children:s("settings.security.2faDesc")})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer self-start sm:self-auto min-h-[44px]",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 dark:bg-dark-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-500"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 sm:p-4 bg-slate-50 dark:bg-dark-700/30 rounded-lg gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:"w-5 h-5 text-success flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:s("settings.security.sessionTimeout")}),e.jsx("p",{className:"text-sm text-slate-500",children:s("settings.security.sessionTimeoutDesc")})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer self-start sm:self-auto min-h-[44px]",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 dark:bg-dark-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-500"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 sm:p-4 bg-slate-50 dark:bg-dark-700/30 rounded-lg gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{className:"w-5 h-5 text-accent-500 dark:text-accent-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:s("settings.security.auditLogging")}),e.jsx("p",{className:"text-sm text-slate-500",children:s("settings.security.auditLoggingDesc")})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer self-start sm:self-auto min-h-[44px]",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 dark:bg-dark-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-500"})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-200 dark:border-dark-600",children:[e.jsx("h3",{className:"font-medium text-slate-800 dark:text-slate-200 mb-3 sm:mb-4",children:s("settings.security.passwordPolicy")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.security.minLength")}),e.jsx("input",{type:"number",defaultValue:12,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.security.expiration")}),e.jsx("input",{type:"number",defaultValue:90,className:"input-field"})]})]})]})]}),r==="notifications"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base sm:text-lg font-display font-semibold text-slate-900 dark:text-slate-100 mb-2 sm:mb-4",children:s("settings.notifications.title")}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:s("settings.notifications.desc")})]}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:[{id:"terminalOffline",checked:!0},{id:"failedTxn",checked:!0},{id:"securityEvents",checked:!0},{id:"dailySummary",checked:!1},{id:"blacklistUpdates",checked:!0}].map(t=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 sm:p-4 bg-slate-50 dark:bg-dark-700/30 rounded-lg gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:s(`settings.notifications.${t.id}`)}),e.jsx("p",{className:"text-sm text-slate-500",children:s(`settings.notifications.${t.id}Desc`)})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer self-start sm:self-auto min-h-[44px]",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:t.checked}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 dark:bg-dark-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-500"})]})]},t.id))})]}),r==="users"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base sm:text-lg font-display font-semibold text-slate-900 dark:text-slate-100 mb-2 sm:mb-4",children:s("settings.users.title")}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:s("settings.users.desc")})]}),e.jsxs("button",{className:"btn-primary flex items-center justify-center gap-2 min-h-[44px] touch-manipulation",children:[e.jsx(Q,{className:"w-4 h-4"}),s("settings.users.addUser")]})]}),e.jsx("div",{className:"space-y-3",children:[{name:"Admin User",email:"admin@transitcard.io",role:"admin",status:"active"},{name:"John Operator",email:"john@transitcard.io",role:"operator",status:"active"},{name:"Sarah Manager",email:"sarah@transitcard.io",role:"manager",status:"inactive"}].map((t,k)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 sm:p-4 bg-slate-50 dark:bg-dark-700/30 rounded-lg gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white font-semibold",children:t.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:t.name}),e.jsx("p",{className:"text-sm text-slate-500",children:t.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap",children:[e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-slate-200 dark:bg-dark-600 text-slate-700 dark:text-slate-300",children:s(`roles.${t.role}`)}),e.jsx("span",{className:`badge ${t.status==="active"?"badge-success":"badge-warning"}`,children:s(`userStatus.${t.status}`)})]})]},k))})]}),r==="payment"&&e.jsx(Ee,{}),r==="scenarios"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base sm:text-lg font-display font-semibold text-slate-900 dark:text-slate-100 mb-2 sm:mb-4",children:s("settings.scenarios.title")}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:s("settings.scenarios.desc")})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:Object.values(v).map(t=>{const k={[v.TRANSIT]:he,[v.CAMPUS]:Ne,[v.RETAIL]:ke,[v.UNIVERSITY]:je}[t],j=x(t),E={[v.TRANSIT]:"from-blue-500 to-blue-600",[v.CAMPUS]:"from-emerald-500 to-emerald-600",[v.RETAIL]:"from-amber-500 to-amber-600",[v.UNIVERSITY]:"from-violet-500 to-violet-600"}[t];return e.jsxs(y.div,{whileHover:{scale:1.02},onClick:()=>o(t),className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden cursor-pointer",children:[e.jsxs("div",{className:`h-24 bg-gradient-to-br ${E} p-4 flex items-start justify-between`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-xl",children:e.jsx(k,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:s(H[t])}),e.jsx("p",{className:"text-white/80 text-xs",children:j?j.configName:s("scenarioConfig.notConfigured")})]})]}),j&&e.jsxs("div",{className:"flex items-center gap-1 text-white bg-white/20 px-2 py-0.5 rounded-full text-xs font-medium",children:[e.jsx(fe,{className:"w-3 h-3"}),s("scenarioConfig.active")]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm mb-4 line-clamp-2",children:s(ve[t])}),j&&e.jsxs("div",{className:"space-y-1 mb-4 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:s("scenarioConfig.effectiveTime")}),e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:new Date(j.effectiveTime).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:s("scenarioConfig.currency")}),e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:j.currencyUnit})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{type:"button",onClick:D=>{D.stopPropagation(),o(t)},className:"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 rounded-lg text-sm font-medium transition-colors",children:[e.jsx(Ae,{className:"w-3.5 h-3.5"}),s(j?"scenarioConfig.configure":"scenarioConfig.setup")]})})]})]},t)})}),e.jsxs("div",{className:"pt-4 border-t border-slate-200 dark:border-dark-600",children:[e.jsx("h3",{className:"font-medium text-slate-800 dark:text-slate-200 mb-3 sm:mb-4",children:s("settings.scenarios.globalSettings")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.scenarios.defaultScenario")}),e.jsx("select",{className:"input-field",children:Object.values(v).map(t=>e.jsx("option",{value:t,children:s(H[t])},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.scenarios.autoSwitch")}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer min-h-[44px]",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 dark:bg-dark-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-500"})]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-200 dark:border-dark-600",children:[e.jsx("h3",{className:"font-medium text-slate-800 dark:text-slate-200 mb-3 sm:mb-4",children:s("settings.scenarios.paymentSettings")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.scenarios.minLoad")}),e.jsx("input",{type:"number",defaultValue:5,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.scenarios.maxLoad")}),e.jsx("input",{type:"number",defaultValue:200,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.scenarios.maxBalance")}),e.jsx("input",{type:"number",defaultValue:500,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.scenarios.currency")}),e.jsx("select",{className:"input-field",children:F.map(t=>e.jsx("option",{value:t.code,children:t.code},t.code))})]})]})]})]}),r==="system"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base sm:text-lg font-display font-semibold text-slate-900 dark:text-slate-100 mb-2 sm:mb-4",children:s("settings.system.title")}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:s("settings.system.desc")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.system.syncInterval")}),e.jsx("input",{type:"number",defaultValue:15,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.system.heartbeatInterval")}),e.jsx("input",{type:"number",defaultValue:30,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.system.offlineLimit")}),e.jsx("input",{type:"number",defaultValue:100,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.system.maxOfflineAmount")}),e.jsx("input",{type:"number",defaultValue:50,className:"input-field"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-200 dark:border-dark-600",children:[e.jsx("h3",{className:"font-medium text-slate-800 dark:text-slate-200 mb-3 sm:mb-4",children:s("settings.system.dataRetention")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.system.txnHistory")}),e.jsx("input",{type:"number",defaultValue:2555,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:s("settings.system.auditLogs")}),e.jsx("input",{type:"number",defaultValue:3650,className:"input-field"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-6 border-t border-slate-200 dark:border-dark-600",children:[e.jsx("button",{className:"btn-secondary min-h-[44px] touch-manipulation",children:s("common.cancel")}),e.jsx("button",{onClick:d,className:"btn-primary flex items-center justify-center gap-2 min-h-[44px] touch-manipulation",children:m?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-4 h-4"}),s("settings.saved")]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-4 h-4"}),s("settings.saveChanges")]})})]})]},r)})]}),e.jsx(we,{isOpen:g,onClose:()=>h(!1),scenario:u})]})}export{cs as default};
