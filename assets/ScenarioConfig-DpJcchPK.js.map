{"version":3,"file":"ScenarioConfig-DpJcchPK.js","sources":["../../src/pages/ScenarioConfig.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useTranslation } from 'react-i18next';\nimport {\n  Bus,\n  Building2,\n  ShoppingBag,\n  GraduationCap,\n  Plus,\n  Settings,\n  ChevronRight,\n  CheckCircle,\n  X,\n} from 'lucide-react';\nimport {\n  ScenarioType,\n  scenarioTypeTranslationKeys,\n  scenarioTypeDescriptionKeys,\n} from '../types/scenario-config';\nimport { useScenarioConfigs } from '../hooks/useScenarioConfig';\nimport ScenarioConfigDrawer from '../components/scenario-config/ScenarioConfigDrawer';\n\nconst scenarioIcons = {\n  [ScenarioType.TRANSIT]: Bus,\n  [ScenarioType.CAMPUS]: Building2,\n  [ScenarioType.RETAIL]: ShoppingBag,\n  [ScenarioType.UNIVERSITY]: GraduationCap,\n};\n\nconst scenarioColors = {\n  [ScenarioType.TRANSIT]: 'from-blue-500 to-blue-600',\n  [ScenarioType.CAMPUS]: 'from-emerald-500 to-emerald-600',\n  [ScenarioType.RETAIL]: 'from-amber-500 to-amber-600',\n  [ScenarioType.UNIVERSITY]: 'from-violet-500 to-violet-600',\n};\n\nexport default function ScenarioConfig() {\n  const { t } = useTranslation();\n  const [selectedScenario, setSelectedScenario] = useState<ScenarioType | null>(null);\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n\n  const { data: configs, isLoading } = useScenarioConfigs();\n\n  const handleConfigure = (scenario: ScenarioType) => {\n    setSelectedScenario(scenario);\n    setIsDrawerOpen(true);\n  };\n\n  const getActiveConfig = (scenario: ScenarioType) => {\n    return configs?.find((c) => c.scenarioCode === scenario && c.isActive);\n  };\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-slate-900 dark:text-slate-100\">\n            {t('scenarioConfig.title')}\n          </h1>\n          <p className=\"mt-1 text-sm text-slate-500 dark:text-slate-400\">\n            {t('scenarioConfig.description')}\n          </p>\n        </div>\n      </div>\n\n      {/* Scenario Cards Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {Object.values(ScenarioType).map((scenario) => {\n          const Icon = scenarioIcons[scenario];\n          const activeConfig = getActiveConfig(scenario);\n\n          return (\n            <motion.div\n              key={scenario}\n              whileHover={{ scale: 1.02 }}\n              className=\"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden\"\n            >\n              {/* Card Header */}\n              <div\n                className={`h-32 bg-gradient-to-br ${scenarioColors[scenario]} p-6 flex items-start justify-between`}\n              >\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"p-3 bg-white/20 rounded-xl\">\n                    <Icon className=\"w-8 h-8 text-white\" />\n                  </div>\n                  <div>\n                    <h2 className=\"text-xl font-bold text-white\">\n                      {t(scenarioTypeTranslationKeys[scenario])}\n                    </h2>\n                    <p className=\"text-white/80 text-sm\">\n                      {activeConfig ? activeConfig.configName : t('scenarioConfig.notConfigured')}\n                    </p>\n                  </div>\n                </div>\n                {activeConfig && (\n                  <div className=\"flex items-center gap-1 text-white bg-white/20 px-3 py-1 rounded-full text-xs font-medium\">\n                    <CheckCircle className=\"w-3 h-3\" />\n                    {t('scenarioConfig.active')}\n                  </div>\n                )}\n              </div>\n\n              {/* Card Body */}\n              <div className=\"p-6\">\n                <p className=\"text-slate-600 dark:text-slate-400 text-sm mb-6\">\n                  {t(scenarioTypeDescriptionKeys[scenario])}\n                </p>\n\n                {/* Quick Info */}\n                {activeConfig && (\n                  <div className=\"space-y-2 mb-6\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-slate-500\">{t('scenarioConfig.effectiveTime')}</span>\n                      <span className=\"text-slate-700 dark:text-slate-300\">\n                        {new Date(activeConfig.effectiveTime).toLocaleDateString()}\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-slate-500\">{t('scenarioConfig.currency')}</span>\n                      <span className=\"text-slate-700 dark:text-slate-300\">{activeConfig.currencyUnit}</span>\n                    </div>\n                  </div>\n                )}\n\n                {/* Actions */}\n                <div className=\"flex gap-3\">\n                  <button\n                    type=\"button\"\n                    onClick={() => handleConfigure(scenario)}\n                    className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 rounded-xl font-medium transition-colors\"\n                  >\n                    <Settings className=\"w-4 h-4\" />\n                    {activeConfig\n                      ? t('scenarioConfig.configure')\n                      : t('scenarioConfig.setup')}\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => handleConfigure(scenario)}\n                    className=\"flex items-center justify-center px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium transition-colors\"\n                  >\n                    <ChevronRight className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n            </motion.div>\n          );\n        })}\n      </div>\n\n      {/* Config List */}\n      {configs && configs.length > 0 && (\n        <div className=\"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden\">\n          <div className=\"p-6 border-b border-slate-200 dark:border-slate-700\">\n            <h3 className=\"text-lg font-semibold text-slate-900 dark:text-slate-100\">\n              {t('scenarioConfig.configList')}\n            </h3>\n          </div>\n          <div className=\"divide-y divide-slate-200 dark:divide-slate-700\">\n            {configs.map((config) => (\n              <div\n                key={config.configId}\n                className=\"p-4 flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors\"\n              >\n                <div className=\"flex items-center gap-4\">\n                  <div\n                    className={`w-2 h-2 rounded-full ${\n                      config.isActive ? 'bg-green-500' : 'bg-slate-400'\n                    }`}\n                  />\n                  <div>\n                    <p className=\"font-medium text-slate-900 dark:text-slate-100\">\n                      {config.configName}\n                    </p>\n                    <p className=\"text-sm text-slate-500\">\n                      {t(scenarioTypeTranslationKeys[config.scenarioCode])} â€¢ {config.currencyUnit}\n                    </p>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-4 text-sm text-slate-500\">\n                  <span>{new Date(config.effectiveTime).toLocaleDateString()}</span>\n                  <button\n                    type=\"button\"\n                    className=\"p-2 hover:bg-slate-200 dark:hover:bg-slate-600 rounded-lg transition-colors\"\n                  >\n                    <Settings className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Drawer */}\n      <ScenarioConfigDrawer\n        isOpen={isDrawerOpen}\n        onClose={() => setIsDrawerOpen(false)}\n        scenario={selectedScenario}\n      />\n    </div>\n  );\n}\n"],"names":["scenarioIcons","ScenarioType","Bus","Building2","ShoppingBag","GraduationCap","scenarioColors","ScenarioConfig","useTranslation","selectedScenario","setSelectedScenario","useState","isDrawerOpen","setIsDrawerOpen","configs","isLoading","useScenarioConfigs","handleConfigure","scenario","getActiveConfig","c","jsxs","jsx","Icon","activeConfig","motion","scenarioTypeTranslationKeys","CheckCircle","scenarioTypeDescriptionKeys","Settings","ChevronRight","config","ScenarioConfigDrawer"],"mappings":"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"}