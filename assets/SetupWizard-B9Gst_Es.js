import{j as e,m as d,an as N,Y as k,o as h,d as w,Z as C,A as F,_ as E,G as M,C as P}from"./index-DDsxxg9X.js";import{b as U,r as m}from"./vendor-wU5nTCpQ.js";import{u as $}from"./i18n-DUSRnG8c.js";import{D as z}from"./database-BpVP3h2B.js";import{C as p}from"./check-BhuA9e2k.js";import{S as O}from"./save-CJkaezpA.js";import"./ui--kwEMLq0.js";import"./charts-BXxqj8Ps.js";const o=[{id:"welcome",title:"welcome",description:"welcomeDesc",icon:N},{id:"general",title:"general",description:"generalDesc",icon:k},{id:"security",title:"security",description:"securityDesc",icon:h},{id:"payment",title:"payment",description:"paymentDesc",icon:w},{id:"notifications",title:"notifications",description:"notificationsDesc",icon:C},{id:"system",title:"system",description:"systemDesc",icon:z},{id:"review",title:"review",description:"reviewDesc",icon:p}],R={general:{systemName:"TransitCard Pro",defaultLanguage:"en",timezone:"Asia/Shanghai",currency:"CNY"},security:{enable2FA:!0,sessionTimeout:!0,auditLogging:!0,minPasswordLength:12,passwordExpiration:90},payment:{baseFare:3,maxFare:15,transferWindow:90,transferDiscount:50,acceptedMethods:["cash","creditCard","mobilePayment","qrCode"]},notifications:{terminalOffline:!0,failedTxn:!0,securityEvents:!0,dailySummary:!1,blacklistUpdates:!0},system:{syncInterval:15,heartbeatInterval:30,offlineLimit:100,maxOfflineAmount:50,txnHistoryRetention:2555,auditLogRetention:3650}},J=()=>{const{t,i18n:D}=$(),u=U(),[r,g]=m.useState(0),[a,b]=m.useState(R),[f,y]=m.useState(!1),[j,S]=m.useState(!1),T=()=>{r<o.length-1&&g(r+1)},L=()=>{r>0&&g(r-1)},I=async()=>{y(!0),await new Promise(s=>setTimeout(s,1500)),y(!1),S(!0),setTimeout(()=>{u("/settings")},2e3)},l=(s,i,c)=>{b(n=>({...n,[s]:{...n[s],[i]:c}}))},A=s=>{b(i=>({...i,payment:{...i.payment,acceptedMethods:i.payment.acceptedMethods.includes(s)?i.payment.acceptedMethods.filter(c=>c!==s):[...i.payment.acceptedMethods,s]}}))},v=(r+1)/o.length*100;return e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-dark-900 dark:to-dark-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-4xl",children:[e.jsxs(d.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},className:"bg-white dark:bg-dark-800 rounded-2xl shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-primary-600 to-accent-600 p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:t("wizard.title")}),e.jsx("p",{className:"text-white/80 mt-1",children:t("wizard.subtitle")})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-3xl font-bold",children:[Math.round(v),"%"]}),e.jsx("p",{className:"text-white/80 text-sm",children:t("wizard.complete")})]})]}),e.jsx("div",{className:"mt-4 h-2 bg-white/20 rounded-full overflow-hidden",children:e.jsx(d.div,{className:"h-full bg-white rounded-full",initial:{width:0},animate:{width:`${v}%`},transition:{duration:.5}})})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-64 bg-slate-50 dark:bg-dark-700/50 p-4 border-r border-slate-200 dark:border-dark-600",children:e.jsx("div",{className:"space-y-2",children:o.map((s,i)=>{const c=s.icon,n=i===r,x=i<r;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg transition-all ${n?"bg-primary-500/10 text-primary-600 dark:text-primary-400":x?"text-success":"text-slate-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${n?"bg-primary-500 text-white":x?"bg-success text-white":"bg-slate-200 dark:bg-dark-600"}`,children:x?e.jsx(p,{className:"w-4 h-4"}):e.jsx(c,{className:"w-4 h-4"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium text-sm",children:t(`wizard.steps.${s.title}`)})})]},s.id)})})}),e.jsxs("div",{className:"flex-1 p-6",children:[e.jsx(F,{mode:"wait",children:j?e.jsxs(d.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-success/10 rounded-full flex items-center justify-center mb-6",children:e.jsx(p,{className:"w-10 h-10 text-success"})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:t("wizard.completedTitle")}),e.jsx("p",{className:"text-slate-500",children:t("wizard.completedDesc")})]},"completed"):e.jsxs(d.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:[r===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-20 h-20 bg-primary-500/10 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(N,{className:"w-10 h-10 text-primary-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-4",children:t("wizard.welcomeTitle")}),e.jsx("p",{className:"text-slate-500 max-w-md mx-auto mb-8",children:t("wizard.welcomeText")}),e.jsx("div",{className:"grid grid-cols-2 gap-4 max-w-md mx-auto",children:[{icon:k,label:t("wizard.feature1")},{icon:h,label:t("wizard.feature2")},{icon:w,label:t("wizard.feature3")},{icon:C,label:t("wizard.feature4")}].map((s,i)=>e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-dark-700 rounded-lg flex items-center gap-3",children:[e.jsx(s.icon,{className:"w-5 h-5 text-primary-500"}),e.jsx("span",{className:"text-sm font-medium",children:s.label})]},i))})]}),r===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:t("wizard.generalTitle")}),e.jsx("p",{className:"text-slate-500",children:t("wizard.generalDesc")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:t("settings.general.systemName")}),e.jsx("input",{type:"text",value:a.general.systemName,onChange:s=>l("general","systemName",s.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:t("settings.general.defaultCurrency")}),e.jsxs("select",{value:a.general.currency,onChange:s=>l("general","currency",s.target.value),className:"input-field",children:[e.jsx("option",{value:"CNY",children:"CNY - Chinese Yuan"}),e.jsx("option",{value:"USD",children:"USD - US Dollar"}),e.jsx("option",{value:"EUR",children:"EUR - Euro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:t("settings.general.defaultLanguage")}),e.jsxs("select",{value:a.general.defaultLanguage,onChange:s=>{l("general","defaultLanguage",s.target.value),D.changeLanguage(s.target.value)},className:"input-field",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"zh",children:"中文"}),e.jsx("option",{value:"fr",children:"Français"}),e.jsx("option",{value:"es",children:"Español"}),e.jsx("option",{value:"ar",children:"العربية"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:t("settings.general.timezone")}),e.jsxs("select",{value:a.general.timezone,onChange:s=>l("general","timezone",s.target.value),className:"input-field",children:[e.jsx("option",{value:"Asia/Shanghai",children:"Asia/Shanghai (GMT+8)"}),e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/Sao_Paulo",children:"America/Sao_Paulo (GMT-3)"})]})]})]})]}),r===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:t("wizard.securityTitle")}),e.jsx("p",{className:"text-slate-500",children:t("wizard.securityDesc")})]}),e.jsx("div",{className:"space-y-4",children:[{key:"enable2FA",label:"2fa",desc:"2faDesc",icon:h},{key:"sessionTimeout",label:"sessionTimeout",desc:"sessionTimeoutDesc",icon:E},{key:"auditLogging",label:"auditLogging",desc:"auditLoggingDesc",icon:z}].map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-dark-700/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s.icon,{className:"w-5 h-5 text-primary-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t(`settings.security.${s.label}`)}),e.jsx("p",{className:"text-sm text-slate-500",children:t(`settings.security.${s.desc}`)})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:a.security[s.key],onChange:i=>l("security",s.key,i.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 dark:bg-dark-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-500"})]})]},s.key))}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:t("settings.security.minLength")}),e.jsx("input",{type:"number",value:a.security.minPasswordLength,onChange:s=>l("security","minPasswordLength",parseInt(s.target.value)),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:t("settings.security.expiration")}),e.jsx("input",{type:"number",value:a.security.passwordExpiration,onChange:s=>l("security","passwordExpiration",parseInt(s.target.value)),className:"input-field"})]})]})]}),r===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:t("wizard.paymentTitle")}),e.jsx("p",{className:"text-slate-500",children:t("wizard.paymentDesc")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:t("settings.payment.baseFare")}),e.jsx("input",{type:"number",value:a.payment.baseFare,onChange:s=>l("payment","baseFare",parseFloat(s.target.value)),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:t("settings.payment.maxFare")}),e.jsx("input",{type:"number",value:a.payment.maxFare,onChange:s=>l("payment","maxFare",parseFloat(s.target.value)),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:t("settings.payment.transferWindow")}),e.jsx("input",{type:"number",value:a.payment.transferWindow,onChange:s=>l("payment","transferWindow",parseInt(s.target.value)),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:t("settings.payment.transferDiscount")}),e.jsx("input",{type:"number",value:a.payment.transferDiscount,onChange:s=>l("payment","transferDiscount",parseInt(s.target.value)),className:"input-field"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-3",children:t("settings.payment.acceptedMethods")}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:["cash","creditCard","mobilePayment","qrCode"].map(s=>e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${a.payment.acceptedMethods.includes(s)?"bg-primary-500/10 border border-primary-500/30":"bg-slate-50 dark:bg-dark-700/30 border border-transparent"}`,children:[e.jsx("input",{type:"checkbox",checked:a.payment.acceptedMethods.includes(s),onChange:()=>A(s),className:"w-4 h-4 rounded border-slate-300 text-primary-500 focus:ring-primary-500"}),e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:t(`paymentMethods.${s}`)})]},s))})]})]}),r===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:t("wizard.notificationsTitle")}),e.jsx("p",{className:"text-slate-500",children:t("wizard.notificationsDesc")})]}),e.jsx("div",{className:"space-y-3",children:[{key:"terminalOffline",label:"terminalOffline",desc:"terminalOfflineDesc"},{key:"failedTxn",label:"failedTxn",desc:"failedTxnDesc"},{key:"securityEvents",label:"securityEvents",desc:"securityEventsDesc"},{key:"dailySummary",label:"dailySummary",desc:"dailySummaryDesc"},{key:"blacklistUpdates",label:"blacklistUpdates",desc:"blacklistUpdatesDesc"}].map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-dark-700/30 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t(`settings.notifications.${s.label}`)}),e.jsx("p",{className:"text-sm text-slate-500",children:t(`settings.notifications.${s.desc}`)})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:a.notifications[s.key],onChange:i=>l("notifications",s.key,i.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 dark:bg-dark-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-500"})]})]},s.key))})]}),r===5&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:t("wizard.systemTitle")}),e.jsx("p",{className:"text-slate-500",children:t("wizard.systemDesc")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:t("settings.system.syncInterval")}),e.jsx("input",{type:"number",value:a.system.syncInterval,onChange:s=>l("system","syncInterval",parseInt(s.target.value)),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:t("settings.system.heartbeatInterval")}),e.jsx("input",{type:"number",value:a.system.heartbeatInterval,onChange:s=>l("system","heartbeatInterval",parseInt(s.target.value)),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:t("settings.system.offlineLimit")}),e.jsx("input",{type:"number",value:a.system.offlineLimit,onChange:s=>l("system","offlineLimit",parseInt(s.target.value)),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:t("settings.system.maxOfflineAmount")}),e.jsx("input",{type:"number",value:a.system.maxOfflineAmount,onChange:s=>l("system","maxOfflineAmount",parseInt(s.target.value)),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:t("settings.system.txnHistory")}),e.jsx("input",{type:"number",value:a.system.txnHistoryRetention,onChange:s=>l("system","txnHistoryRetention",parseInt(s.target.value)),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 dark:text-slate-400 mb-2",children:t("settings.system.auditLogs")}),e.jsx("input",{type:"number",value:a.system.auditLogRetention,onChange:s=>l("system","auditLogRetention",parseInt(s.target.value)),className:"input-field"})]})]})]}),r===6&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:t("wizard.reviewTitle")}),e.jsx("p",{className:"text-slate-500",children:t("wizard.reviewDesc")})]}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:Object.entries(a).map(([s,i])=>e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-dark-700/30 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3 capitalize",children:t(`settings.tabs.${s}`)}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:Object.entries(i).map(([c,n])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-slate-500",children:[c,":"]}),e.jsx("span",{className:"font-medium",children:Array.isArray(n)?n.join(", "):String(n)})]},c))})]},s))})]})]},r)}),!j&&e.jsxs("div",{className:"flex justify-between pt-6 mt-6 border-t border-slate-200 dark:border-dark-600",children:[e.jsxs("button",{onClick:L,disabled:r===0,className:"btn-secondary flex items-center gap-2 disabled:opacity-50",children:[e.jsx(M,{className:"w-4 h-4"}),t("wizard.previous")]}),r===o.length-1?e.jsx("button",{onClick:I,disabled:f,className:"btn-primary flex items-center gap-2 disabled:opacity-50",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),t("wizard.saving")]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-4 h-4"}),t("wizard.save")]})}):e.jsxs("button",{onClick:T,className:"btn-primary flex items-center gap-2",children:[t("wizard.next"),e.jsx(P,{className:"w-4 h-4"})]})]})]})]})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{onClick:()=>u("/settings"),className:"text-sm text-slate-500 hover:text-slate-700 dark:hover:text-slate-300",children:t("wizard.skipWizard")})})]})})};export{J as default};
//# sourceMappingURL=SetupWizard-B9Gst_Es.js.map
