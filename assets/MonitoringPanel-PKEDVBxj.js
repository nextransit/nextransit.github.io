import{F as f,e as o,z as x,j as e,B as m,a7 as y,A as k,m as r,H as p}from"./index-agy4sqqB.js";import{r as l}from"./vendor-wU5nTCpQ.js";import{u as w}from"./i18n-DUSRnG8c.js";import{M as h}from"./map-pin-BhcHLfss.js";import"./ui--kwEMLq0.js";import"./charts-BXxqj8Ps.js";const A=()=>[{id:"1",type:"critical",message:"车辆 粤B12345 超员警告",vehicleId:"v1",time:new Date},{id:"2",type:"warning",message:"线路 101 延误 15 分钟",time:new Date(Date.now()-3e5)},{id:"3",type:"info",message:"车辆 粤B67890 已完成保养",vehicleId:"v2",time:new Date(Date.now()-6e5)}],B=()=>[{id:"v1",plateNumber:"粤B12345",routeName:"101路",lat:22.5431,lng:114.0579,speed:35,status:"normal"},{id:"v2",plateNumber:"粤B67890",routeName:"202路",lat:22.5521,lng:114.0679,speed:0,status:"stopped"},{id:"v3",plateNumber:"粤B11111",routeName:"303路",lat:22.5321,lng:114.0479,speed:28,status:"delayed"}],C=()=>[{routeCode:"101",routeName:"101路",destination:"火车站",nextArrival:3,vehicleNumber:"粤B12345"},{routeCode:"202",routeName:"202路",destination:"科技园",nextArrival:8,vehicleNumber:"粤B67890"},{routeCode:"303",routeName:"303路",destination:"机场东",nextArrival:12,vehicleNumber:"粤B11111"}];function E(){const{t:a}=w(),[n,g]=l.useState(A()),[c]=l.useState(B()),[u]=l.useState(C()),[i,b]=l.useState("map");l.useEffect(()=>{const t=setInterval(()=>{if(Math.random()>.7){const s={id:Date.now().toString(),type:Math.random()>.5?"warning":"info",message:`车辆 粤B${Math.floor(Math.random()*9e4)+1e4} 状态更新`,time:new Date};g(v=>[s,...v.slice(0,9)])}},1e4);return()=>clearInterval(t)},[]);const N=[{label:a("transit.onlineVehiclesCount"),value:"24",icon:f,color:"success"},{label:a("transit.avgDepartureInterval"),value:"8",unit:a("transit.minutes"),icon:o,color:"primary"},{label:a("transit.abnormalRate"),value:"2.3%",icon:x,color:"warning"}],j=t=>{switch(t){case"critical":return"text-red-500 bg-red-500/10 border-red-500/20";case"warning":return"text-amber-500 bg-amber-500/10 border-amber-500/20";case"info":return"text-blue-500 bg-blue-500/10 border-blue-500/20"}},d=t=>{switch(t){case"normal":return"bg-green-500";case"delayed":return"bg-amber-500";case"stopped":return"bg-slate-400"}};return e.jsxs("div",{className:"w-80 bg-white dark:bg-dark-800 border-l border-slate-200 dark:border-dark-600 flex flex-col h-full overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-dark-600",children:e.jsxs("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5 text-primary-500"}),a("transit.monitoring")]})}),e.jsx("div",{className:"flex border-b border-slate-200 dark:border-dark-600",children:[{key:"map",icon:h},{key:"alerts",icon:m},{key:"kpi",icon:y},{key:"signage",icon:o}].map(({key:t,icon:s})=>e.jsx("button",{onClick:()=>b(t),className:`flex-1 p-3 flex justify-center transition-colors ${i===t?"bg-primary-500/10 text-primary-600 dark:text-primary-400 border-b-2 border-primary-500":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:e.jsx(s,{className:"w-5 h-5"})},t))}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs(k,{mode:"wait",children:[i==="map"&&e.jsxs(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-4 space-y-3",children:[e.jsxs("div",{className:"aspect-video bg-gradient-to-br from-slate-100 to-slate-200 dark:from-dark-700 dark:to-dark-600 rounded-lg flex items-center justify-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",children:e.jsx("div",{className:"w-full h-full",style:{background:"repeating-linear-gradient(0deg, transparent, transparent 20px, rgba(0,0,0,0.05) 20px, rgba(0,0,0,0.05) 21px), repeating-linear-gradient(90deg, transparent, transparent 20px, rgba(0,0,0,0.05) 20px, rgba(0,0,0,0.05) 21px)"}})}),c.map((t,s)=>e.jsx(r.div,{className:`absolute w-3 h-3 rounded-full ${d(t.status)}`,style:{left:`${30+s*20}%`,top:`${40+s*10}%`},animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:2,delay:s*.3}},t.id)),e.jsx(h,{className:"w-8 h-8 text-slate-400"})]}),e.jsx("p",{className:"text-xs text-slate-500 text-center",children:a("transit.realtimePosition")}),e.jsx("div",{className:"space-y-2",children:c.map(t=>e.jsxs("div",{className:"p-2 bg-slate-50 dark:bg-dark-700 rounded-lg flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${d(t.status)}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100 truncate",children:t.plateNumber}),e.jsx("p",{className:"text-xs text-slate-500",children:t.routeName})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-sm font-mono text-slate-700 dark:text-slate-300",children:[t.speed," km/h"]})})]},t.id))})]},"map"),i==="alerts"&&e.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-4 space-y-2",children:n.length===0?e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx(p,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:a("transit.noAlerts")})]}):n.map(t=>e.jsxs(r.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},className:`p-3 rounded-lg border ${j(t.type)}`,children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(m,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm",children:t.message}),e.jsx("p",{className:"text-xs opacity-70 mt-1",children:t.time.toLocaleTimeString()})]})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("button",{className:"text-xs px-2 py-1 rounded bg-white/50 dark:bg-dark-600 hover:bg-white dark:hover:bg-dark-500 transition-colors",children:a("transit.processAlert")}),e.jsx("button",{className:"text-xs px-2 py-1 rounded hover:bg-white/30 dark:hover:bg-dark-600 transition-colors",children:a("transit.ignoreAlert")})]})]},t.id))},"alerts"),i==="kpi"&&e.jsxs(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-4 space-y-3",children:[N.map((t,s)=>e.jsx("div",{className:"p-4 bg-slate-50 dark:bg-dark-700 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg bg-${t.color}-500/10`,children:e.jsx(t.icon,{className:`w-5 h-5 text-${t.color}-500`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:t.label}),e.jsxs("p",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:[t.value,t.unit&&e.jsx("span",{className:"text-sm font-normal ml-1",children:t.unit})]})]})]})},s)),e.jsx("div",{className:"p-4 bg-gradient-to-r from-green-500/10 to-emerald-500/10 rounded-lg border border-green-500/20",children:e.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400",children:[e.jsx(p,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:a("transit.allNormal")})]})})]},"kpi"),i==="signage"&&e.jsxs(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-4 space-y-3",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-2",children:a("transit.signagePreview")}),u.map((t,s)=>e.jsxs("div",{className:"p-3 bg-slate-900 dark:bg-dark-900 rounded-lg text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"px-2 py-0.5 bg-primary-500 rounded text-xs font-bold",children:t.routeCode}),e.jsxs("span",{className:"text-xs text-slate-400",children:[a("transit.destination"),": ",t.destination]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400",children:a("transit.nextArrival")}),e.jsxs("p",{className:"text-2xl font-bold text-green-400",children:[t.nextArrival," ",e.jsx("span",{className:"text-sm",children:a("transit.minutes")})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-400",children:a("transit.vehicleNumber")}),e.jsx("p",{className:"text-sm font-mono",children:t.vehicleNumber})]})]})]},s))]},"signage")]})})]})}export{E as MonitoringPanel,E as default};
//# sourceMappingURL=MonitoringPanel-PKEDVBxj.js.map
