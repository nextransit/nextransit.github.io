{"version":3,"file":"Transactions-2rneN9Lm.js","sources":["../../node_modules/lucide-react/dist/esm/icons/check-check.js","../../node_modules/lucide-react/dist/esm/icons/file-down.js","../../src/pages/Transactions.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckCheck = createLucideIcon(\"CheckCheck\", [\n  [\"path\", { d: \"M18 6 7 17l-5-5\", key: \"116fxf\" }],\n  [\"path\", { d: \"m22 10-7.5 7.5L13 16\", key: \"ke71qq\" }]\n]);\n\nexport { CheckCheck as default };\n//# sourceMappingURL=check-check.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileDown = createLucideIcon(\"FileDown\", [\n  [\n    \"path\",\n    { d: \"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\", key: \"1nnpy2\" }\n  ],\n  [\"polyline\", { points: \"14 2 14 8 20 8\", key: \"1ew0cm\" }],\n  [\"path\", { d: \"M12 18v-6\", key: \"17g6i2\" }],\n  [\"path\", { d: \"m9 15 3 3 3-3\", key: \"1npd3o\" }]\n]);\n\nexport { FileDown as default };\n//# sourceMappingURL=file-down.js.map\n","import { motion, AnimatePresence } from 'framer-motion'\nimport { useState, useEffect } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport {\n  ArrowLeftRight,\n  Download,\n  Filter,\n  Search,\n  Calendar,\n  ChevronLeft,\n  ChevronRight,\n  ArrowUpRight,\n  ArrowDownRight,\n  RefreshCw,\n  Loader2,\n  AlertCircle,\n  AlertTriangle,\n  RotateCcw,\n  CheckCircle,\n  FileText,\n  Check,\n  Columns,\n  Activity,\n  FileDown,\n  Eye,\n  ChevronDown,\n  Bus,\n  Wallet,\n  Shield,\n  MoreHorizontal,\n  Copy,\n  Clock,\n  Printer,\n  MapPin,\n  CheckCheck,\n  Square,\n  CheckSquare,\n  X,\n  CreditCard,\n} from 'lucide-react'\nimport { format, subDays } from 'date-fns'\nimport {\n  useTransactions,\n  useTransactionStats,\n  useExportTransactions,\n  useAnomalies,\n  useAcknowledgeAnomaly,\n  useResolveAnomaly,\n} from '../hooks/useTransactions'\nimport type { Transaction, TransactionFilters, TransactionAnomaly } from '../types/transactions'\nimport { useHelp } from '../contexts/HelpContext'\nimport { showInfoToast } from '../components/ui/Toast'\n\nconst transactionTypes = ['All Types', 'PURCHASE', 'RECHARGE', 'REFUND', 'TRANSFER', 'ADJUSTMENT']\nconst transactionStatuses = ['All Status', 'COMPLETED', 'PENDING', 'PROCESSING', 'FAILED', 'CANCELLED']\n\nfunction Transactions() {\n  const { t } = useTranslation()\n  const { trackAction } = useHelp()\n  const [selectedType, setSelectedType] = useState('All Types')\n\n  useEffect(() => {\n    trackAction({\n      type: 'view_page',\n      page: '/transactions',\n      timestamp: Date.now()\n    })\n  }, [trackAction])\n  const [selectedStatus, setSelectedStatus] = useState('All Status')\n  const [searchQuery, setSearchQuery] = useState('')\n  const [currentPage, setCurrentPage] = useState(1)\n  const [dateRange, setDateRange] = useState({\n    startDate: format(subDays(new Date(), 7), 'yyyy-MM-dd'),\n    endDate: format(new Date(), 'yyyy-MM-dd'),\n  })\n  const [actionError, setActionError] = useState<string | null>(null)\n  const [selectedTx, setSelectedTx] = useState<Transaction | null>(null)\n  const [showDetailsDrawer, setShowDetailsDrawer] = useState(false)\n  const [showExportModal, setShowExportModal] = useState(false)\n  const [exportFormat, setExportFormat] = useState<'CSV' | 'PDF'>('CSV')\n  const [selectedColumns, setSelectedColumns] = useState<string[]>(['id', 'cardId', 'type', 'amount', 'status', 'timestamp'])\n  const [pageSize, setPageSize] = useState(10)\n  // Batch selection state\n  const [selectedIds, setSelectedIds] = useState<string[]>([])\n  // Copy success notification\n  const [copiedId, setCopiedId] = useState<string | null>(null)\n  // Action menu dropdown\n  const [openActionMenuId, setOpenActionMenuId] = useState<string | null>(null)\n\n  // Mock terminal health alert data\n  const [terminalAlerts] = useState([\n    { id: '1', terminalId: 'TERM-102', message: '失败率异常升高 (15%)', severity: 'warning' }\n  ])\n\n  const filters: TransactionFilters = {\n    type: selectedType === 'All Types' ? undefined : (selectedType as any),\n    status: selectedStatus === 'All Status' ? undefined : (selectedStatus as any),\n    search: searchQuery || undefined,\n    page: currentPage,\n    limit: pageSize,\n    startDate: dateRange.startDate,\n    endDate: dateRange.endDate,\n  }\n\n  const { data: transactionsData, isLoading, isError, error, refetch } = useTransactions(filters)\n  const { data: statsData } = useTransactionStats(dateRange.startDate, dateRange.endDate)\n  const { data: anomaliesData } = useAnomalies('OPEN', {\n    retry: false,\n    enabled: false,\n  })\n  const exportMutation = useExportTransactions()\n  const acknowledgeMutation = useAcknowledgeAnomaly()\n  const resolveMutation = useResolveAnomaly()\n\n  const handleExport = async () => {\n    try {\n      const blob = await exportMutation.mutateAsync(filters)\n      const url = window.URL.createObjectURL(blob)\n      const a = document.createElement('a')\n      a.href = url\n      a.download = `transactions_${format(new Date(), 'yyyy-MM-dd')}.csv`\n      document.body.appendChild(a)\n      a.click()\n      window.URL.revokeObjectURL(url)\n      document.body.removeChild(a)\n    } catch (err: any) {\n      setActionError(err.response?.data?.message || t('transactions.exportError'))\n    }\n  }\n\n  const handleAcknowledgeAnomaly = async (anomalyId: string) => {\n    try {\n      await acknowledgeMutation.mutateAsync(anomalyId)\n    } catch (err: any) {\n      setActionError(err.response?.data?.message || t('transactions.acknowledgeError'))\n    }\n  }\n\n  const handleResolveAnomaly = async (anomalyId: string) => {\n    const resolution = window.prompt(t('transactions.enterResolution'))\n    if (!resolution) return\n    try {\n      await resolveMutation.mutateAsync({ anomalyId, resolution })\n    } catch (err: any) {\n      setActionError(err.response?.data?.message || t('transactions.resolveError'))\n    }\n  }\n\n  // Copy transaction ID to clipboard\n  const copyTransactionId = async (id: string) => {\n    try {\n      await navigator.clipboard.writeText(id)\n      setCopiedId(id)\n      setTimeout(() => setCopiedId(null), 2000)\n    } catch (err) {\n      console.error('Failed to copy:', err)\n    }\n  }\n\n  // Truncate transaction ID display\n  const truncateId = (id: string) => {\n    if (id.length <= 14) return id\n    return `${id.slice(0, 8)}...${id.slice(-6)}`\n  }\n\n  // Batch selection toggle\n  const toggleSelectAll = () => {\n    if (selectedIds.length === transactions.length) {\n      setSelectedIds([])\n    } else {\n      setSelectedIds(transactions.map(tx => tx.id))\n    }\n  }\n\n  const toggleSelectOne = (id: string) => {\n    setSelectedIds(prev =>\n      prev.includes(id) ? prev.filter(i => i !== id) : [...prev, id]\n    )\n  }\n\n  // Check if large transaction (>100)\n  const isLargeAmount = (amount: number) => Math.abs(amount) > 100\n\n  // Card branding detection\n  const getCardBranding = (cardNumber?: string) => {\n    if (!cardNumber) return { icon: <Wallet className=\"w-3.5 h-3.5\" />, label: 'Standard', color: 'text-slate-400' }\n    if (cardNumber.startsWith('8800')) return { icon: <Bus className=\"w-3.5 h-3.5\" />, label: 'Transit', color: 'text-primary-500' }\n    if (cardNumber.startsWith('4') || cardNumber.startsWith('5')) return { icon: <CreditCard className=\"w-3.5 h-3.5\" />, label: 'Bank', color: 'text-blue-500' }\n    return { icon: <Shield className=\"w-3.5 h-3.5\" />, label: 'Secure', color: 'text-accent-500' }\n  }\n\n  // Quick Presets\n  const applyPreset = (preset: string) => {\n    const now = new Date()\n    switch (preset) {\n      case 'peak':\n        // Mock peak hour filtering\n        setDateRange({\n          startDate: format(now, 'yyyy-MM-dd'),\n          endDate: format(now, 'yyyy-MM-dd')\n        })\n        setSearchQuery('Peak Hour') // Just for visual feedback in mock\n        break\n      case 'failed24h':\n        setSelectedStatus('FAILED')\n        setDateRange({\n          startDate: format(subDays(now, 1), 'yyyy-MM-dd'),\n          endDate: format(now, 'yyyy-MM-dd')\n        })\n        break\n      case 'large':\n        setSearchQuery('> 100')\n        break\n    }\n  }\n\n  const transactions = transactionsData?.data || []\n  const defaultStats = {\n    totalTransactions: 0,\n    totalAmount: 0,\n    successfulTransactions: 0,\n    failedTransactions: 0,\n    pendingTransactions: 0,\n    averageAmount: 0,\n    totalRechargeAmount: 0,\n    totalPurchaseAmount: 0,\n    totalRefundAmount: 0,\n  }\n  const stats = { ...defaultStats, ...(statsData || {}) }\n\n  // Safe number conversion function\n  const safeNumber = (val: any): number => {\n    const num = Number(val)\n    return isNaN(num) ? 0 : num\n  }\n\n  const anomalies = Array.isArray(anomaliesData) ? anomaliesData : []\n  // Fix: calculate totalPages from total and limit\n  const totalPages = transactionsData?.total && filters.limit\n    ? Math.ceil(transactionsData.total / filters.limit)\n    : 1\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-primary-600\" />\n      </div>\n    )\n  }\n\n  if (isError) {\n    return (\n      <div className=\"flex flex-col items-center justify-center h-64 gap-4\">\n        <AlertCircle className=\"w-12 h-12 text-error\" />\n        <p className=\"text-slate-600 dark:text-slate-400\">\n          {error instanceof Error ? error.message : t('common.loadError')}\n        </p>\n        <button onClick={() => refetch()} className=\"btn-secondary flex items-center gap-2\">\n          <RotateCcw className=\"w-4 h-4\" />\n          {t('common.retry')}\n        </button>\n      </div>\n    )\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.5 }}\n      className=\"space-y-6\"\n      data-help=\"transaction-table\"\n    >\n      {actionError && (\n        <div className=\"p-4 bg-error/10 border border-error/20 rounded-lg flex items-center gap-3 text-error\">\n          <AlertCircle className=\"w-5 h-5\" />\n          <span>{actionError}</span>\n          <button onClick={() => setActionError(null)} className=\"ml-auto text-sm hover:underline\">\n            {t('common.dismiss')}\n          </button>\n        </div>\n      )}\n\n      {/* 终端健康度实时预警 (P2) */}\n      {terminalAlerts.length > 0 && (\n        <motion.div\n          initial={{ opacity: 0, height: 0 }}\n          animate={{ opacity: 1, height: 'auto' }}\n          className=\"p-4 bg-amber-500/10 border border-amber-500/20 rounded-xl flex items-center gap-4\"\n        >\n          <div className=\"bg-amber-500/20 p-2 rounded-lg\">\n            <Activity className=\"w-5 h-5 text-amber-500 animate-pulse\" />\n          </div>\n          <div className=\"flex-1\">\n            <p className=\"text-sm font-semibold text-amber-600 dark:text-amber-400\">\n              {t('transactions.alerts.terminalHealth')}\n            </p>\n            <p className=\"text-xs text-amber-600/80\">\n              {t('transactions.alerts.message', { terminalId: terminalAlerts[0].terminalId, message: terminalAlerts[0].message })}\n            </p>\n          </div>\n          <button className=\"text-xs font-bold text-amber-600 underline hover:no-underline\">\n            {t('transactions.alerts.viewDetail')}\n          </button>\n        </motion.div>\n      )}\n\n      {anomalies.length > 0 && (\n        <div className=\"p-4 bg-warning/10 border border-warning/20 rounded-lg\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <AlertTriangle className=\"w-5 h-5 text-warning\" />\n            <span className=\"font-semibold\">{t('transactions.anomaliesDetected', { count: anomalies.length })}</span>\n          </div>\n          <div className=\"space-y-2\">\n            {anomalies.slice(0, 3).map((anomaly) => (\n              <div key={anomaly.id} className=\"flex items-center justify-between p-2 bg-white dark:bg-dark-800 rounded\">\n                <div>\n                  <span className=\"font-medium\">{anomaly.title}</span>\n                  <span className=\"text-sm text-slate-500 ml-2\">{anomaly.description}</span>\n                </div>\n                <div className=\"flex gap-2\">\n                  <button\n                    onClick={() => handleAcknowledgeAnomaly(anomaly.id)}\n                    className=\"px-2 py-1 text-xs rounded bg-slate-100 hover:bg-slate-200\"\n                  >\n                    {t('transactions.acknowledge')}\n                  </button>\n                  <button\n                    onClick={() => handleResolveAnomaly(anomaly.id)}\n                    className=\"px-2 py-1 text-xs rounded bg-success/10 text-success hover:bg-success/20\"\n                  >\n                    {t('transactions.resolve')}\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-display font-bold text-slate-900 dark:text-slate-100\">{t('transactions.title')}</h1>\n          <p className=\"text-slate-500 dark:text-slate-400 mt-1\">{t('transactions.subtitle')}</p>\n        </div>\n        <div className=\"flex gap-3\" data-help=\"export-function\">\n          <button onClick={() => refetch()} className=\"btn-secondary flex items-center gap-2\">\n            <RefreshCw className=\"w-4 h-4\" />\n            {t('transactions.sync')}\n          </button>\n          <button\n            onClick={() => setShowExportModal(true)}\n            className=\"btn-primary flex items-center gap-2\"\n          >\n            <FileDown className=\"w-4 h-4\" />\n            {t('transactions.exportAction')}\n          </button>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div\n          className=\"stat-card cursor-pointer hover:border-primary-500/50 transition-colors\"\n          onClick={() => setSelectedStatus('All Status')}\n        >\n          <p className=\"text-sm text-slate-500 dark:text-slate-400\">{t('transactions.stats.todayTurnover')}</p>\n          <p className=\"text-2xl font-display font-bold text-slate-900 dark:text-slate-100 mt-1\">\n            ¥{safeNumber(stats.totalAmount).toLocaleString()}\n          </p>\n        </div>\n        <div\n          className=\"stat-card cursor-pointer hover:border-success-500/50 transition-colors\"\n          onClick={() => setSelectedStatus('COMPLETED')}\n        >\n          <div className=\"flex justify-between items-start\">\n            <p className=\"text-sm text-slate-500 dark:text-slate-400\">{t('transactions.stats.settlementRate')}</p>\n            <span className=\"text-xs font-medium text-success bg-success/10 px-1.5 py-0.5 rounded\">\n              {stats.totalTransactions > 0 ? Math.round((stats.successfulTransactions / stats.totalTransactions) * 100) : 100}%\n            </span>\n          </div>\n          <p className=\"text-2xl font-display font-bold text-success mt-1\">{stats.successfulTransactions}</p>\n        </div>\n        <div\n          className=\"stat-card cursor-pointer hover:border-error-500/50 transition-colors\"\n          onClick={() => setSelectedStatus('FAILED')}\n        >\n          <p className=\"text-sm text-slate-500 dark:text-slate-400\">{t('transactions.stats.failedAlert')}</p>\n          <p className=\"text-2xl font-display font-bold text-error mt-1\">{stats.failedTransactions}</p>\n        </div>\n        <div className=\"stat-card\">\n          <p className=\"text-sm text-slate-500 dark:text-slate-400\">{t('transactions.stats.unprocessed')}</p>\n          <p className=\"text-2xl font-display font-bold text-warning mt-1\">{stats.pendingTransactions}</p>\n        </div>\n      </div>\n      <div className=\"flex flex-wrap items-center gap-2 mb-2 p-1\">\n        <span className=\"text-secondary text-slate-400 mr-2 flex items-center gap-1.5\">\n          <Filter className=\"w-3.5 h-3.5\" />\n          {t('transactions.presets.title') || 'Quick Presets'}:\n        </span>\n        {[\n          { id: 'peak', label: t('transactions.presets.peakHour') || 'Peak Hours (7-9)', icon: <Clock className=\"w-3.5 h-3.5\" /> },\n          { id: 'failed24h', label: t('transactions.presets.failed24h') || 'Last 24h Alerts', icon: <AlertTriangle className=\"w-3.5 h-3.5\" /> },\n          { id: 'large', label: t('transactions.presets.largeAmount') || 'High Value (>¥100)', icon: <ArrowUpRight className=\"w-3.5 h-3.5\" /> }\n        ].map(preset => (\n          <button\n            key={preset.id}\n            onClick={() => applyPreset(preset.id)}\n            className=\"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium bg-white dark:bg-dark-800 text-slate-600 dark:text-slate-300 rounded-full border border-slate-200 dark:border-dark-600 hover:border-primary-500/50 hover:text-primary-500 transition-all shadow-sm\"\n          >\n            {preset.icon}\n            {preset.label}\n          </button>\n        ))}\n      </div>\n\n      <div className=\"glass-panel p-5\" data-help=\"transaction-filters\">\n        <div className=\"flex flex-wrap items-center gap-4\">\n          <div className=\"flex-1 min-w-[300px] relative\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400 dark:text-slate-500\" />\n            <input\n              placeholder={t('transactions.searchPlaceholder')}\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-dark-900 border border-slate-200 dark:border-dark-600 rounded-lg text-slate-900 dark:text-slate-200 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:border-primary-500/50\"\n            />\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <Filter className=\"w-5 h-5 text-slate-400\" />\n            <select\n              value={selectedType}\n              onChange={(e) => setSelectedType(e.target.value)}\n              className=\"px-4 py-2 bg-slate-50 dark:bg-dark-900 border border-slate-200 dark:border-dark-600 rounded-lg text-slate-900 dark:text-slate-200 focus:outline-none focus:border-primary-500/50\"\n            >\n              {transactionTypes.map((type) => (\n                <option key={type} value={type}>\n                  {type === 'All Types' ? t('transactions.allTypes') : t(`transactions.types.${type}`)}\n                </option>\n              ))}\n            </select>\n\n            <select\n              value={selectedStatus}\n              onChange={(e) => setSelectedStatus(e.target.value)}\n              className=\"px-4 py-2 bg-slate-50 dark:bg-dark-900 border border-slate-200 dark:border-dark-600 rounded-lg text-slate-900 dark:text-slate-200 focus:outline-none focus:border-primary-500/50\"\n            >\n              {transactionStatuses.map((status) => (\n                <option key={status} value={status}>\n                  {status === 'All Status' ? t('transactions.allStatus') : t(`transactions.status.${status}`)}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <Calendar className=\"w-4 h-4 text-slate-400\" />\n            <input\n              type=\"date\"\n              value={dateRange.startDate}\n              onChange={(e) => setDateRange({ ...dateRange, startDate: e.target.value })}\n              className=\"px-3 py-2 bg-slate-50 dark:bg-dark-900 border border-slate-200 dark:border-dark-600 rounded-lg text-slate-900 dark:text-slate-200 focus:outline-none focus:border-primary-500/50\"\n            />\n            <span className=\"text-slate-400\">-</span>\n            <input\n              type=\"date\"\n              value={dateRange.endDate}\n              onChange={(e) => setDateRange({ ...dateRange, endDate: e.target.value })}\n              className=\"px-3 py-2 bg-slate-50 dark:bg-dark-900 border border-slate-200 dark:border-dark-600 rounded-lg text-slate-900 dark:text-slate-200 focus:outline-none focus:border-primary-500/50\"\n            />\n          </div>\n        </div>\n      </div>\n\n      <div className=\"glass-panel overflow-hidden\">\n        {/* 批量操作栏 */}\n        {selectedIds.length > 0 && (\n          <div className=\"px-4 py-3 bg-primary-50 dark:bg-primary-900/20 border-b border-primary-200 dark:border-primary-800 flex items-center justify-between\">\n            <span className=\"text-sm font-medium text-primary-700 dark:text-primary-300\">\n              {t('transactions.batchSelected', { count: selectedIds.length })}\n            </span>\n            <div className=\"flex gap-2\">\n              <button\n                onClick={() => handleExport()}\n                className=\"px-3 py-1.5 text-xs font-medium bg-primary-100 dark:bg-primary-800 text-primary-700 dark:text-primary-200 rounded-lg hover:bg-primary-200 dark:hover:bg-primary-700 transition-colors flex items-center gap-1\"\n              >\n                <FileDown className=\"w-3.5 h-3.5\" />\n                {t('transactions.batchExport')}\n              </button>\n              <button\n                onClick={() => showInfoToast(t('common.comingSoon'), t('transactions.markSuspiciousComingSoon'))}\n                className=\"px-3 py-1.5 text-xs font-medium bg-warning/10 text-warning rounded-lg hover:bg-warning/20 transition-colors flex items-center gap-1\"\n              >\n                <Shield className=\"w-3.5 h-3.5\" />\n                {t('transactions.markSuspicious')}\n              </button>\n              <button\n                onClick={() => setSelectedIds([])}\n                className=\"px-3 py-1.5 text-xs font-medium text-slate-500 hover:text-slate-700 transition-colors\"\n              >\n                {t('common.cancel')}\n              </button>\n            </div>\n          </div>\n        )}\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b border-slate-200 dark:border-dark-600\">\n                {/* 批量选择复选框 */}\n                <th className=\"table-header w-10 text-center\">\n                  <button\n                    onClick={toggleSelectAll}\n                    className=\"p-1 hover:bg-slate-100 dark:hover:bg-dark-700 rounded transition-colors\"\n                  >\n                    {selectedIds.length === transactions.length && transactions.length > 0 ? (\n                      <CheckSquare className=\"w-4 h-4 text-primary-500\" />\n                    ) : (\n                      <Square className=\"w-4 h-4 text-slate-400\" />\n                    )}\n                  </button>\n                </th>\n                <th className=\"table-header\">{t('transactions.table.transactionId')}</th>\n                <th className=\"table-header\">{t('transactions.table.cardId')}</th>\n                <th className=\"table-header\">{t('transactions.table.type')}</th>\n                <th className=\"table-header\">{t('transactions.table.amount')}</th>\n                <th className=\"table-header\">{t('transactions.table.terminal')}</th>\n                <th className=\"table-header\">{t('transactions.table.status')}</th>\n                <th className=\"table-header\">{t('transactions.table.reconciliation')}</th>\n                <th className=\"table-header\">{t('transactions.table.timestamp')}</th>\n                <th className=\"table-header\">{t('transactions.table.actions')}</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-slate-200 dark:divide-dark-600\">\n              {transactions.map((tx, index) => (\n                <motion.tr\n                  key={tx.id}\n                  initial={{ opacity: 0, x: -20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  transition={{ delay: index * 0.05 }}\n                  className={`group transition-all duration-200 cursor-pointer border-l-4 ${selectedIds.includes(tx.id)\n                    ? 'bg-primary-50/50 dark:bg-primary-900/10 border-primary-500'\n                    : tx.status === 'FAILED'\n                      ? 'bg-rose-50/30 dark:bg-rose-900/10 border-rose-400 hover:bg-rose-50/50'\n                      : index % 2 === 0\n                        ? 'bg-slate-50/50 dark:bg-dark-700/20 border-transparent hover:bg-slate-100/50'\n                        : 'bg-white dark:bg-dark-800 border-transparent hover:bg-slate-100/50'\n                    }`}\n                  onClick={() => {\n                    setSelectedTx(tx)\n                    setShowDetailsDrawer(true)\n                  }}\n                >\n                  {/* 复选框 */}\n                  <td className=\"px-6 py-6 whitespace-nowrap text-sm text-center\" onClick={(e) => e.stopPropagation()}>\n                    <button\n                      onClick={() => toggleSelectOne(tx.id)}\n                      className=\"p-1 hover:bg-slate-100 dark:hover:bg-dark-700 rounded transition-colors\"\n                    >\n                      {selectedIds.includes(tx.id) ? (\n                        <CheckSquare className=\"w-4 h-4 text-primary-500\" />\n                      ) : (\n                        <Square className=\"w-4 h-4 text-slate-400\" />\n                      )}\n                    </button>\n                  </td>\n                  {/* 交易ID - 截断显示 + 复制 */}\n                  <td className=\"table-cell\" onClick={(e) => e.stopPropagation()}>\n                    <div className=\"flex items-center gap-1.5 group\">\n                      <span className=\"font-mono text-sm text-primary-600 dark:text-primary-400\" title={tx.id}>\n                        {truncateId(tx.id)}\n                      </span>\n                      <button\n                        onClick={() => copyTransactionId(tx.id)}\n                        className=\"opacity-0 group-hover:opacity-100 p-1 hover:bg-slate-100 dark:hover:bg-dark-700 rounded transition-all\"\n                        title={t('transactions.copyId')}\n                      >\n                        {copiedId === tx.id ? (\n                          <Check className=\"w-3.5 h-3.5 text-success\" />\n                        ) : (\n                          <Copy className=\"w-3.5 h-3.5 text-slate-400\" />\n                        )}\n                      </button>\n                    </div>\n                  </td>\n                  {/* 卡号 - 品牌化脱敏显示 */}\n                  <td className=\"px-6 py-6 whitespace-nowrap\" onClick={(e) => e.stopPropagation()}>\n                    <div className=\"flex items-center gap-2.5\">\n                      <div className={`p-1.5 rounded-lg bg-slate-100 dark:bg-dark-900 ${getCardBranding(tx.cardNumber).color}`}>\n                        {getCardBranding(tx.cardNumber).icon}\n                      </div>\n                      <div className=\"flex flex-col\">\n                        <span className=\"font-mono text-sm font-semibold tracking-wider text-slate-700 dark:text-slate-200\">\n                          {tx.cardNumber || tx.cardId}\n                        </span>\n                        <span className=\"text-[10px] uppercase font-bold text-slate-400 tracking-tighter\">\n                          {getCardBranding(tx.cardNumber).label} Card\n                        </span>\n                      </div>\n                    </div>\n                  </td>\n                  {/* 交易类型 - 图标化 */}\n                  <td className=\"table-cell\">\n                    <span\n                      className={`inline-flex items-center gap-1.5 px-2 py-0.5 rounded-md text-sm font-medium ${tx.type === 'PURCHASE'\n                        ? 'bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300'\n                        : tx.type === 'RECHARGE'\n                          ? 'bg-success/10 text-success'\n                          : 'bg-warning/10 text-warning'\n                        }`}\n                    >\n                      {tx.type === 'PURCHASE' && <Bus className=\"w-4 h-4\" />}\n                      {tx.type === 'RECHARGE' && <Wallet className=\"w-4 h-4\" />}\n                      {tx.type === 'REFUND' && <RotateCcw className=\"w-4 h-4\" />}\n                      {t(`transactions.types.${tx.type}`)}\n                    </span>\n                  </td>\n                  {/* 金额 - 加粗 + 大额背景色 */}\n                  <td className=\"table-cell\">\n                    <span\n                      className={`inline-flex items-center gap-1 font-mono text-base font-bold px-2 py-0.5 rounded ${tx.type === 'RECHARGE' || tx.type === 'REFUND'\n                        ? isLargeAmount(tx.amount) ? 'bg-success/15 text-success' : 'text-success'\n                        : isLargeAmount(tx.amount) ? 'bg-error/15 text-error' : 'text-error'\n                        }`}\n                    >\n                      {tx.type === 'RECHARGE' || tx.type === 'REFUND' ? '+' : '-'}\n                      <span className=\"text-xs opacity-60\">¥</span>\n                      {safeNumber(tx.amount).toFixed(2)}\n                    </span>\n                  </td>\n                  {/* 终端 - 双行显示 */}\n                  <td className=\"table-cell\">\n                    <div className=\"flex flex-col\">\n                      <span className=\"text-sm text-slate-700 dark:text-slate-300\">\n                        {(tx as any).terminalLocation || (tx as any).terminalName || t('transactions.unknownStation')}\n                      </span>\n                      <span className=\"text-xs font-mono text-slate-400 dark:text-slate-500\">\n                        {tx.terminalId}\n                      </span>\n                    </div>\n                  </td>\n                  {/* 状态 + 异常盾牌 */}\n                  <td className=\"table-cell\">\n                    <div className=\"flex items-center gap-1.5\">\n                      <span\n                        className={`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold border ${tx.status === 'COMPLETED'\n                          ? 'bg-success/15 text-success border-success/30'\n                          : tx.status === 'PENDING' || tx.status === 'PROCESSING'\n                            ? 'bg-warning/15 text-warning border-warning/30 animate-pulse'\n                            : tx.status === 'CANCELLED'\n                              ? 'bg-slate-200 dark:bg-slate-700 text-slate-500 border-slate-300'\n                              : 'bg-error/15 text-error border-error/30'\n                          }`}\n                      >\n                        <span className={`w-1.5 h-1.5 rounded-full mr-1.5 ${tx.status === 'COMPLETED' ? 'bg-success animate-pulse' :\n                          tx.status === 'PENDING' || tx.status === 'PROCESSING' ? 'bg-warning animate-bounce' :\n                            tx.status === 'CANCELLED' ? 'bg-slate-400' : 'bg-error animate-ping'\n                          }`} />\n                        {t(`transactions.status.${tx.status}`)}\n                      </span>\n                      {tx.status === 'FAILED' && (\n                        <div className=\"relative group\">\n                          <Shield className=\"w-4 h-4 text-error animate-pulse cursor-help\" />\n                          <div className=\"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-slate-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10\">\n                            {(tx as any).failureReason || t('transactions.errors.unknown')}\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  </td>\n                  {/* 对账状态 */}\n                  <td className=\"table-cell\">\n                    {tx.status === 'COMPLETED' ? (\n                      <span className=\"inline-flex items-center gap-1 text-xs text-slate-500\">\n                        <CheckCheck className=\"w-3.5 h-3.5 text-success\" />\n                        {t('transactions.reconciliation.settled')}\n                      </span>\n                    ) : tx.status === 'PENDING' ? (\n                      <span className=\"inline-flex items-center gap-1 text-xs text-warning\">\n                        <Clock className=\"w-3.5 h-3.5\" />\n                        {t('transactions.reconciliation.pending') || '未入账'}\n                      </span>\n                    ) : (\n                      <span className=\"text-xs text-slate-400\">-</span>\n                    )}\n                  </td>\n                  {/* 时间戳 */}\n                  <td className=\"table-cell text-slate-500 dark:text-slate-400 text-sm\">\n                    {new Date(tx.createdAt).toLocaleString()}\n                  </td>\n                  {/* 操作列 - 扩展下拉菜单 */}\n                  <td className=\"table-cell\">\n                    <div className=\"flex items-center gap-1\" onClick={(e) => e.stopPropagation()}>\n                      <button\n                        className=\"p-1.5 text-slate-400 hover:text-primary-500 hover:bg-primary-500/10 rounded-lg transition-colors\"\n                        title={t('common.details')}\n                        onClick={() => {\n                          setSelectedTx(tx)\n                          setShowDetailsDrawer(true)\n                        }}\n                      >\n                        <Eye className=\"w-4 h-4\" />\n                      </button>\n                      {/* 更多操作下拉 */}\n                      <div className=\"relative\">\n                        <button\n                          onClick={() => setOpenActionMenuId(openActionMenuId === tx.id ? null : tx.id)}\n                          className=\"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:bg-dark-700 rounded-lg transition-colors\"\n                        >\n                          <MoreHorizontal className=\"w-4 h-4\" />\n                        </button>\n                        {openActionMenuId === tx.id && (\n                          <div className=\"absolute right-0 top-full mt-1 w-36 bg-white dark:bg-dark-800 rounded-lg shadow-xl border border-slate-200 dark:border-dark-600 py-1 z-20\">\n                            {tx.type === 'RECHARGE' && tx.status === 'COMPLETED' && (\n                              <>\n                                <button className=\"w-full px-3 py-2 text-left text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-dark-700 flex items-center gap-2\">\n                                  <Printer className=\"w-4 h-4\" />\n                                  {t('transactions.printReceipt') || '打印小票'}\n                                </button>\n                                <button className=\"w-full px-3 py-2 text-left text-sm text-warning hover:bg-warning/10 flex items-center gap-2\">\n                                  <RotateCcw className=\"w-4 h-4\" />\n                                  {t('transactions.actions.reverse') || '冲正'}\n                                </button>\n                              </>\n                            )}\n                            {tx.type === 'PURCHASE' && (\n                              <button className=\"w-full px-3 py-2 text-left text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-dark-700 flex items-center gap-2\">\n                                <MapPin className=\"w-4 h-4\" />\n                                {t('transactions.viewTrail') || '轨迹回放'}\n                              </button>\n                            )}\n                            {tx.status === 'FAILED' && (\n                              <button className=\"w-full px-3 py-2 text-left text-sm text-error hover:bg-error/10 flex items-center gap-2\">\n                                <AlertCircle className=\"w-4 h-4\" />\n                                {t('transactions.viewError') || '查看原因'}\n                              </button>\n                            )}\n                            <button\n                              className=\"w-full px-3 py-2 text-left text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-dark-700 flex items-center gap-2\"\n                              onClick={() => copyTransactionId(tx.id)}\n                            >\n                              <Copy className=\"w-4 h-4\" />\n                              {t('transactions.copyId')}\n                            </button>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </td>\n                </motion.tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n\n        <div className=\"flex items-center justify-between px-6 py-4 border-t border-slate-200 dark:border-dark-600\">\n          <p className=\"text-sm text-slate-400\">\n            {t('transactions.showing', { count: transactions.length, total: transactionsData?.total || 0 })}\n          </p>\n          <div className=\"flex items-center gap-2\">\n            {/* Page Size Selector */}\n            <select\n              value={pageSize}\n              onChange={(e) => {\n                setPageSize(Number(e.target.value))\n                setCurrentPage(1)\n              }}\n              className=\"px-3 py-2 text-sm bg-slate-100 dark:bg-dark-700 border border-slate-200 dark:border-dark-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500\"\n            >\n              {[10, 30, 100].map((size) => (\n                <option key={size} value={size}>\n                  {t('common.showEntries', { count: size })}\n                </option>\n              ))}\n            </select>\n            <button\n              onClick={() => setCurrentPage((p) => Math.max(1, p - 1))}\n              disabled={currentPage === 1}\n              className=\"p-2 hover:bg-slate-100 dark:hover:bg-dark-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              <ChevronLeft className=\"w-5 h-5 text-slate-400\" />\n            </button>\n            <span className=\"px-4 py-2 bg-primary-500/20 text-primary-400 rounded-lg text-sm font-medium\">\n              {currentPage} / {totalPages}\n            </span>\n            <button\n              onClick={() => setCurrentPage((p) => Math.min(totalPages, p + 1))}\n              disabled={currentPage === totalPages}\n              className=\"p-2 hover:bg-slate-100 dark:hover:bg-dark-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              <ChevronRight className=\"w-5 h-5 text-slate-400\" />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* 交易详情侧抽屉 (P1) */}\n      <AnimatePresence>\n        {showDetailsDrawer && selectedTx && (\n          <>\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              onClick={() => setShowDetailsDrawer(false)}\n              className=\"fixed inset-0 bg-black/40 backdrop-blur-sm z-40\"\n            />\n            <motion.div\n              initial={{ x: '100%' }}\n              animate={{ x: 0 }}\n              exit={{ x: '100%' }}\n              transition={{ type: 'spring', damping: 25, stiffness: 200 }}\n              className=\"fixed right-0 top-0 bottom-0 w-full max-w-md bg-white dark:bg-dark-800 shadow-2xl z-50 overflow-y-auto\"\n            >\n              <div className=\"p-6\">\n                <div className=\"flex items-center justify-between mb-8\">\n                  <h2 className=\"text-xl font-display font-bold text-slate-900 dark:text-slate-100\">\n                    {t('transactions.details.title') || '交易详情'}\n                  </h2>\n                  <button\n                    onClick={() => setShowDetailsDrawer(false)}\n                    className=\"p-2 hover:bg-slate-100 dark:hover:bg-dark-700 rounded-full transition-colors\"\n                  >\n                    <X className=\"w-5 h-5 text-slate-400\" />\n                  </button>\n                </div>\n\n                <div className=\"space-y-6\">\n                  {/* 金额汇总 */}\n                  <div className=\"p-6 bg-slate-50 dark:bg-dark-900 rounded-2xl border border-slate-100 dark:border-dark-600 text-center\">\n                    <p className=\"text-sm text-slate-500 mb-1\">{t(`transactions.types.${selectedTx.type}`)}</p>\n                    <p className={`text-3xl font-display font-bold ${selectedTx.type === 'RECHARGE' || selectedTx.type === 'REFUND' ? 'text-success' : 'text-error'\n                      }`}>\n                      {selectedTx.type === 'RECHARGE' || selectedTx.type === 'REFUND' ? '+' : '-'} ¥{safeNumber(selectedTx.amount).toFixed(2)}\n                    </p>\n                    <p className=\"mt-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-white dark:bg-dark-800 border border-slate-200 dark:border-dark-600\">\n                      {t(`transactions.status.${selectedTx.status}`)}\n                    </p>\n                  </div>\n\n                  {/* 核心信息 */}\n                  <div className=\"space-y-4\">\n                    <h3 className=\"text-xs font-bold text-slate-400 uppercase tracking-wider\">{t('transactions.details.basicInfo') || '基础信息'}</h3>\n                    <DetailItem label={t('transactions.table.transactionId')} value={selectedTx.id} mono />\n                    <DetailItem label={t('transactions.table.cardId')} value={selectedTx.cardNumber || selectedTx.cardId} mono />\n                    <DetailItem label={t('transactions.table.timestamp')} value={new Date(selectedTx.createdAt).toLocaleString()} />\n                    <DetailItem label={t('transactions.table.balance')} value={`¥${safeNumber(selectedTx.balance).toLocaleString()}`} mono />\n                  </div>\n\n                  {/* 运营/技术细节 (P1 需求) */}\n                  <div className=\"space-y-4 pt-4 border-t border-slate-100 dark:border-dark-700\">\n                    <h3 className=\"text-xs font-bold text-slate-400 uppercase tracking-wider\">{t('transactions.details.operationInfo')}</h3>\n\n                    {/* 交易链路图 (New) */}\n                    <div className=\"py-2\">\n                      <div className=\"relative flex flex-col gap-4\">\n                        <div className=\"absolute left-3 top-3 bottom-3 w-0.5 bg-slate-200 dark:bg-dark-600\" />\n\n                        <div className=\"relative flex items-center gap-4 pl-8\">\n                          <div className=\"absolute left-0 w-6 h-6 rounded-full bg-success/20 border-2 border-success flex items-center justify-center\">\n                            <MapPin className=\"w-3 h-3 text-success\" />\n                          </div>\n                          <div>\n                            <p className=\"text-sm font-medium\">{t('transactions.details.location')}</p>\n                            <p className=\"text-xs text-slate-500\">\n                              {(selectedTx as any).terminalLocation || t('transactions.unknownStation')}\n                            </p>\n                          </div>\n                        </div>\n\n                        <div className=\"relative flex items-center gap-4 pl-8\">\n                          <div className=\"absolute left-0 w-6 h-6 rounded-full bg-primary/20 border-2 border-primary flex items-center justify-center\">\n                            <RefreshCw className=\"w-3 h-3 text-primary\" />\n                          </div>\n                          <div>\n                            <p className=\"text-sm font-medium\">{t('transactions.details.originalSeq')}</p>\n                            <p className=\"text-xs text-slate-500 font-mono\">SEQ-{selectedTx.id.split('-')[1] || '002391'}</p>\n                          </div>\n                        </div>\n\n                        <div className=\"relative flex items-center gap-4 pl-8\">\n                          <div className={`absolute left-0 w-6 h-6 rounded-full border-2 flex items-center justify-center ${selectedTx.status === 'COMPLETED' ? 'bg-success/20 border-success' : 'bg-warning/20 border-warning'\n                            }`}>\n                            <CheckCircle className={`w-3 h-3 ${selectedTx.status === 'COMPLETED' ? 'text-success' : 'text-warning'}`} />\n                          </div>\n                          <div>\n                            <p className=\"text-sm font-medium\">{t('transactions.table.status')}</p>\n                            <p className=\"text-xs text-slate-500\">{t(`transactions.status.${selectedTx.status}`)}</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <DetailItem label={t('transactions.table.terminal')} value={selectedTx.terminalName || selectedTx.terminalId} />\n                    <DetailItem label={t('transactions.details.tacCode')} value=\"AABB-CCDD-EEFF-1122\" mono />\n                    <DetailItem label={t('transactions.details.settlementCycle')} value={format(new Date(selectedTx.createdAt), 'yyyyMMdd')} />\n                  </div>\n\n                  {/* 风险信息 (P2 需求) */}\n                  {selectedTx.status === 'FAILED' && (\n                    <div className=\"p-4 bg-rose-500/10 border border-rose-500/20 rounded-xl\">\n                      <div className=\"flex items-start gap-3\">\n                        <AlertCircle className=\"w-5 h-5 text-rose-500 flex-shrink-0 mt-0.5\" />\n                        <div>\n                          <p className=\"text-sm font-semibold text-rose-500 mb-1\">{t('transactions.details.failureReason')}</p>\n                          <p className=\"text-sm text-rose-500/80\">{selectedTx.metadata?.errorMessage || t('transactions.errors.timeout')}</p>\n                          <button className=\"mt-2 text-xs font-bold text-rose-500 underline hover:no-underline\">\n                            {t('transactions.details.retryGuide')}\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* 操作按钮 (P1 需求) */}\n                  <div className=\"grid grid-cols-2 gap-3 pt-6\">\n                    <button\n                      className=\"btn-secondary py-3 flex items-center justify-center gap-2 text-error hover:bg-error/10 border-error/20\"\n                      onClick={() => showInfoToast(t('transactions.refundInitiated'), t('transactions.refundInProgress'))}\n                    >\n                      <RotateCcw className=\"w-4 h-4\" />\n                      {t('transactions.actions.refund') || '一键退款'}\n                    </button>\n                    <button\n                      className=\"btn-primary py-3 flex items-center justify-center gap-2\"\n                      onClick={() => showInfoToast(t('transactions.auditPassed'), t('transactions.auditCompleted'))}\n                    >\n                      <CheckCircle className=\"w-4 h-4\" />\n                      {t('transactions.actions.audit') || '审计通过'}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n          </>\n        )}\n      </AnimatePresence>\n\n      {/* 高级自定义导出面板 (P2) */}\n      <AnimatePresence>\n        {showExportModal && (\n          <>\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              onClick={() => setShowExportModal(false)}\n              className=\"fixed inset-0 bg-black/60 backdrop-blur-md z-[60]\"\n            />\n            <motion.div\n              initial={{ opacity: 0, scale: 0.95, y: 20 }}\n              animate={{ opacity: 1, scale: 1, y: 0 }}\n              exit={{ opacity: 0, scale: 0.95, y: 20 }}\n              className=\"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-lg bg-white dark:bg-dark-800 rounded-3xl shadow-2xl z-[70] overflow-hidden\"\n            >\n              <div className=\"p-8\">\n                <div className=\"flex items-center justify-between mb-8\">\n                  <div>\n                    <h2 className=\"text-2xl font-display font-bold text-slate-900 dark:text-slate-100\">\n                      {t('transactions.export.title') || '高级导出设置'}\n                    </h2>\n                    <p className=\"text-sm text-slate-500 mt-1\">{t('transactions.export.subtitle') || '自定义您的导出模板和格式'}</p>\n                  </div>\n                  <button onClick={() => setShowExportModal(false)} className=\"p-2 hover:bg-slate-100 dark:hover:bg-dark-700 rounded-full\">\n                    <X className=\"w-5 h-5 text-slate-400\" />\n                  </button>\n                </div>\n\n                <div className=\"space-y-8\">\n                  {/* 选择格式 */}\n                  <div className=\"space-y-3\">\n                    <label className=\"text-sm font-bold text-slate-400 uppercase tracking-wider\">{t('transactions.export.format') || '文件格式'}</label>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <button\n                        onClick={() => setExportFormat('CSV')}\n                        className={`p-4 rounded-2xl border-2 transition-all flex items-center justify-center gap-3 ${exportFormat === 'CSV' ? 'border-primary-500 bg-primary-500/5 text-primary-600' : 'border-slate-100 dark:border-dark-700'\n                          }`}\n                      >\n                        <FileText className=\"w-5 h-5\" />\n                        <span className=\"font-bold\">Excel (CSV)</span>\n                        {exportFormat === 'CSV' && <Check className=\"w-4 h-4 ml-auto\" />}\n                      </button>\n                      <button\n                        onClick={() => setExportFormat('PDF')}\n                        className={`p-4 rounded-2xl border-2 transition-all flex items-center justify-center gap-3 ${exportFormat === 'PDF' ? 'border-primary-500 bg-primary-500/5 text-primary-600' : 'border-slate-100 dark:border-dark-700'\n                          }`}\n                      >\n                        <FileDown className=\"w-5 h-5\" />\n                        <span className=\"font-bold\">PDF 账单</span>\n                        {exportFormat === 'PDF' && <Check className=\"w-4 h-4 ml-auto\" />}\n                      </button>\n                    </div>\n                  </div>\n\n                  {/* 选择导出列 */}\n                  <div className=\"space-y-3\">\n                    <div className=\"flex justify-between items-center\">\n                      <label className=\"text-sm font-bold text-slate-400 uppercase tracking-wider\">{t('transactions.export.columns') || '导出字段选择'}</label>\n                      <button\n                        onClick={() => setSelectedColumns(['id', 'cardId', 'type', 'amount', 'status', 'timestamp', 'terminal', 'balance'])}\n                        className=\"text-xs text-primary-600 font-bold hover:underline\"\n                      >\n                        {t('common.selectAll') || '全选'}\n                      </button>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-2 p-4 bg-slate-50 dark:bg-dark-900 rounded-2xl border border-slate-100 dark:border-dark-700 font-medium\">\n                      {[\n                        { id: 'id', label: t('transactions.table.transactionId') },\n                        { id: 'cardId', label: t('transactions.table.cardId') },\n                        { id: 'type', label: t('transactions.table.type') },\n                        { id: 'amount', label: t('transactions.table.amount') },\n                        { id: 'status', label: t('transactions.table.status') },\n                        { id: 'timestamp', label: t('transactions.table.timestamp') },\n                        { id: 'terminal', label: t('transactions.table.terminal') },\n                        { id: 'balance', label: t('transactions.table.balance') },\n                      ].map((col) => (\n                        <label key={col.id} className=\"flex items-center gap-3 p-2 hover:bg-white dark:hover:bg-dark-800 rounded-lg cursor-pointer transition-colors group\">\n                          <div className={`w-5 h-5 rounded-md border-2 flex items-center justify-center transition-colors ${selectedColumns.includes(col.id) ? 'bg-primary-500 border-primary-500 text-white' : 'border-slate-300 dark:border-dark-600 bg-transparent'\n                            }`}>\n                            {selectedColumns.includes(col.id) && <Check className=\"w-3.5 h-3.5 stroke-[3]\" />}\n                          </div>\n                          <input\n                            type=\"checkbox\"\n                            className=\"hidden\"\n                            checked={selectedColumns.includes(col.id)}\n                            onChange={(e) => {\n                              if (e.target.checked) setSelectedColumns([...selectedColumns, col.id])\n                              else setSelectedColumns(selectedColumns.filter(c => c !== col.id))\n                            }}\n                          />\n                          <span className=\"text-sm text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white\">{col.label}</span>\n                        </label>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* 确认导出 */}\n                  <div className=\"pt-4 flex gap-4\">\n                    <button\n                      onClick={() => setShowExportModal(false)}\n                      className=\"flex-1 py-4 bg-slate-100 dark:bg-dark-700 text-slate-700 dark:text-slate-300 font-bold rounded-2x hover:bg-slate-200\"\n                    >\n                      {t('common.cancel')}\n                    </button>\n                    <button\n                      className=\"flex-1 py-4 bg-primary-600 text-white font-bold rounded-2xl shadow-xl shadow-primary-500/20 hover:bg-primary-700 transition-all flex items-center justify-center gap-2\"\n                      onClick={() => {\n                        handleExport()\n                        setShowExportModal(false)\n                      }}\n                    >\n                      <Download className=\"w-5 h-5\" />\n                      {t('transactions.confirmExport') || '立即生成报表'}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n          </>\n        )}\n      </AnimatePresence>\n    </motion.div>\n  )\n}\n\nfunction DetailItem({ label, value, mono = false }: { label: string, value: string, mono?: boolean }) {\n  return (\n    <div className=\"flex justify-between items-center text-sm\">\n      <span className=\"text-slate-500\">{label}</span>\n      <span className={`font-medium text-slate-900 dark:text-slate-100 ${mono ? 'font-mono' : ''}`}>{value}</span>\n    </div>\n  )\n}\n\nexport default Transactions\n"],"names":["CheckCheck","createLucideIcon","FileDown","transactionTypes","transactionStatuses","Transactions","useTranslation","trackAction","useHelp","selectedType","setSelectedType","useState","useEffect","selectedStatus","setSelectedStatus","searchQuery","setSearchQuery","currentPage","setCurrentPage","dateRange","setDateRange","format","subDays","actionError","setActionError","selectedTx","setSelectedTx","showDetailsDrawer","setShowDetailsDrawer","showExportModal","setShowExportModal","exportFormat","setExportFormat","selectedColumns","setSelectedColumns","pageSize","setPageSize","selectedIds","setSelectedIds","copiedId","setCopiedId","openActionMenuId","setOpenActionMenuId","terminalAlerts","filters","transactionsData","isLoading","isError","error","refetch","useTransactions","statsData","useTransactionStats","anomaliesData","useAnomalies","exportMutation","useExportTransactions","acknowledgeMutation","useAcknowledgeAnomaly","resolveMutation","useResolveAnomaly","handleExport","blob","url","a","err","_b","_a","handleAcknowledgeAnomaly","anomalyId","handleResolveAnomaly","resolution","copyTransactionId","id","truncateId","toggleSelectAll","transactions","tx","toggleSelectOne","prev","i","isLargeAmount","amount","getCardBranding","cardNumber","jsx","Bus","CreditCard","Shield","Wallet","applyPreset","preset","now","stats","safeNumber","val","num","anomalies","totalPages","Loader2","jsxs","AlertCircle","RotateCcw","motion","Activity","AlertTriangle","anomaly","RefreshCw","Filter","Clock","ArrowUpRight","Search","e","type","status","Calendar","showInfoToast","CheckSquare","Square","index","Check","Copy","Eye","MoreHorizontal","Fragment","Printer","MapPin","size","p","ChevronLeft","ChevronRight","AnimatePresence","X","DetailItem","CheckCircle","FileText","col","c","Download","label","value","mono"],"mappings":"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","x_google_ignoreList":[0,1]}