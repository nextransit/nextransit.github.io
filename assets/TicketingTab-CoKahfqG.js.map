{"version":3,"file":"TicketingTab-CoKahfqG.js","sources":["../../src/components/transit/TicketingTab.tsx"],"sourcesContent":["import { useState } from 'react'\nimport { motion } from 'framer-motion'\nimport { useTranslation } from 'react-i18next'\nimport {\n    Ticket,\n    CreditCard,\n    Smartphone,\n    QrCode,\n    Search,\n    Filter,\n    Download,\n    CheckCircle,\n    XCircle,\n    RotateCcw\n} from 'lucide-react'\n\ninterface TicketOrder {\n    id: string\n    orderId: string\n    cardNumber: string\n    routeCode: string\n    amount: number\n    paymentMethod: 'qrcode' | 'nfc' | 'card'\n    status: 'paid' | 'refunded' | 'cancelled'\n    createdAt: string\n}\n\n// 模拟订单数据\nconst mockOrders: TicketOrder[] = [\n    { id: '1', orderId: 'TK20260207001', cardNumber: '6225****1234', routeCode: '101', amount: 2.00, paymentMethod: 'qrcode', status: 'paid', createdAt: '2026-02-07 08:15:32' },\n    { id: '2', orderId: 'TK20260207002', cardNumber: '6225****2345', routeCode: '202', amount: 3.00, paymentMethod: 'nfc', status: 'paid', createdAt: '2026-02-07 08:22:15' },\n    { id: '3', orderId: 'TK20260207003', cardNumber: '6225****3456', routeCode: '101', amount: 2.00, paymentMethod: 'card', status: 'refunded', createdAt: '2026-02-07 08:35:48' },\n    { id: '4', orderId: 'TK20260207004', cardNumber: '6225****4567', routeCode: '303', amount: 5.00, paymentMethod: 'qrcode', status: 'paid', createdAt: '2026-02-07 08:45:20' },\n    { id: '5', orderId: 'TK20260207005', cardNumber: '6225****5678', routeCode: '202', amount: 3.00, paymentMethod: 'nfc', status: 'cancelled', createdAt: '2026-02-07 09:02:33' },\n]\n\nexport function TicketingTab() {\n    const { t } = useTranslation()\n    const [orders] = useState<TicketOrder[]>(mockOrders)\n    const [searchTerm, setSearchTerm] = useState('')\n    const [statusFilter, setStatusFilter] = useState<string>('all')\n\n    const filteredOrders = orders.filter(o => {\n        const matchesSearch = o.orderId.includes(searchTerm) || o.cardNumber.includes(searchTerm)\n        const matchesStatus = statusFilter === 'all' || o.status === statusFilter\n        return matchesSearch && matchesStatus\n    })\n\n    const getStatusBadge = (status: TicketOrder['status']) => {\n        const styles = {\n            paid: 'bg-green-500/10 text-green-600 dark:text-green-400',\n            refunded: 'bg-amber-500/10 text-amber-600 dark:text-amber-400',\n            cancelled: 'bg-red-500/10 text-red-600 dark:text-red-400',\n        }\n        return styles[status]\n    }\n\n    const getStatusIcon = (status: TicketOrder['status']) => {\n        switch (status) {\n            case 'paid': return CheckCircle\n            case 'refunded': return RotateCcw\n            case 'cancelled': return XCircle\n        }\n    }\n\n    const getPaymentIcon = (method: TicketOrder['paymentMethod']) => {\n        switch (method) {\n            case 'qrcode': return QrCode\n            case 'nfc': return Smartphone\n            case 'card': return CreditCard\n        }\n    }\n\n    const totalRevenue = orders.filter(o => o.status === 'paid').reduce((sum, o) => sum + o.amount, 0)\n    const totalOrders = orders.length\n    const paidCount = orders.filter(o => o.status === 'paid').length\n    const refundedCount = orders.filter(o => o.status === 'refunded').length\n\n    const stats = [\n        { label: t('transit.todayRevenue'), value: `¥${totalRevenue.toFixed(2)}`, icon: Ticket, color: 'primary' },\n        { label: t('transit.orderQuery'), value: totalOrders, icon: CreditCard, color: 'blue' },\n        { label: t('transit.ticketStatus.paid'), value: paidCount, icon: CheckCircle, color: 'green' },\n        { label: t('transit.ticketStatus.refunded'), value: refundedCount, icon: RotateCcw, color: 'amber' },\n    ]\n\n    return (\n        <div className=\"space-y-6\">\n            {/* 统计卡片 */}\n            <div className=\"grid grid-cols-4 gap-4\">\n                {stats.map((stat, i) => (\n                    <motion.div\n                        key={i}\n                        initial={{ opacity: 0, y: 10 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        transition={{ delay: i * 0.1 }}\n                        className=\"p-4 rounded-xl bg-white dark:bg-dark-800 border border-slate-200 dark:border-dark-600\"\n                    >\n                        <div className=\"flex items-center gap-3\">\n                            <div className={`p-2 rounded-lg bg-${stat.color}-500/10`}>\n                                <stat.icon className={`w-5 h-5 text-${stat.color}-500`} />\n                            </div>\n                            <div>\n                                <p className=\"text-xs text-slate-500\">{stat.label}</p>\n                                <p className=\"text-xl font-bold text-slate-900 dark:text-slate-100\">{stat.value}</p>\n                            </div>\n                        </div>\n                    </motion.div>\n                ))}\n            </div>\n\n            {/* 搜索和筛选 */}\n            <div className=\"flex items-center justify-between gap-4\">\n                <div className=\"flex items-center gap-4 flex-1\">\n                    <div className=\"relative flex-1 max-w-md\">\n                        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\n                        <input\n                            type=\"text\"\n                            placeholder={t('transactions.searchPlaceholder')}\n                            value={searchTerm}\n                            onChange={(e) => setSearchTerm(e.target.value)}\n                            className=\"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-dark-700 border border-slate-200 dark:border-dark-600 rounded-lg text-sm\"\n                        />\n                    </div>\n                    <select\n                        value={statusFilter}\n                        onChange={(e) => setStatusFilter(e.target.value)}\n                        className=\"px-4 py-2 bg-slate-50 dark:bg-dark-700 border border-slate-200 dark:border-dark-600 rounded-lg text-sm\"\n                    >\n                        <option value=\"all\">{t('common.allStatus')}</option>\n                        <option value=\"paid\">{t('transit.ticketStatus.paid')}</option>\n                        <option value=\"refunded\">{t('transit.ticketStatus.refunded')}</option>\n                        <option value=\"cancelled\">{t('transit.ticketStatus.cancelled')}</option>\n                    </select>\n                </div>\n                <button className=\"btn-secondary flex items-center gap-2\">\n                    <Download className=\"w-4 h-4\" />\n                    {t('common.export')}\n                </button>\n            </div>\n\n            {/* 订单列表 */}\n            <div className=\"bg-white dark:bg-dark-800 rounded-xl border border-slate-200 dark:border-dark-600 overflow-hidden\">\n                <div className=\"grid grid-cols-7 gap-4 p-4 bg-slate-50 dark:bg-dark-700 text-sm font-medium text-slate-600 dark:text-slate-400\">\n                    <div>{t('transit.orderQuery')}</div>\n                    <div>{t('cards.cardNumber')}</div>\n                    <div>{t('common.route')}</div>\n                    <div>{t('transactions.table.amount')}</div>\n                    <div>{t('transit.paymentRecord')}</div>\n                    <div>{t('common.status')}</div>\n                    <div>{t('transactions.table.timestamp')}</div>\n                </div>\n                <div className=\"divide-y divide-slate-200 dark:divide-dark-600\">\n                    {filteredOrders.map((order, i) => {\n                        const StatusIcon = getStatusIcon(order.status)\n                        const PaymentIcon = getPaymentIcon(order.paymentMethod)\n                        return (\n                            <motion.div\n                                key={order.id}\n                                initial={{ opacity: 0, x: -10 }}\n                                animate={{ opacity: 1, x: 0 }}\n                                transition={{ delay: i * 0.05 }}\n                                className=\"grid grid-cols-7 gap-4 p-4 items-center hover:bg-slate-50 dark:hover:bg-dark-700 transition-colors\"\n                            >\n                                <div className=\"font-mono text-sm text-slate-900 dark:text-slate-100\">{order.orderId}</div>\n                                <div className=\"text-slate-600 dark:text-slate-400\">{order.cardNumber}</div>\n                                <div>\n                                    <span className=\"px-2 py-0.5 bg-primary-500/10 text-primary-600 dark:text-primary-400 rounded text-xs font-medium\">\n                                        {order.routeCode}路\n                                    </span>\n                                </div>\n                                <div className=\"font-semibold text-slate-900 dark:text-slate-100\">¥{order.amount.toFixed(2)}</div>\n                                <div className=\"flex items-center gap-1.5 text-slate-600 dark:text-slate-400\">\n                                    <PaymentIcon className=\"w-4 h-4\" />\n                                    <span className=\"text-xs\">\n                                        {t(`transit.paymentMethod.${order.paymentMethod}`)}\n                                    </span>\n                                </div>\n                                <div>\n                                    <span className={`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${getStatusBadge(order.status)}`}>\n                                        <StatusIcon className=\"w-3 h-3\" />\n                                        {t(`transit.ticketStatus.${order.status}`)}\n                                    </span>\n                                </div>\n                                <div className=\"text-xs text-slate-500\">{order.createdAt}</div>\n                            </motion.div>\n                        )\n                    })}\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default TicketingTab\n"],"names":["mockOrders","TicketingTab","t","useTranslation","orders","useState","searchTerm","setSearchTerm","statusFilter","setStatusFilter","filteredOrders","o","matchesSearch","matchesStatus","getStatusBadge","status","getStatusIcon","CheckCircle","RotateCcw","XCircle","getPaymentIcon","method","QrCode","Smartphone","CreditCard","totalRevenue","sum","totalOrders","paidCount","refundedCount","stats","Ticket","jsxs","jsx","stat","i","motion","Search","e","Download","order","StatusIcon","PaymentIcon"],"mappings":"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"}